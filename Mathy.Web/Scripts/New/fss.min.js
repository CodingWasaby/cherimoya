function localStorageSupport(){return"localStorage"in window&&window.localStorage!==null}function animationHover(n,t){n=$(n);n.hover(function(){n.addClass("animated "+t)},function(){window.setTimeout(function(){n.removeClass("animated "+t)},2e3)})}function SmoothlyMenu(){!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}function WinMove(){$("[class*=col]").sortable({handle:".ibox-title",connectWith:"[class*=col]",tolerance:"pointer",forcePlaceholderSize:!0,opacity:.8}).disableSelection()}!function(n){"use strict";function u(){var i=document.createElement("mm"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return{end:n[t]};return!1}function f(i){return this.each(function(){var r=n(this),u=r.data("mm"),f=n.extend({},t.DEFAULTS,r.data(),"object"==typeof i&&i);u||r.data("mm",u=new t(this,f));"string"==typeof i&&u[i]()})}var i,t,r;n.fn.emulateTransitionEnd=function(t){var r=!1,f=this,u;n(this).one("mmTransitionEnd",function(){r=!0});return u=function(){r||n(f).trigger(i.end)},setTimeout(u,t),this};i=u();i&&(n.event.special.mmTransitionEnd={bindType:i.end,delegateType:i.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}});t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.transitioning=null;this.init()};t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active"};t.prototype.init=function(){var t=this,i=this.options.activeClass;this.$element.find("li."+i).has("ul").children("ul").addClass("collapse in");this.$element.find("li").not("."+i).has("ul").children("ul").addClass("collapse");this.options.doubleTapToGo&&this.$element.find("li."+i).has("ul").children("a").addClass("doubleTapToGo");this.$element.find("li").has("ul").children("a").on("click.metisMenu",function(r){var u=n(this),f=u.parent("li"),e=f.children("ul");return r.preventDefault(),f.hasClass(i)?t.hide(e):t.show(e),t.options.doubleTapToGo&&t.doubleTapToGo(u)&&"#"!==u.attr("href")&&""!==u.attr("href")?(r.stopPropagation(),void(document.location=u.attr("href"))):void 0})};t.prototype.doubleTapToGo=function(n){var t=this.$element;return n.hasClass("doubleTapToGo")?(n.removeClass("doubleTapToGo"),!0):n.parent().children("ul").length?(t.find(".doubleTapToGo").removeClass("doubleTapToGo"),n.addClass("doubleTapToGo"),!1):void 0};t.prototype.show=function(r){var o=this.options.activeClass,u=n(r),e=u.parent("li"),f;if(!this.transitioning&&!u.hasClass("in"))return e.addClass(o),this.options.toggle&&this.hide(e.siblings().children("ul.in")),u.removeClass("collapse").addClass("collapsing").height(0),this.transitioning=1,f=function(){u.removeClass("collapsing").addClass("collapse in").height("");this.transitioning=0},i?void u.one("mmTransitionEnd",n.proxy(f,this)).emulateTransitionEnd(t.TRANSITION_DURATION).height(u[0].scrollHeight):f.call(this)};t.prototype.hide=function(r){var e=this.options.activeClass,u=n(r),f;if(!this.transitioning&&u.hasClass("in"))return u.parent("li").removeClass(e),u.height(u.height())[0].offsetHeight,u.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1,f=function(){this.transitioning=0;u.removeClass("collapsing").addClass("collapse")},i?void u.height(0).one("mmTransitionEnd",n.proxy(f,this)).emulateTransitionEnd(t.TRANSITION_DURATION):f.call(this)};r=n.fn.metisMenu;n.fn.metisMenu=f;n.fn.metisMenu.Constructor=t;n.fn.metisMenu.noConflict=function(){return n.fn.metisMenu=r,this}}(jQuery);
/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.6
 *
 */
(function(n){n.fn.extend({slimScroll:function(i){var r=n.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);return this.each(function(){function p(t){if(v){t=t||window.event;var i=0;t.wheelDelta&&(i=-t.wheelDelta/120);t.detail&&(i=t.detail/3);n(t.target||t.srcTarget||t.srcElement).closest("."+r.wrapperClass).is(u.parent())&&s(i,!0);t.preventDefault&&!o&&t.preventDefault();o||(t.returnValue=!1)}}function s(n,t,i){o=!1;var s=n,h=u.outerHeight()-f.outerHeight();t&&(s=parseInt(f.css("top"))+n*parseInt(r.wheelStep)/100*f.outerHeight(),s=Math.min(Math.max(s,0),h),s=0<n?Math.ceil(s):Math.floor(s),f.css({top:s+"px"}));e=parseInt(f.css("top"))/(u.outerHeight()-f.outerHeight());s=e*(u[0].scrollHeight-u.outerHeight());i&&(s=n,n=s/u[0].scrollHeight*u.outerHeight(),n=Math.min(Math.max(n,0),h),f.css({top:n+"px"}));u.scrollTop(s);u.trigger("slimscrolling",~~s);b();c()}function w(){y=Math.max(u.outerHeight()/u[0].scrollHeight*u.outerHeight(),30);f.css({height:y+"px"});var n=y==u.outerHeight()?"none":"block";f.css({display:n})}function b(){w();clearTimeout(nt);e==~~e?(o=r.allowPageScroll,tt!=e&&u.trigger("slimscroll",0==~~e?"top":"bottom")):o=!1;tt=e;y>=u.outerHeight()?o=!0:(f.stop(!0,!0).fadeIn("fast"),r.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function c(){r.alwaysVisible||(nt=setTimeout(function(){r.disableFadeOut&&v||k||d||(f.fadeOut("slow"),h.fadeOut("slow"))},1e3))}var v,k,d,nt,g,y,e,tt,o=!1,u=n(this),a;if(u.parent().hasClass(r.wrapperClass)){var l=u.scrollTop(),f=u.closest("."+r.barClass),h=u.closest("."+r.railClass);if(w(),n.isPlainObject(i)){if("height"in i&&"auto"==i.height&&(u.parent().css("height","auto"),u.css("height","auto"),a=u.parent().parent().height(),u.parent().css("height",a),u.css("height",a)),"scrollTo"in i)l=parseInt(r.scrollTo);else if("scrollBy"in i)l+=parseInt(r.scrollBy);else if("destroy"in i){f.remove();h.remove();u.unwrap();return}s(l,!1,!0)}}else if(!(n.isPlainObject(i)&&"destroy"in i)){r.height="auto"==r.height?u.parent().height():r.height;l=n("<div><\/div>").addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});u.css({overflow:"hidden",width:r.width,height:r.height});var h=n("<div><\/div>").addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),f=n("<div><\/div>").addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),a="right"==r.position?{right:r.distance}:{left:r.distance};h.css(a);f.css(a);u.wrap(l);u.parent().append(f);u.parent().append(h);r.railDraggable&&f.bind("mousedown",function(i){var r=n(document);return d=!0,t=parseFloat(f.css("top")),pageY=i.pageY,r.bind("mousemove.slimscroll",function(n){currTop=t+n.pageY-pageY;f.css("top",currTop);s(0,f.position().top,!1)}),r.bind("mouseup.slimscroll",function(){d=!1;c();r.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(n){return n.stopPropagation(),n.preventDefault(),!1});h.hover(function(){b()},function(){c()});f.hover(function(){k=!0},function(){k=!1});u.hover(function(){v=!0;b();c()},function(){v=!1;c()});u.bind("touchstart",function(n){n.originalEvent.touches.length&&(g=n.originalEvent.touches[0].pageY)});u.bind("touchmove",function(n){o||n.originalEvent.preventDefault();n.originalEvent.touches.length&&(s((g-n.originalEvent.touches[0].pageY)/r.touchScrollStep,!0),g=n.originalEvent.touches[0].pageY)});w();"bottom"===r.start?(f.css({top:u.outerHeight()-f.outerHeight()}),s(0,!0)):"top"!==r.start&&(s(n(r.start).position().top,null,!0),r.alwaysVisible||f.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",p,!1),this.addEventListener("mousewheel",p,!1)):document.attachEvent("onmousewheel",p)}}),this}});n.fn.extend({slimscroll:n.fn.slimScroll})})(jQuery),function(n){n.gritter={};n.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3};n.gritter.add=function(n){try{return t.add(n||{})}catch(r){var i="Gritter Error: "+r;typeof console!="undefined"&&console.error?console.error(i,n):alert(i)}};n.gritter.remove=function(n,i){t.removeSpecific(n,i||{})};n.gritter.removeAll=function(n){t.stop(n||{})};var t={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification<\/a>',_tpl_title:'<span class="gritter-title">[[title]]<\/span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"><\/div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]<\/p><\/div><div style="clear:both"><\/div><\/div><div class="gritter-bottom"><\/div><\/div>',_tpl_wrap:'<div id="gritter-notice-wrapper"><\/div>',add:function(i){var r,e,c,l,u;if(typeof i=="string"&&(i={text:i}),i.text===null)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var f=i.title,a=i.text,o=i.image||"",s=i.sticky||!1,v=i.class_name||n.gritter.options.class_name,y=n.gritter.options.position,h=i.time||"";return(this._verifyWrapper(),this._item_count++,r=this._item_count,e=this._tpl_item,n(["before_open","after_open","before_close","after_close"]).each(function(u,f){t["_"+f+"_"+r]=n.isFunction(i[f])?i[f]:function(){}}),this._custom_timer=0,h&&(this._custom_timer=h),c=o!=""?'<img alt="image" src="'+o+'" class="gritter-image" />':"",l=o!=""?"gritter-with-image":"gritter-without-image",f=f?this._str_replace("[[title]]",f,this._tpl_title):"",e=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[f,a,this._tpl_close,c,this._item_count,l,v],e),this["_before_open_"+r]()===!1)?!1:(n("#gritter-notice-wrapper").addClass(y).append(e),u=n("#gritter-item-"+this._item_count),u.fadeIn(this.fade_in_speed,function(){t["_after_open_"+r](n(this))}),s||this._setFadeTimer(u,r),n(u).bind("mouseenter mouseleave",function(i){i.type=="mouseenter"?s||t._restoreItemIfFading(n(this),r):s||t._setFadeTimer(n(this),r);t._hoverState(n(this),i.type)}),n(u).find(".gritter-close").click(function(){return t.removeSpecific(r,{},null,!0),!1}),r)},_countRemoveWrapper:function(t,i,r){i.remove();this["_after_close_"+t](i,r);n(".gritter-item-wrapper").length==0&&n("#gritter-notice-wrapper").remove()},_fade:function(n,i,r,u){var r=r||{},e=typeof r.fade!="undefined"?r.fade:!0,o=r.speed||this.fade_out_speed,f=u;this["_before_close_"+i](n,f);u&&n.unbind("mouseenter mouseleave");e?n.animate({opacity:0},o,function(){n.animate({height:0},300,function(){t._countRemoveWrapper(i,n,f)})}):this._countRemoveWrapper(i,n)},_hoverState:function(n,t){t=="mouseenter"?(n.addClass("hover"),n.find(".gritter-close").show()):(n.removeClass("hover"),n.find(".gritter-close").hide())},removeSpecific:function(t,i,r,u){if(!r)var r=n("#gritter-item-"+t);this._fade(r,t,i||{},u)},_restoreItemIfFading:function(n,t){clearTimeout(this["_int_id_"+t]);n.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in n.gritter.options)this[opt]=n.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(n,i){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+i]=setTimeout(function(){t._fade(n,i)},r)},stop:function(t){var r=n.isFunction(t.before_close)?t.before_close:function(){},u=n.isFunction(t.after_close)?t.after_close:function(){},i=n("#gritter-notice-wrapper");r(i);i.fadeOut(function(){n(this).remove();u()})},_str_replace:function(n,t,i,r){var f=0,e=0,o="",c="",l=0,a=0,h=[].concat(n),s=[].concat(t),u=i,v=s instanceof Array,y=u instanceof Array;for(u=[].concat(u),r&&(this.window[r]=0),f=0,l=u.length;f<l;f++)if(u[f]!=="")for(e=0,a=h.length;e<a;e++)o=u[f]+"",c=v?s[e]!==undefined?s[e]:"":s[0],u[f]=o.split(h[e]).join(c),r&&u[f]!==o&&(this.window[r]+=(o.length-u[f].length)/h[e].length);return y?u:u[0]},_verifyWrapper:function(){n("#gritter-notice-wrapper").length==0&&n("body").append(this._tpl_wrap)}}}(jQuery);
/*! pace 1.0.2 */
(function(){var nt,ct,lt,at,vt,yt,pt,wt,a,n,bt,kt,tt,dt,gt,o,ni,r,v,y,it,s,p,ti,rt,ut,f,ii,u,t,w,ft,ri,h,et,b,i,e,ot,c,k,st,d,g,ui,fi,ht,hi,ei,l=[].slice,oi={}.hasOwnProperty,si=function(n,t){function r(){this.constructor=n}for(var i in t)oi.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},ci=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};for(it={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},u=function(){var n;return null!=(n="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?n:+new Date},w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==w&&(w=function(n){return setTimeout(n,50)},y=function(n){return clearTimeout(n)}),ri=function(n){var t,i;return t=u(),(i=function(){var r;return r=u()-t,r>=33?(t=u(),n(r,function(){return w(i)})):setTimeout(i,33-r)})()},ft=function(){var i,t,n;return n=arguments[0],t=arguments[1],i=3<=arguments.length?l.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,i):n[t]},s=function(){var n,t,r,f,i,u,e;for(t=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],u=0,e=f.length;e>u;u++)if(r=f[u])for(n in r)oi.call(r,n)&&(i=r[n],null!=t[n]&&"object"==typeof t[n]&&null!=i&&"object"==typeof i?s(t[n],i):t[n]=i);return t},ni=function(n){var i,r,u,t,f;for(r=i=0,t=0,f=n.length;f>t;t++)u=n[t],r+=Math.abs(u),i++;return r/i},ti=function(n,t){var i,r,u;if(null==n&&(n="options"),null==t&&(t=!0),u=document.querySelector("[data-pace-"+n+"]")){if(i=u.getAttribute("data-pace-"+n),!t)return i;try{return JSON.parse(i)}catch(f){return r=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},pt=function(){function n(){}return n.prototype.on=function(n,t,i,r){var u;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(u=this.bindings)[n]&&(u[n]=[]),this.bindings[n].push({handler:t,ctx:i,once:r})},n.prototype.once=function(n,t,i){return this.on(n,t,i,!0)},n.prototype.off=function(n,t){var i,u,r;if(null!=(null!=(u=this.bindings)?u[n]:void 0)){if(null==t)return delete this.bindings[n];for(i=0,r=[];i<this.bindings[n].length;)r.push(this.bindings[n][i].handler===t?this.bindings[n].splice(i,1):i++);return r}},n.prototype.trigger=function(){var f,r,n,e,t,o,s,i,u;if(n=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],null!=(s=this.bindings)?s[n]:void 0){for(t=0,u=[];t<this.bindings[n].length;)i=this.bindings[n][t],e=i.handler,r=i.ctx,o=i.once,e.apply(null!=r?r:this,f),u.push(o?this.bindings[n].splice(t,1):t++);return u}},n}(),n=window.Pace||{},window.Pace=n,s(n,pt.prototype),t=n.options=s({},it,window.paceOptions,ti()),ht=["ajax","document","eventLag","elements"],d=0,ui=ht.length;ui>d;d++)i=ht[d],t[i]===!0&&(t[i]=it[i]);a=function(n){function t(){return hi=t.__super__.constructor.apply(this,arguments)}return si(t,n),t}(Error);ct=function(){function n(){this.progress=0}return n.prototype.getElement=function(){var n;if(null==this.el){if(n=document.querySelector(t.target),!n)throw new a;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,"");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"><\/div>\n<\/div>\n<div class="pace-activity"><\/div>';null!=n.firstChild?n.insertBefore(this.el,n.firstChild):n.appendChild(this.el)}return this.el},n.prototype.finish=function(){var n;return n=this.getElement(),n.className=n.className.replace("pace-active",""),n.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+="pace-done"},n.prototype.update=function(n){return this.progress=n,this.render()},n.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(n){a=n}return this.el=void 0},n.prototype.render=function(){var n,f,i,e,r,o,u;if(null==document.querySelector(t.target))return!1;for(n=this.getElement(),e="translate3d("+this.progress+"%, 0, 0)",u=["webkitTransform","msTransform","transform"],r=0,o=u.length;o>r;r++)f=u[r],n.children[0].style[f]=e;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(n.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),n.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress},n.prototype.done=function(){return this.progress>=100},n}();wt=function(){function n(){this.bindings={}}return n.prototype.trigger=function(n,t){var f,i,e,r,u;if(null!=this.bindings[n]){for(r=this.bindings[n],u=[],i=0,e=r.length;e>i;i++)f=r[i],u.push(f.call(this,t));return u}},n.prototype.on=function(n,t){var i;return null==(i=this.bindings)[n]&&(i[n]=[]),this.bindings[n].push(t)},n}();st=window.XMLHttpRequest;k=window.XDomainRequest;c=window.WebSocket;p=function(n,t){var u,i,r=[];for(i in t.prototype)try{r.push(null==n[i]&&"function"!=typeof t[i]?"function"==typeof Object.defineProperty?Object.defineProperty(n,i,{get:function(){return t.prototype[i]},configurable:!0,enumerable:!0}):n[i]=t.prototype[i]:void 0)}catch(f){u=f}return r};f=[];n.ignore=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("ignore"),i=t.apply(null,n),f.shift(),i};n.track=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("track"),i=t.apply(null,n),f.shift(),i};b=function(n){var i;return(null==n&&(n="GET"),"track"===f[0])?"force":!f.length&&t.ajax&&("socket"===n&&t.ajax.trackWebSockets||(i=n.toUpperCase(),ci.call(t.ajax.trackMethods,i)>=0))?!0:!1};bt=function(n){function i(){var n,r=this;i.__super__.constructor.apply(this,arguments);n=function(n){var t;return t=n.open,n.open=function(i,u){return b(i)&&r.trigger("request",{type:i,url:u,request:n}),t.apply(n,arguments)}};window.XMLHttpRequest=function(t){var i;return i=new st(t),n(i),i};try{p(window.XMLHttpRequest,st)}catch(u){}if(null!=k){window.XDomainRequest=function(){var t;return t=new k,n(t),t};try{p(window.XDomainRequest,k)}catch(u){}}if(null!=c&&t.ajax.trackWebSockets){window.WebSocket=function(n,t){var i;return i=null!=t?new c(n,t):new c(n),b("socket")&&r.trigger("request",{type:"socket",url:n,protocols:t,request:i}),i};try{p(window.WebSocket,c)}catch(u){}}}return si(i,n),i}(wt);g=null;rt=function(){return null==g&&(g=new bt),g};et=function(n){var i,r,f,u;for(u=t.ajax.ignoreURLs,r=0,f=u.length;f>r;r++)if(i=u[r],"string"==typeof i){if(-1!==n.indexOf(i))return!0}else if(i.test(n))return!0;return!1};rt().on("request",function(r){var u,o,f,e,s;return e=r.type,f=r.request,s=r.url,et(s)?void 0:n.running||t.restartOnRequestAfter===!1&&"force"!==b(e)?void 0:(o=arguments,u=t.restartOnRequestAfter||0,"boolean"==typeof u&&(u=0),setTimeout(function(){var c,t,s,h,r,u;if(c="socket"===e?f.readyState<2:0<(h=f.readyState)&&4>h){for(n.restart(),r=n.sources,u=[],t=0,s=r.length;s>t;t++){if(i=r[t],i instanceof nt){i.watch.apply(i,o);break}u.push(void 0)}return u}},u))});nt=function(){function n(){var n=this;this.elements=[];rt().on("request",function(){return n.watch.apply(n,arguments)})}return n.prototype.watch=function(n){var t,i,r,u;return r=n.type,t=n.request,u=n.url,et(u)?void 0:(i="socket"===r?new dt(t):new gt(t),this.elements.push(i))},n}();gt=function(){function n(n){var f,o,i,e,r,u,t=this;if(this.progress=0,null!=window.ProgressEvent)for(o=null,n.addEventListener("progress",function(n){return t.progress=n.lengthComputable?100*n.loaded/n.total:t.progress+(100-t.progress)/2},!1),u=["load","abort","timeout","error"],i=0,e=u.length;e>i;i++)f=u[i],n.addEventListener(f,function(){return t.progress=100},!1);else r=n.onreadystatechange,n.onreadystatechange=function(){var i;return 0===(i=n.readyState)||4===i?t.progress=100:3===n.readyState&&(t.progress=50),"function"==typeof r?r.apply(null,arguments):void 0}}return n}();dt=function(){function n(n){var r,t,u,i,f=this;for(this.progress=0,i=["error","open"],t=0,u=i.length;u>t;t++)r=i[t],n.addEventListener(r,function(){return f.progress=100},!1)}return n}();at=function(){function n(n){var r,t,u,i;for(null==n&&(n={}),this.elements=[],null==n.selectors&&(n.selectors=[]),i=n.selectors,t=0,u=i.length;u>t;t++)r=i[t],this.elements.push(new vt(r))}return n}();vt=function(){function n(n){this.selector=n;this.progress=0;this.check()}return n.prototype.check=function(){var n=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return n.check()},t.elements.checkInterval)},n.prototype.done=function(){return this.progress=100},n}();lt=function(){function n(){var n,i,t=this;this.progress=null!=(i=this.states[document.readyState])?i:100;n=document.onreadystatechange;document.onreadystatechange=function(){return null!=t.states[document.readyState]&&(t.progress=t.states[document.readyState]),"function"==typeof n?n.apply(null,arguments):void 0}}return n.prototype.states={loading:0,interactive:50,complete:100},n}();yt=function(){function n(){var i,f,r,e,n,o=this;this.progress=0;i=0;n=[];e=0;r=u();f=setInterval(function(){var s;return s=u()-r-50,r=u(),n.push(s),n.length>t.eventLag.sampleCount&&n.shift(),i=ni(n),++e>=t.eventLag.minSamples&&i<t.eventLag.lagThreshold?(o.progress=100,clearInterval(f)):o.progress=300/(i+3)},50)}return n}();tt=function(){function n(n){this.source=n;this.last=this.sinceLastUpdate=0;this.rate=t.initialRate;this.catchup=0;this.progress=this.lastProgress=0;null!=this.source&&(this.progress=ft(this.source,"progress"))}return n.prototype.tick=function(n,i){var r;return null==i&&(i=ft(this.source,"progress")),i>=100&&(this.done=!0),i===this.last?this.sinceLastUpdate+=n:(this.sinceLastUpdate&&(this.rate=(i-this.last)/this.sinceLastUpdate),this.catchup=(i-this.progress)/t.catchupTime,this.sinceLastUpdate=0,this.last=i),i>this.progress&&(this.progress+=this.catchup*n),r=1-Math.pow(this.progress/100,t.easeFactor),this.progress+=r*this.rate*n,this.progress=Math.min(this.lastProgress+t.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},n}();e=null;h=null;r=null;ot=null;o=null;v=null;n.running=!1;ut=function(){if(t.restartOnPushState)return n.restart()};null!=window.history.pushState&&(fi=window.history.pushState,window.history.pushState=function(){return ut(),fi.apply(window.history,arguments)});null!=window.history.replaceState&&(ei=window.history.replaceState,window.history.replaceState=function(){return ut(),ei.apply(window.history,arguments)});kt={ajax:nt,elements:at,document:lt,eventLag:yt};(ii=function(){var u,f,o,l,a,s,v,c;for(n.sources=e=[],s=["ajax","elements","document","eventLag"],f=0,l=s.length;l>f;f++)u=s[f],t[u]!==!1&&e.push(new kt[u](t[u]));for(c=null!=(v=t.extraSources)?v:[],o=0,a=c.length;a>o;o++)i=c[o],e.push(new i(t));return n.bar=r=new ct,h=[],ot=new tt})();n.stop=function(){return n.trigger("stop"),n.running=!1,r.destroy(),v=!0,null!=o&&("function"==typeof y&&y(o),o=null),ii()};n.restart=function(){return n.trigger("restart"),n.stop(),n.start()};n.go=function(){var f;return n.running=!0,r.render(),f=u(),v=!1,o=ri(function(o,s){var nt,p,w,it,b,c,l,et,a,y,k,d,g,rt,ut,ft;for(et=100-r.progress,p=k=0,w=!0,c=d=0,rt=e.length;rt>d;c=++d)for(i=e[c],y=null!=h[c]?h[c]:h[c]=[],b=null!=(ft=i.elements)?ft:[i],l=g=0,ut=b.length;ut>g;l=++g)it=b[l],a=null!=y[l]?y[l]:y[l]=new tt(it),w&=a.done,a.done||(p++,k+=a.tick(o));return nt=k/p,r.update(ot.tick(o,nt)),r.done()||w||v?(r.update(100),n.trigger("done"),setTimeout(function(){return r.finish(),n.running=!1,n.trigger("hide")},Math.max(t.ghostTime,Math.max(t.minTime-(u()-f),0)))):s()})};n.start=function(i){s(t,i);n.running=!0;try{r.render()}catch(u){a=u}return document.querySelector(".pace")?(n.trigger("start"),n.go()):setTimeout(n.start,50)};"function"==typeof define&&define.amd?define(["pace"],function(){return n}):"object"==typeof exports?module.exports=n:t.startOnPageLoad&&n.start()}).call(this);!function(n,t,i){"use strict";!function r(n,t,i){function u(f,o){var h,c,s;if(!t[f]){if(!n[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=t[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,r,n,t,i)}return t[f].exports}for(var e="function"==typeof require&&require,f=0;f<i.length;f++)u(i[f]);return u}({1:[function(r){var a,c,e,s,l=function(n){return n&&n.__esModule?n:{"default":n}},u=r("./modules/handle-dom"),o=r("./modules/utils"),f=r("./modules/handle-swal-dom"),v=r("./modules/handle-click"),y=r("./modules/handle-key"),p=l(y),w=r("./modules/default-params"),h=l(w),b=r("./modules/set-params"),k=l(b);e=s=function(){function b(n){var t=e;return t[n]===i?h["default"][n]:t[n]}var e=arguments[0],r,l,s,tt,it;if(u.addClass(t.body,"stop-scrolling"),f.resetInput(),e===i)return o.logStr("SweetAlert expects at least 1 attribute!"),!1;r=o.extend({},h["default"]);switch(typeof e){case"string":r.title=e;r.text=arguments[1]||"";r.type=arguments[2]||"";break;case"object":if(e.title===i)return o.logStr('Missing "title" argument!'),!1;r.title=e.title;for(l in h["default"])r[l]=b(l);r.confirmButtonText=r.showCancelButton?"Confirm":h["default"].confirmButtonText;r.confirmButtonText=b("confirmButtonText");r.doneFunction=arguments[1]||null;break;default:return o.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof e),!1}k["default"](r);f.fixVerticalPosition();f.openModal(arguments[1]);for(var y=f.getModal(),d=y.querySelectorAll("button"),g=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],nt=function(n){return v.handleButton(n,r,y)},w=0;w<d.length;w++)for(s=0;s<g.length;s++)tt=g[s],d[w][tt]=nt;f.getOverlay().onclick=nt;a=n.onkeydown;it=function(n){return p["default"](n,r,y)};n.onkeydown=it;n.onfocus=function(){setTimeout(function(){c!==i&&(c.focus(),c=i)},0)}};e.setDefaults=s.setDefaults=function(n){if(!n)throw new Error("userParams is required");if("object"!=typeof n)throw new Error("userParams has to be a object");o.extend(h["default"],n)};e.close=s.close=function(){var r=f.getModal(),e,s,o;return u.fadeOut(f.getOverlay(),5),u.fadeOut(r,5),u.removeClass(r,"showSweetAlert"),u.addClass(r,"hideSweetAlert"),u.removeClass(r,"visible"),e=r.querySelector(".sa-icon.sa-success"),u.removeClass(e,"animate"),u.removeClass(e.querySelector(".sa-tip"),"animateSuccessTip"),u.removeClass(e.querySelector(".sa-long"),"animateSuccessLong"),s=r.querySelector(".sa-icon.sa-error"),u.removeClass(s,"animateErrorIcon"),u.removeClass(s.querySelector(".sa-x-mark"),"animateXMark"),o=r.querySelector(".sa-icon.sa-warning"),u.removeClass(o,"pulseWarning"),u.removeClass(o.querySelector(".sa-body"),"pulseWarningIns"),u.removeClass(o.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var n=r.getAttribute("data-custom-class");u.removeClass(r,n)},300),u.removeClass(t.body,"stop-scrolling"),n.onkeydown=a,n.previousActiveElement&&n.previousActiveElement.focus(),c=i,clearTimeout(r.timeout),!0};e.showInputError=s.showInputError=function(n){var t=f.getModal(),r=t.querySelector(".sa-input-error"),i;u.addClass(r,"show");i=t.querySelector(".sa-error-container");u.addClass(i,"show");i.querySelector("p").innerHTML=n;t.querySelector("input").focus()};e.resetInputError=s.resetInputError=function(n){var t,i,r;if(n&&13===n.keyCode)return!1;t=f.getModal();i=t.querySelector(".sa-input-error");u.removeClass(i,"show");r=t.querySelector(".sa-error-container");u.removeClass(r,"show")};"undefined"!=typeof n?n.sweetAlert=n.swal=e:o.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(n,t,i){Object.defineProperty(i,"__esModule",{value:!0});i["default"]={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:""};t.exports=i["default"]},{}],3:[function(t,i,r){Object.defineProperty(r,"__esModule",{value:!0});var f=t("./utils"),u=(t("./handle-swal-dom"),t("./handle-dom")),s=function(t,i,r){function h(n){l&&i.confirmButtonColor&&(s.style.backgroundColor=n)}var c,a,p,v=t||n.event,s=v.target||v.srcElement,l=-1!==s.className.indexOf("confirm"),nt=-1!==s.className.indexOf("sweet-overlay"),y=u.hasClass(r,"visible"),w=i.doneFunction&&"true"===r.getAttribute("data-has-done-function"),b,k,d,g;switch(l&&i.confirmButtonColor&&(c=i.confirmButtonColor,a=f.colorLuminance(c,-.04),p=f.colorLuminance(c,-.14)),v.type){case"mouseover":h(a);break;case"mouseout":h(c);break;case"mousedown":h(p);break;case"mouseup":h(a);break;case"focus":b=r.querySelector("button.confirm");k=r.querySelector("button.cancel");l?k.style.boxShadow="none":b.style.boxShadow="none";break;case"click":if(d=r===s,g=u.isDescendant(r,s),!d&&!g&&y&&!i.allowOutsideClick)break;l&&w&&y?e(r,i):w&&y||nt?o(r,i):u.isDescendant(r,s)&&"BUTTON"===s.tagName&&sweetAlert.close()}},e=function(n,t){var i=!0;u.hasClass(n,"show-input")&&(i=n.querySelector("input").value,i||(i=""));t.doneFunction(i);t.closeOnConfirm&&sweetAlert.close()},o=function(n,t){var i=String(t.doneFunction).replace(/\s/g,""),r="function("===i.substring(0,9)&&")"!==i.substring(9,10);r&&t.doneFunction(!1);t.closeOnCancel&&sweetAlert.close()};r["default"]={handleButton:s,handleConfirm:e,handleCancel:o};i.exports=r["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(i,r,u){Object.defineProperty(u,"__esModule",{value:!0});var f=function(n,t){return new RegExp(" "+t+" ").test(" "+n.className+" ")},s=function(n,t){f(n,t)||(n.className+=" "+t)},h=function(n,t){var i=" "+n.className.replace(/[\t\r\n]/g," ")+" ";if(f(n,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");n.className=i.replace(/^\s+|\s+$/g,"")}},c=function(n){var i=t.createElement("div");return i.appendChild(t.createTextNode(n)),i.innerHTML},e=function(n){n.style.opacity="";n.style.display="block"},l=function(n){if(n&&!n.length)return e(n);for(var t=0;t<n.length;++t)e(n[t])},o=function(n){n.style.opacity="";n.style.display="none"},a=function(n){if(n&&!n.length)return o(n);for(var t=0;t<n.length;++t)o(n[t])},v=function(n,t){for(var i=t.parentNode;null!==i;){if(i===n)return!0;i=i.parentNode}return!1},y=function(n){n.style.left="-9999px";n.style.display="block";var t,i=n.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(n).getPropertyValue("padding-top"),10):parseInt(n.currentStyle.padding),n.style.left="",n.style.display="none","-"+parseInt((i+t)/2)+"px"},p=function(n,t){if(+n.style.opacity<1){t=t||16;n.style.opacity=0;n.style.display="block";var i=+new Date,r=function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){n.style.opacity=+n.style.opacity+(new Date-i)/100;i=+new Date;+n.style.opacity<1&&setTimeout(r,t)});r()}n.style.display="block"},w=function(n,t){t=t||16;n.style.opacity=1;var i=+new Date,r=function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){n.style.opacity=+n.style.opacity-(new Date-i)/100;i=+new Date;+n.style.opacity>0?setTimeout(r,t):n.style.display="none"});r()},b=function(i){var u,r;"function"==typeof MouseEvent?(u=new MouseEvent("click",{view:n,bubbles:!1,cancelable:!0}),i.dispatchEvent(u)):t.createEvent?(r=t.createEvent("MouseEvents"),r.initEvent("click",!1,!1),i.dispatchEvent(r)):t.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick()},k=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):n.event&&n.event.hasOwnProperty("cancelBubble")&&(n.event.cancelBubble=!0)};u.hasClass=f;u.addClass=s;u.removeClass=h;u.escapeHtml=c;u._show=e;u.show=l;u._hide=o;u.hide=a;u.isDescendant=v;u.getTopMargin=y;u.fadeIn=p;u.fadeOut=w;u.fireClick=b;u.stopEventPropagation=k},{}],5:[function(t,r,u){Object.defineProperty(u,"__esModule",{value:!0});var f=t("./handle-dom"),e=t("./handle-swal-dom"),o=function(t,r,u){var s=t||n.event,l=s.keyCode||s.which,a=u.querySelector("button.confirm"),y=u.querySelector("button.cancel"),h=u.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(l)){for(var o=s.target||s.srcElement,c=-1,v=0;v<h.length;v++)if(o===h[v]){c=v;break}9===l?(o=-1===c?a:c===h.length-1?h[0]:h[c+1],f.stopEventPropagation(s),o.focus(),r.confirmButtonColor&&e.setFocusStyle(o,r.confirmButtonColor)):13===l?("INPUT"===o.tagName&&(o=a,a.focus()),o=-1===c?a:i):27===l&&r.allowEscapeKey===!0?(o=y,f.fireClick(o,s)):o=i}};u["default"]=o;r.exports=u["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(i,r,u){var s=function(n){return n&&n.__esModule?n:{"default":n}};Object.defineProperty(u,"__esModule",{value:!0});var v=i("./utils"),f=i("./handle-dom"),y=i("./default-params"),o=s(y),p=i("./injected-html"),w=s(p),b=".sweet-alert",k=".sweet-overlay",h=function(){var n=t.createElement("div");for(n.innerHTML=w["default"];n.firstChild;)t.body.appendChild(n.firstChild)},e=function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){var n=t.querySelector(b);return n||(h(),n=e()),n}),c=function(){var n=e();if(n)return n.querySelector("input")},l=function(){return t.querySelector(k)},d=function(n,t){var i=v.hexToRgb(t);n.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},g=function(i){var r=e(),s,u,o;f.fadeIn(l(),10);f.show(r);f.addClass(r,"showSweetAlert");f.removeClass(r,"hideSweetAlert");n.previousActiveElement=t.activeElement;s=r.querySelector("button.confirm");s.focus();setTimeout(function(){f.addClass(r,"visible")},500);u=r.getAttribute("data-timer");"null"!==u&&""!==u&&(o=i,r.timeout=setTimeout(function(){var n=(o||null)&&"true"===r.getAttribute("data-has-done-function");n?o(null):sweetAlert.close()},u))},nt=function(){var t=e(),n=c();f.removeClass(t,"show-input");n.value=o["default"].inputValue;n.setAttribute("type",o["default"].inputType);n.setAttribute("placeholder",o["default"].inputPlaceholder);a()},a=function(n){var t,i,r;if(n&&13===n.keyCode)return!1;t=e();i=t.querySelector(".sa-input-error");f.removeClass(i,"show");r=t.querySelector(".sa-error-container");f.removeClass(r,"show")},tt=function(){var n=e();n.style.marginTop=f.getTopMargin(e())};u.sweetAlertInitialize=h;u.getModal=e;u.getOverlay=l;u.getInput=c;u.setFocusStyle=d;u.openModal=g;u.resetInput=nt;u.resetInputError=a;u.fixVerticalPosition=tt},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(n,t,i){Object.defineProperty(i,"__esModule",{value:!0});i["default"]='<div class="sweet-overlay" tabIndex="-1"><\/div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"><\/span>\n        <span class="sa-line sa-right"><\/span>\n      <\/span>\n    <\/div><div class="sa-icon sa-warning">\n      <span class="sa-body"><\/span>\n      <span class="sa-dot"><\/span>\n    <\/div><div class="sa-icon sa-info"><\/div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"><\/span>\n      <span class="sa-line sa-long"><\/span>\n\n      <div class="sa-placeholder"><\/div>\n      <div class="sa-fix"><\/div>\n    <\/div><div class="sa-icon sa-custom"><\/div><h2>Title<\/h2>\n    <p>Text<\/p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"><\/div>\n    <\/fieldset><div class="sa-error-container">\n      <div class="icon">!<\/div>\n      <p>Not valid!<\/p>\n    <\/div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel<\/button>\n      <button class="confirm" tabIndex="1">OK<\/button>\n    <\/div><\/div>';t.exports=i["default"]},{}],8:[function(n,t,r){Object.defineProperty(r,"__esModule",{value:!0});var o=n("./utils"),f=n("./handle-swal-dom"),u=n("./handle-dom"),e=["error","warning","info","success","input","prompt"],s=function(n){var t=f.getModal(),d=t.querySelector("h2"),v=t.querySelector("p"),h=t.querySelector("button.cancel"),r=t.querySelector("button.confirm"),y,c,s,l,a,k;if((d.innerHTML=n.html?n.title:u.escapeHtml(n.title).split("\n").join("<br>"),v.innerHTML=n.html?n.text:u.escapeHtml(n.text||"").split("\n").join("<br>"),n.text&&u.show(v),n.customClass)?(u.addClass(t,n.customClass),t.setAttribute("data-custom-class",n.customClass)):(y=t.getAttribute("data-custom-class"),u.removeClass(t,y),t.setAttribute("data-custom-class","")),(u.hide(t.querySelectorAll(".sa-icon")),n.type&&!o.isIE8())&&(c=function(){for(var c,r,o,h=!1,s=0;s<e.length;s++)if(n.type===e[s]){h=!0;break}if(!h)return logStr("Unknown alert type: "+n.type),{v:!1};c=["success","error","warning","info"];r=i;-1!==c.indexOf(n.type)&&(r=t.querySelector(".sa-icon.sa-"+n.type),u.show(r));o=f.getInput();switch(n.type){case"success":u.addClass(r,"animate");u.addClass(r.querySelector(".sa-tip"),"animateSuccessTip");u.addClass(r.querySelector(".sa-long"),"animateSuccessLong");break;case"error":u.addClass(r,"animateErrorIcon");u.addClass(r.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":u.addClass(r,"pulseWarning");u.addClass(r.querySelector(".sa-body"),"pulseWarningIns");u.addClass(r.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":o.setAttribute("type",n.inputType);o.value=n.inputValue;o.setAttribute("placeholder",n.inputPlaceholder);u.addClass(t,"show-input");setTimeout(function(){o.focus();o.addEventListener("keyup",swal.resetInputError)},400)}}(),"object"==typeof c))return c.v;if(n.imageUrl){if(s=t.querySelector(".sa-icon.sa-custom"),s.style.backgroundImage="url("+n.imageUrl+")",u.show(s),l=80,a=80,n.imageSize){var p=n.imageSize.toString().split("x"),w=p[0],b=p[1];w&&b?(l=w,a=b):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+n.imageSize)}s.setAttribute("style",s.getAttribute("style")+"width:"+l+"px; height:"+a+"px")}t.setAttribute("data-has-cancel-button",n.showCancelButton);n.showCancelButton?h.style.display="inline-block":u.hide(h);t.setAttribute("data-has-confirm-button",n.showConfirmButton);n.showConfirmButton?r.style.display="inline-block":u.hide(r);n.cancelButtonText&&(h.innerHTML=u.escapeHtml(n.cancelButtonText));n.confirmButtonText&&(r.innerHTML=u.escapeHtml(n.confirmButtonText));n.confirmButtonColor&&(r.style.backgroundColor=n.confirmButtonColor,f.setFocusStyle(r,n.confirmButtonColor));t.setAttribute("data-allow-outside-click",n.allowOutsideClick);k=n.doneFunction?!0:!1;t.setAttribute("data-has-done-function",k);n.animation?"string"==typeof n.animation?t.setAttribute("data-animation",n.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none");t.setAttribute("data-timer",n.timer)};r["default"]=s;t.exports=r["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,i,r){Object.defineProperty(r,"__esModule",{value:!0});var u=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},f=function(n){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},e=function(){return n.attachEvent&&!n.addEventListener},o=function(t){n.console&&n.console.log("SweetAlert: "+t)},s=function(n,t){n=String(n).replace(/[^0-9a-f]/gi,"");n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]);t=t||0;for(var i,u="#",r=0;3>r;r++)i=parseInt(n.substr(2*r,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u};r.extend=u;r.hexToRgb=f;r.isIE8=e;r.logStr=o;r.colorLuminance=s},{}]},{},[1]);"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);$(document).ready(function(){function n(){var i=$("body > #wrapper").height()-61,n,t;$(".sidebard-panel").css("min-height",i+"px");n=$("nav.navbar-default").height();t=$("#page-wrapper").height();n>t&&$("#page-wrapper").css("min-height",n+"px");n<t&&$("#page-wrapper").css("min-height",$(window).height()+"px");$("body").hasClass("fixed-nav")&&(n>t?$("#page-wrapper").css("min-height",n-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small");$("#side-menu").metisMenu();$(".collapse-link").click(function(){var n=$(this).closest("div.ibox"),t=$(this).find("i"),i=n.find("div.ibox-content");i.slideToggle(200);t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down");n.toggleClass("").toggleClass("border-bottom");setTimeout(function(){n.resize();n.find("[id^=map-]").resize()},50)});$(".close-link").click(function(){var n=$(this).closest("div.ibox");n.remove()});$(".fullscreen-link").click(function(){var n=$(this).closest("div.ibox"),t=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode");t.toggleClass("fa-expand").toggleClass("fa-compress");n.toggleClass("fullscreen");setTimeout(function(){$(window).trigger("resize")},100)});$(".close-canvas-menu").click(function(){$("body").toggleClass("mini-navbar");SmoothlyMenu()});$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9});$(".right-sidebar-toggle").click(function(){$("#right-sidebar").toggleClass("sidebar-open")});$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10});$(".open-small-chat").click(function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove");$(".small-chat-box").toggleClass("active")});$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4});$(".check-link").click(function(){var n=$(this).find("i"),t=$(this).next("span");return n.toggleClass("fa-check-square").toggleClass("fa-square-o"),t.toggleClass("todo-completed"),!1});$(".navbar-minimalize").click(function(){$("body").toggleClass("mini-navbar");$(".navbar-static-top").toggle();$("#content-main").height(document.body.clientHeight-45);SmoothlyMenu()});$(".fss-show").click(function(){$("body").toggleClass("mini-navbar");$(".navbar-static-top").toggle();$("#content-main").height(document.body.clientHeight-105);SmoothlyMenu()});$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"});$(".modal").appendTo("body");n();$(window).bind("load",function(){$("body").hasClass("fixed-sidebar")&&$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})});$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")});$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||n()});$("[data-toggle=popover]").popover();$(".full-height-scroll").slimscroll({height:"100%"})});$(window).bind("resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")});$(document).ready(function(){if(localStorageSupport){var t=localStorage.getItem("collapse_menu"),i=localStorage.getItem("fixedsidebar"),r=localStorage.getItem("fixednavbar"),u=localStorage.getItem("boxedlayout"),f=localStorage.getItem("fixedfooter"),n=$("body");i=="on"&&(n.addClass("fixed-sidebar"),$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9}));t=="on"&&(n.hasClass("fixed-sidebar")?n.hasClass("body-small")||n.addClass("mini-navbar"):n.hasClass("body-small")||n.addClass("mini-navbar"));r=="on"&&($(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top"),n.addClass("fixed-nav"));u=="on"&&n.addClass("boxed-layout");f=="on"&&$(".footer").addClass("fixed")}});$(function(){function t(n){var t=0;return $(n).each(function(){t+=$(this).outerWidth(!0)}),t}function n(n){var f=t($(n).prevAll()),e=t($(n).nextAll()),o=t($(".content-tabs").children().not(".J_menuTabs")),r=$(".content-tabs").outerWidth(!0)-o,i=0,u;if($(".page-tabs-content").outerWidth()<r)i=0;else if(e<=r-$(n).outerWidth(!0)-$(n).next().outerWidth(!0)){if(r-$(n).next().outerWidth(!0)>e)for(i=f,u=n;i-$(u).outerWidth()>$(".page-tabs-content").outerWidth()-r;)i-=$(u).prev().outerWidth(),u=$(u).prev()}else f>r-$(n).outerWidth(!0)-$(n).prev().outerWidth(!0)&&(i=f-$(n).prev().outerWidth(!0));$(".page-tabs-content").animate({marginLeft:0-i+"px"},"fast")}function u(){var f=Math.abs(parseInt($(".page-tabs-content").css("margin-left"))),e=t($(".content-tabs").children().not(".J_menuTabs")),r=$(".content-tabs").outerWidth(!0)-e,u=0,n,i;if($(".page-tabs-content").width()<r)return!1;for(n=$(".J_menuTab:first"),i=0;i+$(n).outerWidth(!0)<=f;)i+=$(n).outerWidth(!0),n=$(n).next();if(i=0,t($(n).prevAll())>r){while(i+$(n).outerWidth(!0)<r&&n.length>0)i+=$(n).outerWidth(!0),n=$(n).prev();u=t($(n).prevAll())}$(".page-tabs-content").animate({marginLeft:0-u+"px"},"fast")}function f(){var f=Math.abs(parseInt($(".page-tabs-content").css("margin-left"))),e=t($(".content-tabs").children().not(".J_menuTabs")),u=$(".content-tabs").outerWidth(!0)-e,r=0,n,i;if($(".page-tabs-content").width()<u)return!1;for(n=$(".J_menuTab:first"),i=0;i+$(n).outerWidth(!0)<=f;)i+=$(n).outerWidth(!0),n=$(n).next();for(i=0;i+$(n).outerWidth(!0)<u&&n.length>0;)i+=$(n).outerWidth(!0),n=$(n).next();r=t($(n).prevAll());r>0&&$(".page-tabs-content").animate({marginLeft:0-r+"px"},"fast")}function e(){var t=$(this).attr("href"),f=$(this).data("index"),e=$.trim($(this).text()),i=!0,r,u;return t==undefined||$.trim(t).length==0?!1:($(".J_menuTab").each(function(){if($(this).data("id")==t)return $(this).hasClass("active")||($(this).addClass("active").siblings(".J_menuTab").removeClass("active"),n(this),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==t)return $(this).show().siblings(".J_iframe").hide(),!1})),i=!1,!1}),i&&(r='<a href="javascript:;" class="active J_menuTab" data-id="'+t+'">'+e+' <i class="fa fa-times-circle"><\/i><\/a>',$(".J_menuTab").removeClass("active"),u='<iframe class="J_iframe" name="iframe'+f+'" width="100%" height="100%" scrolling="auto" src="'+t+'" frameborder="0" data-id="'+t+'" seamless><\/iframe>',$(".J_mainContent").find("iframe.J_iframe").hide().parents(".J_mainContent").append(u),$(".J_menuTabs .page-tabs-content").append(r),n($(".J_menuTab.active"))),!1)}function o(){var i=window.parent.document,t=$(this).attr("href"),e=$(this).data("index"),o=$.trim($(this).text()),r=!0,u,f;return t==undefined||$.trim(t).length==0?!1:($(".J_menuTab",i).each(function(){if($(this).data("id")==t)return $(this).hasClass("active")||($(this).addClass("active").siblings(".J_menuTab").removeClass("active"),n(this),$(".J_mainContent .J_iframe",i).each(function(){if($(this).data("id")==t)return $(this).show().siblings(".J_iframe").hide(),!1})),r=!1,!1}),r&&(u='<a href="javascript:;" class="active J_menuTab" data-id="'+t+'">'+o+' <i class="fa fa-times-circle"><\/i><\/a>',$(".J_menuTab",i).removeClass("active"),f='<iframe class="J_iframe" name="iframe'+e+'" width="100%" height="100%" scrolling="auto" src="'+t+'" frameborder="0" data-id="'+t+'" seamless><\/iframe>',$(".J_mainContent",i).find("iframe.J_iframe").hide().parents(".J_mainContent").append(f),$(".J_menuTabs .page-tabs-content",i).append(u),n($(".J_menuTab.active",i))),!1)}function s(t){if(t.keyCode=="13"){return MessageShow("Sorry","搜索功能暂未开放，敬请期待","info"),!1;var i,r}}function h(){var i=$(this).parents(".J_menuTab").data("id"),u=$(this).parents(".J_menuTab").width(),r,t;return $(this).parents(".J_menuTab").hasClass("active")?($(this).parents(".J_menuTab").next(".J_menuTab").length&&(t=$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").data("id"),$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").addClass("active"),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==t)return $(this).show().siblings(".J_iframe").hide(),!1}),r=parseInt($(".page-tabs-content").css("margin-left")),r<0&&$(".page-tabs-content").animate({marginLeft:r+u+"px"},"fast"),$(this).parents(".J_menuTab").remove(),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1})),$(this).parents(".J_menuTab").prev(".J_menuTab").length&&(t=$(this).parents(".J_menuTab").prev(".J_menuTab:last").data("id"),$(this).parents(".J_menuTab").prev(".J_menuTab:last").addClass("active"),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==t)return $(this).show().siblings(".J_iframe").hide(),!1}),$(this).parents(".J_menuTab").remove(),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1}))):($(this).parents(".J_menuTab").remove(),$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==i)return $(this).remove(),!1}),n($(".J_menuTab.active"))),!1}function c(){$(".page-tabs-content").children("[data-id]").not(":first").not(".active").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").css("margin-left","0")}function l(){n($(".J_menuTab.active"))}function a(){if(!$(this).hasClass("active")){var t=$(this).data("id");$(".J_mainContent .J_iframe").each(function(){if($(this).data("id")==t)return $(this).show().siblings(".J_iframe").hide(),!1});$(this).addClass("active").siblings(".J_menuTab").removeClass("active");n(this)}}function v(){var n=$('.J_iframe[data-id="'+$(this).data("id")+'"]'),t=n.attr("src")}function r(){i>0&&(window.clearInterval(i),i=0);$("[rollplay='RollPlayEnd']").hide();$("[rollplay='RollPlay']").show()}function y(){$("[rollplay='RollPlayEnd']").show();$("[rollplay='RollPlay']").hide();var n=$(".J_menuTab.active").next();n.length===0&&(n=$(".J_menuTab:first"),n.length===0&&r());n.click()}$(".J_menuItem").each(function(n){$(this).attr("data-index")||$(this).attr("data-index",n)});$(".J_menuItem").on("click",e);$(".J_menuItem_Child").on("click",o);$("#top-search").on("keyup",s);$(".J_menuTabs").on("click",".J_menuTab i",h);$(".J_tabCloseOther").on("click",c);$(".J_tabShowActive").on("click",l);$(".J_menuTabs").on("click",".J_menuTab",a);$(".J_menuTabs").on("dblclick",".J_menuTab",v);$(".J_tabLeft").on("click",u);$(".J_tabRight").on("click",f);$(".J_tabCloseAll").on("click",function(){$(".page-tabs-content").children("[data-id]").not(":first").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').remove();$(this).remove()});$(".page-tabs-content").children("[data-id]:first").each(function(){$('.J_iframe[data-id="'+$(this).data("id")+'"]').show();$(this).addClass("active")});$(".page-tabs-content").css("margin-left","0")});var i=0;$("[rollplay='RollPlay']").on("click",function(){$("[rollplay='RollPlayEnd']").show();$("[rollplay='RollPlay']").hide();i=window.setInterval(y,5e3)});$("[rollplay='RollPlayEnd']").on("click",function(){r()})});
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.1-beta.4
 *
 * Copyright 2014 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){"use strict";var u=this,g=u.Chart,t=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};t.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}};t.types={};var n=t.helpers={},i=n.each=function(n,t,i){var f=Array.prototype.slice.call(arguments,3),r,u;if(n)if(n.length===+n.length)for(r=0;r<n.length;r++)t.apply(i,[n[r],r].concat(f));else for(u in n)t.apply(i,[n[u],u].concat(f))},l=n.clone=function(n){var t={};return i(n,function(i,r){n.hasOwnProperty(r)&&(t[r]=i)}),t},r=n.extend=function(n){return i(Array.prototype.slice.call(arguments,1),function(t){i(t,function(i,r){t.hasOwnProperty(r)&&(n[r]=i)})}),n},nt=n.merge=function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),r.apply(null,n)},tt=n.indexOf=function(n,t){if(Array.prototype.indexOf)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1},p=(n.where=function(t,i){var r=[];return n.each(t,function(n){i(n)&&r.push(n)}),r},n.findNextWhere=function(n,t,i){var r,u;for(i||(i=-1),r=i+1;r<n.length;r++)if(u=n[r],t(u))return u},n.findPreviousWhere=function(n,t,i){var r,u;for(i||(i=n.length),r=i-1;r>=0;r--)if(u=n[r],t(u))return u},n.inherits=function(n){var i=this,t=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return i.apply(this,arguments)},u=function(){this.constructor=t};return u.prototype=i.prototype,t.prototype=new u,t.extend=p,n&&r(t.prototype,n),t.__super__=i.prototype,t}),a=n.noop=function(){},it=n.uid=function(){var n=0;return function(){return"chart-"+n++}}(),rt=n.warn=function(n){window.console&&"function"==typeof window.console.warn&&console.warn(n)},ut=n.amd="function"==typeof u.define&&u.define.amd,f=n.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},c=n.max=function(n){return Math.max.apply(Math,n)},s=n.min=function(n){return Math.min.apply(Math,n)},w=(n.cap=function(n,t,i){if(f(t)){if(n>t)return t}else if(f(i)&&i>n)return i;return n},n.getDecimalPlaces=function(n){return n%1!=0&&f(n)?n.toString().split(".")[1].length:0}),v=n.radians=function(n){return n*(Math.PI/180)},b=(n.getAngleFromPoint=function(n,t){var i=t.x-n.x,r=t.y-n.y,f=Math.sqrt(i*i+r*r),u=2*Math.PI+Math.atan2(r,i);return 0>i&&0>r&&(u+=2*Math.PI),{angle:u,distance:f}},n.aliasPixel=function(n){return n%2==0?0:.5}),ft=(n.splineCurve=function(n,t,i,r){var u=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),f=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),e=r*u/(u+f),o=r*f/(u+f);return{inner:{x:t.x-e*(i.x-n.x),y:t.y-e*(i.y-n.y)},outer:{x:t.x+o*(i.x-n.x),y:t.y+o*(i.y-n.y)}}},n.calculateOrderOfMagnitude=function(n){return Math.floor(Math.log(n)/Math.LN10)}),e=(n.calculateScaleRange=function(n,t,i,r,u){var w=2,v=Math.floor(t/(1.5*i)),y=w>=v,h=c(n),l=s(n);h===l&&(h+=.5,l>=.5&&!r?l-=.5:h+=.5);for(var b=Math.abs(h-l),o=ft(b),k=Math.ceil(h/(1*Math.pow(10,o)))*Math.pow(10,o),p=r?0:Math.floor(l/(1*Math.pow(10,o)))*Math.pow(10,o),a=k-p,f=Math.pow(10,o),e=Math.round(a/f);(e>v||v>2*e)&&!y;)if(e>v)f*=2,e=Math.round(a/f),e%1!=0&&(y=!0);else if(u&&o>=0){if(f/2%1!=0)break;f/=2;e=Math.round(a/f)}else f/=2,e=Math.round(a/f);return y&&(e=w,f=a/e),{steps:e,stepValue:f,min:p,max:p+e*f}},n.template=function(n,t){function r(n,t){var r=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[n]=i[n];return t?r(t):r}if(n instanceof Function)return n(t);var i={};return r(n,t)}),h=(n.generateLabels=function(n,t,r,u){var f=new Array(t);return labelTemplateString&&i(f,function(t,i){f[i]=e(n,{value:r+u*(i+1)})}),f},n.easingEffects={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-1*n*(n-2)},easeInOutQuad:function(n){return(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1*((n=n/1-1)*n*n+1)},easeInOutCubic:function(n){return(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-1*((n=n/1-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},easeInQuint:function(n){return 1*(n/=1)*n*n*n*n},easeOutQuint:function(n){return 1*((n=n/1-1)*n*n*n*n+1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-1*Math.cos(n/1*(Math.PI/2))+1},easeOutSine:function(n){return 1*Math.sin(n/1*(Math.PI/2))},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n/1)-1)},easeInExpo:function(n){return 0===n?1:1*Math.pow(2,10*(n/1-1))},easeOutExpo:function(n){return 1===n?1:1*(-Math.pow(2,-10*n)+1)},easeInOutExpo:function(n){return 0===n?0:1===n?1:(n/=.5)<1?.5*Math.pow(2,10*(n-1)):.5*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-1*(Math.sqrt(1-(n/=1)*n)-1)},easeOutCirc:function(n){return 1*Math.sqrt(1-(n=n/1-1)*n)},easeInOutCirc:function(n){return(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:1==(n/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t)))},easeOutElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:1==(n/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*n)*Math.sin(2*(1*n-r)*Math.PI/t)+1)},easeInOutElastic:function(n){var r=1.70158,t=0,i=1;return 0===n?0:2==(n/=.5)?1:(t||(t=.3*1.5),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),1>n?-.5*i*Math.pow(2,10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t):i*Math.pow(2,-10*(n-=1))*Math.sin(2*(1*n-r)*Math.PI/t)*.5+1)},easeInBack:function(n){var t=1.70158;return 1*(n/=1)*n*((t+1)*n-t)},easeOutBack:function(n){var t=1.70158;return 1*((n=n/1-1)*n*((t+1)*n+t)+1)},easeInOutBack:function(n){var t=1.70158;return(n/=.5)<1?.5*n*n*(((t*=1.525)+1)*n-t):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:function(n){return 1-h.easeOutBounce(1-n)},easeOutBounce:function(n){return(n/=1)<1/2.75?7.5625*n*n:2/2.75>n?1*(7.5625*(n-=1.5/2.75)*n+.75):2.5/2.75>n?1*(7.5625*(n-=2.25/2.75)*n+.9375):1*(7.5625*(n-=2.625/2.75)*n+.984375)},easeInOutBounce:function(n){return.5>n?.5*h.easeInBounce(2*n):.5*h.easeOutBounce(2*n-1)+.5}}),k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}(),et=(n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){return window.clearTimeout(n,1e3/60)}}(),n.animationLoop=function(n,t,i,r,u,f){var e=0,s=h[i]||h.linear,o=function(){e++;var i=e/t,h=s(i);n.call(f,h,i,e);r.call(f,h,i);t>e?f.animationFrame=k(o):u.apply(f)};k(o)},n.getRelativePosition=function(n){var r,u,t=n.originalEvent||n,f=n.currentTarget||n.srcElement,i=f.getBoundingClientRect();return t.touches?(r=t.touches[0].clientX-i.left,u=t.touches[0].clientY-i.top):(r=t.clientX-i.left,u=t.clientY-i.top),{x:r,y:u}},n.addEvent=function(n,t,i){n.addEventListener?n.addEventListener(t,i):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}),ot=n.removeEvent=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=a},st=(n.bindEvents=function(n,t,r){n.events||(n.events={});i(t,function(t){n.events[t]=function(){r.apply(n,arguments)};et(n.chart.canvas,t,n.events[t])})},n.unbindEvents=function(n,t){i(t,function(t,i){ot(n.chart.canvas,i,t)})}),ht=n.getMaximumWidth=function(n){var t=n.parentNode;return t.clientWidth},ct=n.getMaximumHeight=function(n){var t=n.parentNode;return t.clientHeight},lt=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(n){var t=n.ctx,i=n.canvas.width,r=n.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),at=n.clear=function(n){n.ctx.clearRect(0,0,n.width,n.height)},o=n.fontString=function(n,t,i){return t+" "+n+"px "+i},y=n.longestText=function(n,t,r){n.font=t;var u=0;return i(r,function(t){var i=n.measureText(t).width;u=i>u?i:u}),u},d=n.drawRoundedRectangle=function(n,t,i,r,u,f){n.beginPath();n.moveTo(t+f,i);n.lineTo(t+r-f,i);n.quadraticCurveTo(t+r,i,t+r,i+f);n.lineTo(t+r,i+u-f);n.quadraticCurveTo(t+r,i+u,t+r-f,i+u);n.lineTo(t+f,i+u);n.quadraticCurveTo(t,i+u,t,i+u-f);n.lineTo(t,i+f);n.quadraticCurveTo(t,i,t+f,i);n.closePath()};t.instances={};t.Type=function(n,i,r){this.options=i;this.chart=r;this.id=it();t.instances[this.id]=this;i.responsive&&this.resize();this.initialize.call(this,n)};r(t.Type.prototype,{initialize:function(){return this},clear:function(){return at(this.chart),this},stop:function(){return n.cancelAnimFrame.call(u,this.animationFrame),this},resize:function(n){this.stop();var t=this.chart.canvas,i=ht(this.chart.canvas),r=this.options.maintainAspectRatio?i/this.chart.aspectRatio:ct(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=r,lt(this.chart),"function"==typeof n&&n.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:a,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return e(this.options.legendTemplate,this)},destroy:function(){this.clear();st(this,this.events);delete t.instances[this.id]},showTooltip:function(r,u){var h,l,f,o;if("undefined"==typeof this.activeElements&&(this.activeElements=[]),h=function(n){var t=!1;return n.length!==this.activeElements.length?t=!0:(i(n,function(n,i){n!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,r),h||u){if(this.activeElements=r,this.draw(),r.length>0)if(this.datasets&&this.datasets.length>1){for(o=this.datasets.length-1;o>=0&&(l=this.datasets[o].points||this.datasets[o].bars||this.datasets[o].segments,f=tt(l,r[0]),-1===f);o--);var a=[],v=[],y=function(){var t,e,o,i,h,l=[],r=[],u=[];return n.each(this.datasets,function(n){t=n.points||n.bars||n.segments;t[f]&&t[f].hasValue()&&l.push(t[f])}),n.each(l,function(t){r.push(t.x);u.push(t.y);a.push(n.template(this.options.multiTooltipTemplate,t));v.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),h=s(u),o=c(u),i=s(r),e=c(r),{x:i>this.chart.width/2?i:e,y:(h+o)/2}}.call(this,f);new t.MultiTooltip({x:y.x,y:y.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:a,legendColors:v,legendColorBackground:this.options.multiTooltipKeyBackground,title:r[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else i(r,function(n){var i=n.tooltipPosition();new t.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:e(this.options.tooltipTemplate,n),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});t.Type.extend=function(n){var i=this,u=function(){return i.apply(this,arguments)},f,e;return(u.prototype=l(i.prototype),r(u.prototype,n),u.extend=t.Type.extend,n.name||i.prototype.name)?(f=n.name||i.prototype.name,e=t.defaults[i.prototype.name]?l(t.defaults[i.prototype.name]):{},t.defaults[f]=r(e,n.defaults),t.types[f]=u,t.prototype[f]=function(n,i){var r=nt(t.defaults.global,t.defaults[f],i||{});return new u(n,r,this)}):rt("Name not provided for this chart, so it hasn't been registered"),i};t.Element=function(n){r(this,n);this.initialize.apply(this,arguments);this.save()};r(t.Element.prototype,{initialize:function(){},restore:function(n){return n?i(n,function(n){this[n]=this._saved[n]},this):r(this,this._saved),this},save:function(){return this._saved=l(this),delete this._saved._saved,this},update:function(n){return i(n,function(n,t){this._saved[t]=this[t];this[t]=n},this),this},transition:function(n,t){return i(n,function(n,i){this[i]=(n-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}});t.Element.extend=p;t.Point=t.Element.extend({display:!0,inRange:function(n,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(n-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var n=this.ctx;n.beginPath();n.arc(this.x,this.y,this.radius,0,2*Math.PI);n.closePath();n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.fillStyle=this.fillColor;n.fill();n.stroke()}}});t.Arc=t.Element.extend({inRange:function(t,i){var r=n.getAngleFromPoint(this,{x:t,y:i}),u=r.angle>=this.startAngle&&r.angle<=this.endAngle,f=r.distance>=this.innerRadius&&r.distance<=this.outerRadius;return u&&f},tooltipPosition:function(){var n=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(n)*t,y:this.y+Math.sin(n)*t}},draw:function(){var n=this.ctx;n.beginPath();n.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);n.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);n.closePath();n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.fillStyle=this.fillColor;n.fill();n.lineJoin="bevel";this.showStroke&&n.stroke()}});t.Rectangle=t.Element.extend({draw:function(){var n=this.ctx,f=this.width/2,t=this.x-f,i=this.x+f,r=this.base-(this.base-this.y),u=this.strokeWidth/2;this.showStroke&&(t+=u,i-=u,r+=u);n.beginPath();n.fillStyle=this.fillColor;n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.moveTo(t,this.base);n.lineTo(t,r);n.lineTo(i,r);n.lineTo(i,this.base);n.fill();this.showStroke&&n.stroke()},height:function(){return this.base-this.y},inRange:function(n,t){return n>=this.x-this.width/2&&n<=this.x+this.width/2&&t>=this.y&&t<=this.base}});t.Tooltip=t.Element.extend({draw:function(){var n=this.chart.ctx,r,u;n.font=o(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var t=2,i=n.measureText(this.text).width+2*this.xPadding,f=this.fontSize+2*this.yPadding,e=f+this.caretHeight+t;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right");this.y-e<0&&(this.yAlign="below");r=this.x-i/2;u=this.y-e;switch(n.fillStyle=this.fillColor,this.yAlign){case"above":n.beginPath();n.moveTo(this.x,this.y-t);n.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight));n.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight));n.closePath();n.fill();break;case"below":u=this.y+t+this.caretHeight;n.beginPath();n.moveTo(this.x,this.y+t);n.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight);n.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight);n.closePath();n.fill()}switch(this.xAlign){case"left":r=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}d(n,r,u,i,f,this.cornerRadius);n.fill();n.fillStyle=this.textColor;n.textAlign="center";n.textBaseline="middle";n.fillText(this.text,r+i/2,u+f/2)}});t.MultiTooltip=t.Element.extend({initialize:function(){var n;this.font=o(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=o(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=y(this.ctx,this.font,this.labels)+this.fontSize+3,r=c([i,t]);this.width=r+2*this.xPadding;n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(n){var t=this.y-this.height/2+this.yPadding,i=n-1;return 0===n?t+this.titleFontSize/2:t+(1.5*this.fontSize*i+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){d(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor;t.fill();t.closePath();t.textAlign="left";t.textBaseline="middle";t.fillStyle=this.titleTextColor;t.font=this.titleFont;t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));t.font=this.font;n.each(this.labels,function(n,i){t.fillStyle=this.textColor;t.fillText(n,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1));t.fillStyle=this.legendColorBackground;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize);t.fillStyle=this.legendColors[i].fill;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}});t.Scale=t.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(e(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?y(this.ctx,this.font,this.yLabels):0},addXLabel:function(n){this.xLabels.push(n);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var t,n=this.endPoint-this.startPoint;for(this.calculateYRange(n),this.buildYLabels(),this.calculateXLabelRotation();n>this.endPoint-this.startPoint;)n=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(n),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var r,e,n,u,t,i,f;if(this.ctx.font=this.font,n=this.ctx.measureText(this.xLabels[0]).width,u=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=u/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(i=y(this.ctx,this.font,this.xLabels),this.xLabelWidth=i,f=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>f&&0===this.xLabelRotation||this.xLabelWidth>f&&this.xLabelRotation<=90&&this.xLabelRotation>0;)t=Math.cos(v(this.xLabelRotation)),r=t*n,e=t*u,r+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=r+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=t*i;this.xLabelRotation>0&&(this.endPoint-=Math.sin(v(this.xLabelRotation))*i+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:a,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(n){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(n-this.min)},calculateX:function(n){var r=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),t=r/(this.valuesCount-(this.offsetGridLines?0:1)),i=t*n+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=t/2),Math.round(i)},update:function(t){n.extend(this,t);this.fit()},draw:function(){var t=this.ctx,u=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,i(this.yLabels,function(i,f){var o=this.endPoint-u*f,e=Math.round(o);t.textAlign="right";t.textBaseline="middle";this.showLabels&&t.fillText(i,r-10,o);t.beginPath();f>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);e+=n.aliasPixel(t.lineWidth);t.moveTo(r,e);t.lineTo(this.width,e);t.stroke();t.closePath();t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r-5,e);t.lineTo(r,e);t.stroke();t.closePath()},this),i(this.xLabels,function(n,i){var f=this.calculateX(i)+b(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),u=this.xLabelRotation>0;t.beginPath();i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);t.moveTo(r,this.endPoint);t.lineTo(r,this.startPoint-3);t.stroke();t.closePath();t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r,this.endPoint);t.lineTo(r,this.endPoint+5);t.stroke();t.closePath();t.save();t.translate(f,u?this.endPoint+12:this.endPoint+8);t.rotate(-1*v(this.xLabelRotation));t.font=this.font;t.textAlign=u?"right":"center";t.textBaseline=u?"middle":"top";t.fillText(n,0,0);t.restore()},this))}});t.RadialScale=t.Element.extend({initialize:function(){this.size=s([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(n){var t=this.drawingArea/(this.max-this.min);return(n-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(e(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,n,i,h,a,y,v,p,w,b,r,u,k=s([this.height/2-this.pointLabelFontSize-5,this.width/2]),c=this.width,l=0;for(this.ctx.font=o(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),n=0;n<this.valuesCount;n++)t=this.getPointPosition(n,k),i=this.ctx.measureText(e(this.templateString,{value:this.labels[n]})).width+5,0===n||n===this.valuesCount/2?(h=i/2,t.x+h>c&&(c=t.x+h,a=n),t.x-h<l&&(l=t.x-h,v=n)):n<this.valuesCount/2?t.x+i>c&&(c=t.x+i,a=n):n>this.valuesCount/2&&t.x-i<l&&(l=t.x-i,v=n);w=l;b=Math.ceil(c-this.width);y=this.getIndexAngle(a);p=this.getIndexAngle(v);r=b/Math.sin(y+Math.PI/2);u=w/Math.sin(p+Math.PI/2);r=f(r)?r:0;u=f(u)?u:0;this.drawingArea=k-(u+r)/2;this.setCenterPoint(u,r)},setCenterPoint:function(n,t){var i=this.width-t-this.drawingArea,r=n+this.drawingArea;this.xCenter=(r+i)/2;this.yCenter=this.height/2},getIndexAngle:function(n){var t=2*Math.PI/this.valuesCount;return n*t-Math.PI/2},getPointPosition:function(n,t){var i=this.getIndexAngle(n);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){var n,t,u,f;if(this.display&&(n=this.ctx,i(this.yLabels,function(t,i){var r,f,e,u,s;if(i>0){if(f=i*(this.drawingArea/this.steps),e=this.yCenter-f,this.lineWidth>0)if(n.strokeStyle=this.lineColor,n.lineWidth=this.lineWidth,this.lineArc)n.beginPath(),n.arc(this.xCenter,this.yCenter,f,0,2*Math.PI),n.closePath(),n.stroke();else{for(n.beginPath(),u=0;u<this.valuesCount;u++)r=this.getPointPosition(u,this.calculateCenterOffset(this.min+i*this.stepValue)),0===u?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);n.closePath();n.stroke()}this.showLabels&&((n.font=o(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)&&(s=n.measureText(t).width,n.fillStyle=this.backdropColor,n.fillRect(this.xCenter-s/2-this.backdropPaddingX,e-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.fontColor,n.fillText(t,this.xCenter,e))}},this),!this.lineArc))for(n.lineWidth=this.angleLineWidth,n.strokeStyle=this.angleLineColor,t=this.valuesCount-1;t>=0;t--){this.angleLineWidth>0&&(u=this.getPointPosition(t,this.calculateCenterOffset(this.max)),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(u.x,u.y),n.stroke(),n.closePath());f=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);n.font=o(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);n.fillStyle=this.pointLabelFontColor;var s=this.labels.length,e=this.labels.length/2,r=e/2,h=r>t||t>s-r,c=t===r||t===s-r;n.textAlign=0===t?"center":t===e?"center":e>t?"left":"right";n.textBaseline=c?"middle":h?"bottom":"top";n.fillText(this.labels[t],f.x,f.y)}}});n.addEvent(window,"resize",function(){var n;return function(){clearTimeout(n);n=setTimeout(function(){i(t.instances,function(n){n.options.responsive&&n.resize(n.render,!0)})},50)}}());ut?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t);u.Chart=t;t.noConflict=function(){return u.Chart=g,t}}).call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(n,t,i){var f=this.calculateBaseWidth(),e=this.calculateX(i)-f/2,u=this.calculateBarWidth(n);return e+u*t+t*r.barDatasetSpacing+u/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(n){var t=this.calculateBaseWidth()-(n-1)*r.barDatasetSpacing;return t/n}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.bars.push(new this.BarClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this);this.buildScale(i.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(t,i,r){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,i),y:this.scale.endPoint});t.save()},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachBars(function(n){n.save()});this.render()},eachBars:function(t){n.each(this.datasets,function(i,r){n.each(i.bars,t,this,r)},this)},getBarsAtEvent:function(t){for(var i,u=[],f=n.getRelativePosition(t),e=function(n){u.push(n.bars[i])},r=0;r<this.datasets.length;r++)for(i=0;i<this.datasets[r].bars.length;i++)if(this.datasets[r].bars[i].inRange(f.x,f.y))return n.each(this.datasets,e),u;return u},buildScale:function(t){var r=this,u=function(){var n=[];return r.eachBars(function(t){n.push(t.value)}),n},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(u(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(i)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].bars.push(new this.BarClass({value:n,label:i,x:this.scale.calculateBarX(this.datasets.length,t,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[t].strokeColor,fillColor:this.datasets[t].fillColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.bars.shift()},this);this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();this.chart.ctx;this.scale.draw(i);n.each(this.datasets,function(t,r){n.each(t.bars,function(n,t){n.hasValue()&&(n.base=this.scale.endPoint,n.transition({x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.calculateY(n.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var r=this,t=r.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(i){this.segments=[];this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.calculateTotal(i);n.each(i,function(n,t){this.addData(n,t,!0)},this);this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:n.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:n.color,highlightColor:n.highlight||n.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(n.value),label:n.label}));i||(this.reflow(),this.update())},calculateCircumference:function(n){return 2*Math.PI*(n/this.total)},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=n.value},this)},update:function(){this.calculateTotal(this.segments);n.each(this.activeElements,function(n){n.restore(["fillColor"])});n.each(this.segments,function(n){n.save()});this.render()},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;n.each(this.segments,function(n){n.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.calculateCircumference(n.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i);n.endAngle=n.startAngle+n.circumference;n.draw();0===t&&(n.startAngle=1.5*Math.PI);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle)},this)}});t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(n){return Math.pow(n-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this);this.buildScale(i.labels);this.eachPoints(function(t,i){n.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint});t.save()},this)},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachPoints(function(n){n.save()});this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(n){n.inRange(r.x,r.y)&&i.push(n)})},this),i},buildScale:function(i){var u=this,f=function(){var n=[];return u.eachPoints(function(t){n.push(t.value)}),n},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:i.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(f(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:i,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new t.Scale(r)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.points.shift()},this);this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var u=t||1;this.clear();var i=this.chart.ctx,r=function(n){return null!==n.value},e=function(t,i,u){return n.findNextWhere(i,r,u)||t},f=function(t,i,u){return n.findPreviousWhere(i,r,u)||t};this.scale.draw(u);n.each(this.datasets,function(t){var o=n.where(t.points,r);n.each(t.points,function(n,t){n.hasValue()&&n.transition({y:this.scale.calculateY(n.value),x:this.scale.calculateX(t)},u)},this);this.options.bezierCurve&&n.each(o,function(t,i){var r=i>0&&i<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(f(t,o,i),t,e(t,o,i),r);t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint);t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(o,function(n,t){if(0===t)i.moveTo(n.x,n.y);else if(this.options.bezierCurve){var r=f(n,o,t);i.bezierCurveTo(r.controlPoints.outer.x,r.controlPoints.outer.y,n.controlPoints.inner.x,n.controlPoints.inner.y,n.x,n.y)}else i.lineTo(n.x,n.y)},this);i.stroke();this.options.datasetFill&&o.length>0&&(i.lineTo(o[o.length-1].x,this.scale.endPoint),i.lineTo(o[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill());n.each(o,function(n){n.draw()})},this)}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.segments=[];this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:i.length});this.updateScaleRange(i);this.scale.update();n.each(i,function(n,t){this.addData(n,t,!0)},this);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:n.color,highlightColor:n.highlight||n.color,label:n.label,value:n.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(n.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));i||(this.reflow(),this.update())},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=n.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[],r;n.each(t,function(n){i.push(n.value)});r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);n.each(this.segments,function(n){n.save()});this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);this.scale.update();n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});n.each(this.segments,function(n){n.update({outerRadius:this.scale.calculateCenterOffset(n.value)})},this)},draw:function(t){var i=t||1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(n.value)},i);n.endAngle=n.startAngle+n.circumference;0===t&&(n.startAngle=1.5*Math.PI);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle);n.draw()},this);this.scale.draw()}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(i);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){var f;this.scale.animation||(f=this.scale.getPointPosition(u,this.scale.calculateCenterOffset(n)));r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var f=n.getRelativePosition(t),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},f),e=2*Math.PI/this.scale.valuesCount,i=Math.round((r.angle-1.5*Math.PI)/e),u=[];return(i>=this.scale.valuesCount||0>i)&&(i=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(n){u.push(n.points[i])}),u},buildScale:function(n){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:n.labels,valuesCount:n.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(n.datasets);this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return n.each(t,function(t){t.data?i=i.concat(t.data):n.each(t.points,function(n){i.push(n.value)})}),i}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(t,i){this.scale.valuesCount++;n.each(t,function(n,t){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(n));this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:r.x,y:r.y,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.labels.push(i);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();n.each(this.datasets,function(n){n.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(n){n.save()});this.reflow();this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(t){var r=t||1,i=this.chart.ctx;this.clear();this.scale.draw();n.each(this.datasets,function(t){n.each(t.points,function(n,t){n.hasValue()&&n.transition(this.scale.getPointPosition(t,this.scale.calculateCenterOffset(n.value)),r)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(t.points,function(n,t){0===t?i.moveTo(n.x,n.y):i.lineTo(n.x,n.y)},this);i.closePath();i.stroke();i.fillStyle=t.fillColor;i.fill();n.each(t.points,function(n){n.hasValue()&&n.draw()})},this)}})}.call(this),function(n,t,i){(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.sparkline&&n(jQuery)})(function(r){"use strict";var c={},tt,u,e,s,l,o,v,it,rt,y,pt,ut,ft,et,h,ot,st,a,p,ht,ct,lt,w,b,k,at,vt,yt,d,g,nt,f,wt=0;tt=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new e("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new e("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new e('<span style="color: {{color}}">&#9679;<\/span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new e("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};at='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}';u=function(){var n,t;return n=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(n.prototype=r.extend(new arguments[0],arguments[arguments.length-1]),n._super=arguments[0].prototype):n.prototype=arguments[arguments.length-1],arguments.length>2&&(t=Array.prototype.slice.call(arguments,1,-1),t.unshift(n.prototype),r.extend.apply(r,t))):n.prototype=arguments[0],n.prototype.cls=n,n};r.SPFormatClass=e=u({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(n,t){this.format=n;this.fclass=t},render:function(n,t,r){var h=this,c=n,e,o,f,u,s;return this.format.replace(this.fre,function(){var n;return o=arguments[1],f=arguments[3],e=h.precre.exec(o),e?(s=e[2],o=e[1]):s=!1,u=c[o],u===i?"":f&&t&&t[f]?(n=t[f],n.get?t[f].get(u)||u:t[f][u]||u):(rt(u)&&(u=r.get("numberFormatter")?r.get("numberFormatter")(u):et(u,s,r.get("numberDigitGroupCount"),r.get("numberDigitGroupSep"),r.get("numberDecimalMark"))),u)})}});r.spformat=function(n,t){return new e(n,t)};s=function(n,t,i){return n<t?t:n>i?i:n};l=function(n,i){var r;return i===2?(r=t.floor(n.length/2),n.length%2?n[r]:(n[r-1]+n[r])/2):n.length%2?(r=(n.length*i+i)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1]):(r=(n.length*i+2)/4,r%1?(n[t.floor(r)]+n[t.floor(r)-1])/2:n[r-1])};o=function(n){var t;switch(n){case"undefined":n=i;break;case"null":n=null;break;case"true":n=!0;break;case"false":n=!1;break;default:t=parseFloat(n);n==t&&(n=t)}return n};v=function(n){for(var i=[],t=n.length;t--;)i[t]=o(n[t]);return i};it=function(n,t){for(var u=[],i=0,r=n.length;i<r;i++)n[i]!==t&&u.push(n[i]);return u};rt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};et=function(n,t,i,u,f){var e,o;for(n=(t===!1?parseFloat(n).toString():n.toFixed(t)).split(""),e=(e=r.inArray(".",n))<0?n.length:e,e<n.length&&(n[e]=f),o=e-i;o>0;o-=i)n.splice(o,0,u);return n.join("")};y=function(n,t,i){for(var r=t.length;r--;)if((!i||t[r]!==null)&&t[r]!==n)return!1;return!0};pt=function(n){for(var i=0,t=n.length;t--;)i+=typeof n[t]=="number"?n[t]:0;return i};ft=function(n){return r.isArray(n)?n:[n]};ut=function(t){var i;n.createStyleSheet?n.createStyleSheet().cssText=t:(i=n.createElement("style"),i.type="text/css",n.getElementsByTagName("head")[0].appendChild(i),i[typeof n.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t)};r.fn.simpledraw=function(t,u,f,e){var o,s,h;if(f&&(o=this.data("_jqs_vcanvas")))return o;if(r.fn.sparkline.canvas===!1)return!1;if(r.fn.sparkline.canvas===i)if(h=n.createElement("canvas"),h.getContext&&h.getContext("2d"))r.fn.sparkline.canvas=function(n,t,i,r){return new g(n,t,i,r)};else{if(!n.namespaces||!!n.namespaces.v)return r.fn.sparkline.canvas=!1,!1;n.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");r.fn.sparkline.canvas=function(n,t,i){return new nt(n,t,i)}}return t===i&&(t=r(this).innerWidth()),u===i&&(u=r(this).innerHeight()),o=r.fn.sparkline.canvas(t,u,this,e),s=r(this).data("_jqs_mhandler"),s&&s.registerCanvas(o),o};r.fn.cleardraw=function(){var n=this.data("_jqs_vcanvas");n&&n.reset()};r.RangeMapClass=h=u({init:function(n){var i,t,r=[];for(i in n)n.hasOwnProperty(i)&&typeof i=="string"&&i.indexOf(":")>-1&&(t=i.split(":"),t[0]=t[0].length===0?-Infinity:parseFloat(t[0]),t[1]=t[1].length===0?Infinity:parseFloat(t[1]),t[2]=n[i],r.push(t));this.map=n;this.rangelist=r||!1},get:function(n){var r=this.rangelist,u,t,f;if((f=this.map[n])!==i)return f;if(r)for(u=r.length;u--;)if(t=r[u],t[0]<=n&&t[1]>=n)return t[2];return i}});r.range_map=function(n){return new h(n)};ot=u({init:function(n,t){var i=r(n);this.$el=i;this.options=t;this.currentPageX=0;this.currentPageY=0;this.el=n;this.splist=[];this.tooltip=null;this.over=!1;this.displayTooltips=!t.get("disableTooltips");this.highlightEnabled=!t.get("disableHighlight")},registerSparkline:function(n){this.splist.push(n);this.over&&this.updateDisplay()},registerCanvas:function(n){var t=r(n.canvas);this.canvas=n;this.$canvas=t;t.mouseenter(r.proxy(this.mouseenter,this));t.mouseleave(r.proxy(this.mouseleave,this));t.click(r.proxy(this.mouseclick,this))},reset:function(n){this.splist=[];this.tooltip&&n&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(n){var t=r.Event("sparklineClick");t.originalEvent=n;t.sparklines=this.splist;this.$el.trigger(t)},mouseenter:function(t){r(n.body).unbind("mousemove.jqs");r(n.body).bind("mousemove.jqs",r.proxy(this.mousemove,this));this.over=!0;this.currentPageX=t.pageX;this.currentPageY=t.pageY;this.currentEl=t.target;!this.tooltip&&this.displayTooltips&&(this.tooltip=new st(this.options),this.tooltip.updatePosition(t.pageX,t.pageY));this.updateDisplay()},mouseleave:function(){r(n.body).unbind("mousemove.jqs");var i=this.splist,e=i.length,u=!1,f,t;for(this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null),t=0;t<e;t++)f=i[t],f.clearRegionHighlight()&&(u=!0);u&&this.canvas.render()},mousemove:function(n){this.currentPageX=n.pageX;this.currentPageY=n.pageY;this.currentEl=n.target;this.tooltip&&this.tooltip.updatePosition(n.pageX,n.pageY);this.updateDisplay()},updateDisplay:function(){var i=this.splist,o=i.length,s=!1,h=this.$canvas.offset(),c=this.currentPageX-h.left,l=this.currentPageY-h.top,u,t,n,f,e;if(this.over){for(n=0;n<o;n++)t=i[n],f=t.setRegionHighlight(this.currentEl,c,l),f&&(s=!0);if(s){if(e=r.Event("sparklineRegionChange"),e.sparklines=this.splist,this.$el.trigger(e),this.tooltip){for(u="",n=0;n<o;n++)t=i[n],u+=t.getCurrentRegionTooltip();this.tooltip.setContent(u)}this.disableHighlight||this.canvas.render()}f===null&&this.mouseleave()}}});st=u({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var u=t.get("tooltipClassname","jqstooltip"),f=this.sizeStyle,i;this.container=t.get("tooltipContainer")||n.body;this.tooltipOffsetX=t.get("tooltipOffsetX",10);this.tooltipOffsetY=t.get("tooltipOffsetY",12);r("#jqssizetip").remove();r("#jqstooltip").remove();this.sizetip=r("<div/>",{id:"jqssizetip",style:f,"class":u});this.tooltip=r("<div/>",{id:"jqstooltip","class":u}).appendTo(this.container);i=this.tooltip.offset();this.offsetLeft=i.left;this.offsetTop=i.top;this.hidden=!0;r(window).unbind("resize.jqs scroll.jqs");r(window).bind("resize.jqs scroll.jqs",r.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=r(window).scrollTop();this.scrollLeft=r(window).scrollLeft();this.scrollRight=this.scrollLeft+r(window).width();this.updatePosition()},getSize:function(n){this.sizetip.html(n).appendTo(this.container);this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(n){if(!n){this.tooltip.css("visibility","hidden");this.hidden=!0;return}this.getSize(n);this.tooltip.html(n).css({width:this.width,height:this.height,visibility:"visible"});this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(n,t){if(n===i){if(this.mousex===i)return;n=this.mousex-this.offsetLeft;t=this.mousey-this.offsetTop}else this.mousex=n-=this.offsetLeft,this.mousey=t-=this.offsetTop;this.height&&this.width&&!this.hidden&&(t-=this.height+this.tooltipOffsetY,n+=this.tooltipOffsetX,t<this.scrollTop&&(t=this.scrollTop),n<this.scrollLeft?n=this.scrollLeft:n+this.width>this.scrollRight&&(n=this.scrollRight-this.width),this.tooltip.css({left:n,top:t}))},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=i;r(window).unbind("resize.jqs scroll.jqs")}});vt=function(){ut(at)};r(vt);f=[];r.fn.sparkline=function(t,u){return this.each(function(){var e=new r.fn.sparkline.options(this,u),h=r(this),s,o;if(s=function(){var s,a,c,f,u,l,o;if(t==="html"||t===i?(o=this.getAttribute(e.get("tagValuesAttribute")),(o===i||o===null)&&(o=h.html()),s=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")):s=t,a=e.get("width")==="auto"?s.length*e.get("defaultPixelsPerValue"):e.get("width"),e.get("height")==="auto"?e.get("composite")&&r.data(this,"_jqs_vcanvas")||(f=n.createElement("span"),f.innerHTML="a",h.html(f),c=r(f).innerHeight()||r(f).height(),r(f).remove(),f=null):c=e.get("height"),e.get("disableInteraction")?u=!1:(u=r.data(this,"_jqs_mhandler"),u?e.get("composite")||u.reset():(u=new ot(this,e),r.data(this,"_jqs_mhandler",u))),e.get("composite")&&!r.data(this,"_jqs_vcanvas")){r.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),r.data(this,"_jqs_errnotify",!0));return}l=new r.fn.sparkline[e.get("type")](this,s,e,a,c);l.render();u&&u.registerSparkline(l)},r(this).html()&&!e.get("disableHiddenCheck")&&r(this).is(":hidden")||!r(this).parents("body").length){if(!e.get("composite")&&r.data(this,"_jqs_pending"))for(o=f.length;o;o--)f[o-1][0]==this&&f.splice(o-1,1);f.push([this,s]);r.data(this,"_jqs_pending",!0)}else s.call(this)})};r.fn.sparkline.defaults=tt();r.sparkline_display_visible=function(){for(var t,i=[],n=0,u=f.length;n<u;n++)t=f[n][0],r(t).is(":visible")&&!r(t).parents().is(":hidden")?(f[n][1].call(t),r.data(f[n][0],"_jqs_pending",!1),i.push(n)):!r(t).closest("html").length&&!r.data(t,"_jqs_pending")&&(r.data(f[n][0],"_jqs_pending",!1),i.push(n));for(n=i.length;n;n--)f.splice(i[n-1],1)};r.fn.sparkline.options=u({init:function(n,t){var e,i,u,f;this.userOptions=t=t||{};this.tag=n;this.tagValCache={};i=r.fn.sparkline.defaults;u=i.common;this.tagOptionsPrefix=t.enableTagOptions&&(t.tagOptionsPrefix||u.tagOptionsPrefix);f=this.getTagSetting("type");e=f===c?i[t.type||u.type]:i[f];this.mergedOptions=r.extend({},u,e,t)},getTagSetting:function(n){var u=this.tagOptionsPrefix,t,r,f,e;if(u===!1||u===i)return c;if(this.tagValCache.hasOwnProperty(n))t=this.tagValCache.key;else{if(t=this.tag.getAttribute(u+n),t===i||t===null)t=c;else if(t.substr(0,1)==="[")for(t=t.substr(1,t.length-2).split(","),r=t.length;r--;)t[r]=o(t[r].replace(/(^\s*)|(\s*$)/g,""));else if(t.substr(0,1)==="{")for(f=t.substr(1,t.length-2).split(","),t={},r=f.length;r--;)e=f[r].split(":",2),t[e[0].replace(/(^\s*)|(\s*$)/g,"")]=o(e[1].replace(/(^\s*)|(\s*$)/g,""));else t=o(t);this.tagValCache.key=t}return t},get:function(n,t){var r=this.getTagSetting(n),u;return r!==c?r:(u=this.mergedOptions[n])===i?t:u}});r.fn.sparkline._base=u({disabled:!1,init:function(n,t,u,f,e){this.el=n;this.$el=r(n);this.values=t;this.options=u;this.width=f;this.height=e;this.currentRegion=i},initTarget:function(){var n=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),n))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(){},setRegionHighlight:function(n,t,r){var f=this.currentRegion,e=!this.options.get("disableHighlight"),u;return t>this.canvasWidth||r>this.canvasHeight||t<0||r<0?null:(u=this.getRegion(n,t,r),f!==u?(f!==i&&e&&this.removeHighlight(),this.currentRegion=u,u!==i&&e&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(){},getCurrentRegionTooltip:function(){var t=this.options,y="",h=[],n,o,p,w,b,u,c,l,a,k,v,s,d,f;if(this.currentRegion===i)return"";if(n=this.getCurrentRegionFields(),v=t.get("tooltipFormatter"),v)return v(this,t,n);if(t.get("tooltipChartTitle")&&(y+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"<\/div>\n"),o=this.options.get("tooltipFormat"),!o)return"";if(r.isArray(o)||(o=[o]),r.isArray(n)||(n=[n]),c=this.options.get("tooltipFormatFieldlist"),l=this.options.get("tooltipFormatFieldlistKey"),c&&l){for(a=[],u=n.length;u--;)k=n[u][l],(f=r.inArray(k,c))!=-1&&(a[f]=n[u]);n=a}for(p=o.length,d=n.length,u=0;u<p;u++)for(s=o[u],typeof s=="string"&&(s=new e(s)),w=s.fclass||"jqsfield",f=0;f<d;f++)n[f].isNull&&t.get("tooltipSkipNull")||(r.extend(n[f],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),b=s.render(n[f],t.get("tooltipValueLookups"),t),h.push('<div class="'+w+'">'+b+"<\/div>"));return h.length?y+h.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(n,i){var e=i.get("highlightColor"),o=i.get("highlightLighten"),u,h,f,r;if(e)return e;if(o&&(u=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(n)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(n),u)){for(f=[],h=n.length===4?16:1,r=0;r<3;r++)f[r]=s(t.round(parseInt(u[r+1],16)*h*o),0,255);return"rgb("+f.join(",")+")"}return n}});a={changeHighlight:function(n){var i=this.currentRegion,f=this.target,u=this.regionShapes[i],t;u&&(t=this.renderRegion(i,n),r.isArray(t)||r.isArray(u)?(f.replaceWithShapes(u,t),this.regionShapes[i]=r.map(t,function(n){return n.id})):(f.replaceWithShape(u,t),this.regionShapes[i]=t.id))},render:function(){var e=this.values,o=this.target,u=this.regionShapes,n,f,t,i;if(this.cls._super.render.call(this)){for(t=e.length;t--;)if(n=this.renderRegion(t),n)if(r.isArray(n)){for(f=[],i=n.length;i--;)n[i].append(),f.push(n[i].id);u[t]=f}else n.append(),u[t]=n.id;else u[t]=null;o.render()}}};r.fn.sparkline.line=p=u(r.fn.sparkline._base,{type:"line",init:function(n,t,i,r,u){p._super.init.call(this,n,t,i,r,u);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.hightlightSpotId=null;this.lastShapeId=null;this.initTarget()},getRegion:function(n,t){for(var u=this.regionMap,r=u.length;r--;)if(u[r]!==null&&t>=u[r][0]&&t<=u[r][1])return u[r][2];return i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.yvalues[n]===null,x:this.xvalues[n],y:this.yvalues[n],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:n}},renderHighlight:function(){var h=this.currentRegion,t=this.target,n=this.vertices[h],r=this.options,e=r.get("spotRadius"),o=r.get("highlightSpotColor"),s=r.get("highlightLineColor"),u,f;n&&(e&&o&&(u=t.drawCircle(n[0],n[1],e,i,o),this.highlightSpotId=u.id,t.insertAfterShape(this.lastShapeId,u)),s&&(f=t.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,s),this.highlightLineId=f.id,t.insertAfterShape(this.lastShapeId,f)))},removeHighlight:function(){var n=this.target;this.highlightSpotId&&(n.removeShapeId(this.highlightSpotId),this.highlightSpotId=null);this.highlightLineId&&(n.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){for(var i=this.values,c=i.length,r=this.xvalues,e=this.yvalues,u=this.yminmax,f,s,h,o,n=0;n<c;n++)f=i[n],s=typeof i[n]=="string",h=typeof i[n]=="object"&&i[n]instanceof Array,o=s&&i[n].split(":"),s&&o.length===2?(r.push(Number(o[0])),e.push(Number(o[1])),u.push(Number(o[1]))):h?(r.push(f[0]),e.push(f[1]),u.push(f[1])):(r.push(n),i[n]===null||i[n]==="null"?e.push(null):(e.push(Number(f)),u.push(Number(f))));this.options.get("xvalues")&&(r=this.options.get("xvalues"));this.maxy=this.maxyorg=t.max.apply(t,u);this.miny=this.minyorg=t.min.apply(t,u);this.maxx=t.max.apply(t,r);this.minx=t.min.apply(t,r);this.xvalues=r;this.yvalues=e;this.yminmax=u},processRangeOptions:function(){var n=this.options,t=n.get("normalRangeMin"),r=n.get("normalRangeMax");t!==i&&(t<this.miny&&(this.miny=t),r>this.maxy&&(this.maxy=r));n.get("chartRangeMin")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMin")<this.miny)&&(this.miny=n.get("chartRangeMin"));n.get("chartRangeMax")!==i&&(n.get("chartRangeClip")||n.get("chartRangeMax")>this.maxy)&&(this.maxy=n.get("chartRangeMax"));n.get("chartRangeMinX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMinX")<this.minx)&&(this.minx=n.get("chartRangeMinX"));n.get("chartRangeMaxX")!==i&&(n.get("chartRangeClipX")||n.get("chartRangeMaxX")>this.maxx)&&(this.maxx=n.get("chartRangeMaxX"))},drawNormalRange:function(n,r,u,f,e){var s=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),h=r+t.round(u-u*((o-this.miny)/e)),c=t.round(u*(o-s)/e);this.target.drawRect(n,h,f,c,i,this.options.get("normalRangeColor")).append()},render:function(){var n=this.options,v=this.target,c=this.canvasWidth,o=this.canvasHeight,at=this.vertices,f=n.get("spotRadius"),pt=this.regionMap,b,y,k,l,a,ht,e,ut,g,d,vt,tt,yt,ct,ft,et,ot,st,nt,it,rt,lt,w,s,u;if(p._super.render.call(this)&&(this.scanValues(),this.processRangeOptions(),w=this.xvalues,s=this.yvalues,this.yminmax.length&&!(this.yvalues.length<2))){for(l=a=0,b=this.maxx-this.minx==0?1:this.maxx-this.minx,y=this.maxy-this.miny==0?1:this.maxy-this.miny,k=this.yvalues.length-1,f&&(c<f*4||o<f*4)&&(f=0),f&&(rt=n.get("highlightSpotColor")&&!n.get("disableInteraction"),(rt||n.get("minSpotColor")||n.get("spotColor")&&s[k]===this.miny)&&(o-=t.ceil(f)),(rt||n.get("maxSpotColor")||n.get("spotColor")&&s[k]===this.maxy)&&(o-=t.ceil(f),l+=t.ceil(f)),(rt||(n.get("minSpotColor")||n.get("maxSpotColor"))&&(s[0]===this.miny||s[0]===this.maxy))&&(a+=t.ceil(f),c-=t.ceil(f)),(rt||n.get("spotColor")||n.get("minSpotColor")||n.get("maxSpotColor")&&(s[k]===this.miny||s[k]===this.maxy))&&(c-=t.ceil(f))),o--,n.get("normalRangeMin")!==i&&!n.get("drawNormalOnTop")&&this.drawNormalRange(a,l,o,c,y),e=[],ut=[e],ct=ft=null,et=s.length,u=0;u<et;u++)g=w[u],vt=w[u+1],d=s[u],tt=a+t.round((g-this.minx)*(c/b)),yt=u<et-1?a+t.round((vt-this.minx)*(c/b)):c,ft=tt+(yt-tt)/2,pt[u]=[ct||0,ft,u],ct=ft,d===null?u&&(s[u-1]!==null&&(e=[],ut.push(e)),at.push(null)):(d<this.miny&&(d=this.miny),d>this.maxy&&(d=this.maxy),e.length||e.push([tt,l+o]),ht=[tt,l+t.round(o-o*((d-this.miny)/y))],e.push(ht),at.push(ht));for(ot=[],st=[],nt=ut.length,u=0;u<nt;u++)e=ut[u],e.length&&(n.get("fillColor")&&(e.push([e[e.length-1][0],l+o]),st.push(e.slice(0)),e.pop()),e.length>2&&(e[0]=[e[0][0],e[1][1]]),ot.push(e));for(nt=st.length,u=0;u<nt;u++)v.drawShape(st[u],n.get("fillColor"),n.get("fillColor")).append();for(n.get("normalRangeMin")!==i&&n.get("drawNormalOnTop")&&this.drawNormalRange(a,l,o,c,y),nt=ot.length,u=0;u<nt;u++)v.drawShape(ot[u],n.get("lineColor"),i,n.get("lineWidth")).append();if(f&&n.get("valueSpots"))for(it=n.get("valueSpots"),it.get===i&&(it=new h(it)),u=0;u<et;u++)lt=it.get(s[u]),lt&&v.drawCircle(a+t.round((w[u]-this.minx)*(c/b)),l+t.round(o-o*((s[u]-this.miny)/y)),f,i,lt).append();f&&n.get("spotColor")&&s[k]!==null&&v.drawCircle(a+t.round((w[w.length-1]-this.minx)*(c/b)),l+t.round(o-o*((s[k]-this.miny)/y)),f,i,n.get("spotColor")).append();this.maxy!==this.minyorg&&(f&&n.get("minSpotColor")&&(g=w[r.inArray(this.minyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.minyorg-this.miny)/y)),f,i,n.get("minSpotColor")).append()),f&&n.get("maxSpotColor")&&(g=w[r.inArray(this.maxyorg,s)],v.drawCircle(a+t.round((g-this.minx)*(c/b)),l+t.round(o-o*((this.maxyorg-this.miny)/y)),f,i,n.get("maxSpotColor")).append()));this.lastShapeId=v.getLastShapeId();this.canvasTop=l;v.render()}}});r.fn.sparkline.bar=ht=u(r.fn.sparkline._base,a,{type:"bar",init:function(n,u,f,e,c){var ct=parseInt(f.get("barWidth"),10),lt=parseInt(f.get("barSpacing"),10),dt=f.get("chartRangeMin"),gt=f.get("chartRangeMax"),at=f.get("chartRangeClip"),nt=Infinity,d=-Infinity,vt,yt,pt,tt,b,a,rt,wt,ut,ft,y,p,bt,kt,w,et,g,ni,ti,l,k,ii,ot,st;for(ht._super.init.call(this,n,u,f,e,c),a=0,rt=u.length;a<rt;a++)l=u[a],vt=typeof l=="string"&&l.indexOf(":")>-1,(vt||r.isArray(l))&&(w=!0,vt&&(l=u[a]=v(l.split(":"))),l=it(l,null),yt=t.min.apply(t,l),pt=t.max.apply(t,l),yt<nt&&(nt=yt),pt>d&&(d=pt));for(this.stacked=w,this.regionShapes={},this.barWidth=ct,this.barSpacing=lt,this.totalBarWidth=ct+lt,this.width=e=u.length*ct+(u.length-1)*lt,this.initTarget(),at&&(bt=dt===i?-Infinity:dt,kt=gt===i?Infinity:gt),b=[],tt=w?[]:b,ot=[],st=[],a=0,rt=u.length;a<rt;a++)if(w)for(et=u[a],u[a]=ti=[],ot[a]=0,tt[a]=st[a]=0,g=0,ni=et.length;g<ni;g++)l=ti[g]=at?s(et[g],bt,kt):et[g],l!==null&&(l>0&&(ot[a]+=l),nt<0&&d>0?l<0?st[a]+=t.abs(l):tt[a]+=l:tt[a]+=t.abs(l-(l<0?d:nt)),b.push(l));else l=at?s(u[a],bt,kt):u[a],l=u[a]=o(l),l!==null&&b.push(l);this.max=p=t.max.apply(t,b);this.min=y=t.min.apply(t,b);this.stackMax=d=w?t.max.apply(t,ot):p;this.stackMin=nt=w?t.min.apply(t,b):y;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<y)&&(y=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>p)&&(p=f.get("chartRangeMax"));this.zeroAxis=ut=f.get("zeroAxis",!0);ft=y<=0&&p>=0&&ut?0:ut==0?y:y>0?y:p;this.xaxisOffset=ft;wt=w?t.max.apply(t,tt)+t.max.apply(t,st):p-y;this.canvasHeightEf=ut&&y<0?this.canvasHeight-2:this.canvasHeight-1;y<ft?(ii=w&&p>=0?d:p,k=(ii-ft)/wt*this.canvasHeight,k!==t.ceil(k)&&(this.canvasHeightEf-=2,k=t.ceil(k))):k=this.canvasHeight;this.yoffset=k;r.isArray(f.get("colorMap"))?(this.colorMapByIndex=f.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=f.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.range=wt},getRegion:function(n,r){var u=t.floor(r/this.totalBarWidth);return u<0||u>=this.values.length?i:u},getCurrentRegionFields:function(){for(var i=this.currentRegion,r=ft(this.values[i]),u=[],n,t=r.length;t--;)n=r[t],u.push({isNull:n===null,value:n,color:this.calcColor(t,n,i),offset:i});return u},calcColor:function(n,t,u){var o=this.colorMapByIndex,s=this.colorMapByValue,e=this.options,f,h;return f=this.stacked?e.get("stackedBarColor"):t<0?e.get("negBarColor"):e.get("barColor"),t===0&&e.get("zeroColor")!==i&&(f=e.get("zeroColor")),s&&(h=s.get(t))?f=h:o&&o.length>u&&(f=o[u]),r.isArray(f)?f[n%f.length]:f},renderRegion:function(n,u){var f=this.values[n],h=this.options,c=this.xaxisOffset,p=[],b=this.range,rt=this.stacked,k=this.target,d=n*this.totalBarWidth,ut=this.canvasHeightEf,o=this.yoffset,l,a,e,g,w,v,nt,s,tt,it;if(f=r.isArray(f)?f:[f],nt=f.length,s=f[0],g=y(null,f),it=y(c,f,!0),g)return h.get("nullColor")?(e=u?h.get("nullColor"):this.calcHighlightColor(h.get("nullColor"),h),l=o>0?o-1:o,k.drawRect(d,l,this.barWidth-1,0,e,e)):i;for(w=o,v=0;v<nt;v++){if(s=f[v],rt&&s===c){if(!it||tt)continue;tt=!0}a=b>0?t.floor(ut*(t.abs(s-c)/b))+1:1;s<c||s===c&&o===0?(l=w,w+=a):(l=o-a,o-=a);e=this.calcColor(v,s,n);u&&(e=this.calcHighlightColor(e,h));p.push(k.drawRect(d,l,this.barWidth-1,a-1,e,e))}return p.length===1?p[0]:p}});r.fn.sparkline.tristate=ct=u(r.fn.sparkline._base,a,{type:"tristate",init:function(n,t,u,f,e){var o=parseInt(u.get("barWidth"),10),s=parseInt(u.get("barSpacing"),10);ct._super.init.call(this,n,t,u,f,e);this.regionShapes={};this.barWidth=o;this.barSpacing=s;this.totalBarWidth=o+s;this.values=r.map(t,Number);this.width=f=t.length*o+(t.length-1)*s;r.isArray(u.get("colorMap"))?(this.colorMapByIndex=u.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=u.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new h(this.colorMapByValue)));this.initTarget()},getRegion:function(n,i){return t.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],color:this.calcColor(this.values[n],n),offset:n}},calcColor:function(n,t){var u=this.values,i=this.options,r=this.colorMapByIndex,f=this.colorMapByValue,e,o;return e=f&&(o=f.get(n))?o:r&&r.length>t?r[t]:u[t]<0?i.get("negBarColor"):u[t]>0?i.get("posBarColor"):i.get("zeroBarColor"),e},renderRegion:function(n,i){var o=this.values,l=this.options,s=this.target,h,f,u,c,e,r;if(h=s.pixelHeight,u=t.round(h/2),c=n*this.totalBarWidth,o[n]<0?(e=u,f=u-1):o[n]>0?(e=0,f=u-1):(e=u-1,f=2),r=this.calcColor(o[n],n),r!==null)return i&&(r=this.calcHighlightColor(r,l)),s.drawRect(c,e,this.barWidth-1,f-1,r,r)}});r.fn.sparkline.discrete=lt=u(r.fn.sparkline._base,a,{type:"discrete",init:function(n,u,f,e,o){lt._super.init.call(this,n,u,f,e,o);this.regionShapes={};this.values=u=r.map(u,Number);this.min=t.min.apply(t,u);this.max=t.max.apply(t,u);this.range=this.max-this.min;this.width=e=f.get("width")==="auto"?u.length*2:this.width;this.interval=t.floor(e/u.length);this.itemWidth=e/u.length;f.get("chartRangeMin")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMin")<this.min)&&(this.min=f.get("chartRangeMin"));f.get("chartRangeMax")!==i&&(f.get("chartRangeClip")||f.get("chartRangeMax")>this.max)&&(this.max=f.get("chartRangeMax"));this.initTarget();this.target&&(this.lineHeight=f.get("lineHeight")==="auto"?t.round(this.canvasHeight*.3):f.get("lineHeight"))},getRegion:function(n,i){return t.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],offset:n}},renderRegion:function(n,i){var a=this.values,r=this.options,h=this.min,v=this.max,y=this.range,p=this.interval,w=this.target,b=this.canvasHeight,c=this.lineHeight,l=b-c,f,e,u,o;return e=s(a[n],h,v),o=n*p,f=t.round(l-l*((e-h)/y)),u=r.get("thresholdColor")&&e<r.get("thresholdValue")?r.get("thresholdColor"):r.get("lineColor"),i&&(u=this.calcHighlightColor(u,r)),w.drawLine(o,f,o,f+c,u)}});r.fn.sparkline.bullet=w=u(r.fn.sparkline._base,{type:"bullet",init:function(n,r,u,f,e){var s,h,o;w._super.init.call(this,n,r,u,f,e);this.values=r=v(r);o=r.slice();o[0]=o[0]===null?o[2]:o[0];o[1]=r[1]===null?o[2]:o[1];s=t.min.apply(t,r);h=t.max.apply(t,r);s=u.get("base")===i?s<0?s:0:u.get("base");this.min=s;this.max=h;this.range=h-s;this.shapes={};this.valueShapes={};this.regiondata={};this.width=f=u.get("width")==="auto"?"4.0em":f;this.target=this.$el.simpledraw(f,e,u.get("composite"));r.length||(this.disabled=!0);this.initTarget()},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{fieldkey:n.substr(0,1),value:this.values[n.substr(1)],region:n}},changeHighlight:function(n){var i=this.currentRegion,r=this.valueShapes[i],t;delete this.shapes[r];switch(i.substr(0,1)){case"r":t=this.renderRange(i.substr(1),n);break;case"p":t=this.renderPerformance(n);break;case"t":t=this.renderTarget(n)}this.valueShapes[i]=t.id;this.shapes[t.id]=i;this.target.replaceWithShape(r,t)},renderRange:function(n,i){var u=this.values[n],f=t.round(this.canvasWidth*((u-this.min)/this.range)),r=this.options.get("rangeColors")[n-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,f-1,this.canvasHeight-1,r,r)},renderPerformance:function(n){var r=this.values[1],u=t.round(this.canvasWidth*((r-this.min)/this.range)),i=this.options.get("performanceColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(0,t.round(this.canvasHeight*.3),u-1,t.round(this.canvasHeight*.4)-1,i,i)},renderTarget:function(n){var u=this.values[0],f=t.round(this.canvasWidth*((u-this.min)/this.range)-this.options.get("targetWidth")/2),r=t.round(this.canvasHeight*.1),e=this.canvasHeight-r*2,i=this.options.get("targetColor");return n&&(i=this.calcHighlightColor(i,this.options)),this.target.drawRect(f,r,this.options.get("targetWidth")-1,e-1,i,i)},render:function(){var i=this.values.length,r=this.target,t,n;if(w._super.render.call(this)){for(t=2;t<i;t++)n=this.renderRange(t).append(),this.shapes[n.id]="r"+t,this.valueShapes["r"+t]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id);this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id);r.render()}}});r.fn.sparkline.pie=b=u(r.fn.sparkline._base,{type:"pie",init:function(n,i,u,f,e){var s=0,o;if(b._super.init.call(this,n,i,u,f,e),this.shapes={},this.valueShapes={},this.values=i=r.map(i,Number),u.get("width")==="auto"&&(this.width=this.height),i.length>0)for(o=i.length;o--;)s+=i[o];this.total=s;this.initTarget();this.radius=t.floor(t.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(n,t,r){var u=this.target.getShapeAt(n,t,r);return u!==i&&this.shapes[u]!==i?this.shapes[u]:i},getCurrentRegionFields:function(){var n=this.currentRegion;return{isNull:this.values[n]===i,value:this.values[n],percent:this.values[n]/this.total*100,color:this.options.get("sliceColors")[n%this.options.get("sliceColors").length],offset:n}},changeHighlight:function(n){var t=this.currentRegion,i=this.renderSlice(t,n),r=this.valueShapes[t];delete this.shapes[r];this.target.replaceWithShape(r,i);this.valueShapes[t]=i.id;this.shapes[i.id]=t},renderSlice:function(n,r){for(var p=this.target,f=this.options,h=this.radius,w=f.get("borderWidth"),c=f.get("offset"),b=2*t.PI,l=this.values,a=this.total,e=c?2*t.PI*(c/360):0,v,o,s,y=l.length,u=0;u<y;u++){if(v=e,o=e,a>0&&(o=e+b*(l[u]/a)),n===u)return s=f.get("sliceColors")[u%f.get("sliceColors").length],r&&(s=this.calcHighlightColor(s,f)),p.drawPieSlice(h,h,h-w,v,o,i,s);e=o}},render:function(){var e=this.target,o=this.values,s=this.options,r=this.radius,u=s.get("borderWidth"),f,n;if(b._super.render.call(this)){for(u&&e.drawCircle(r,r,t.floor(r-u/2),s.get("borderColor"),i,u).append(),n=o.length;n--;)o[n]&&(f=this.renderSlice(n).append(),this.valueShapes[n]=f.id,this.shapes[f.id]=n);e.render()}}});r.fn.sparkline.box=k=u(r.fn.sparkline._base,{type:"box",init:function(n,t,i,u,f){k._super.init.call(this,n,t,i,u,f);this.values=r.map(t,Number);this.width=i.get("width")==="auto"?"4.0em":u;this.initTarget();this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var n=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&n.push({field:"lo",value:this.loutlier}),this.routlier!==i&&n.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&n.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&n.push({field:"rw",value:this.rwhisker}),n},render:function(){var s=this.target,r=this.values,g=r.length,n=this.options,nt=this.canvasWidth,u=this.canvasHeight,e=n.get("chartRangeMin")===i?t.min.apply(t,r):n.get("chartRangeMin"),it=n.get("chartRangeMax")===i?t.max.apply(t,r):n.get("chartRangeMax"),o=0,h,w,tt,a,p,v,c,b,y,d,f;if(k._super.render.call(this)){if(n.get("raw"))n.get("showOutliers")&&r.length>5?(w=r[0],h=r[1],a=r[2],p=r[3],v=r[4],c=r[5],b=r[6]):(h=r[0],a=r[1],p=r[2],v=r[3],c=r[4]);else if(r.sort(function(n,t){return n-t}),a=l(r,1),p=l(r,2),v=l(r,3),tt=v-a,n.get("showOutliers")){for(h=c=i,y=0;y<g;y++)h===i&&r[y]>a-tt*n.get("outlierIQR")&&(h=r[y]),r[y]<v+tt*n.get("outlierIQR")&&(c=r[y]);w=r[0];b=r[g-1]}else h=r[0],c=r[g-1];this.quartiles=[a,p,v];this.lwhisker=h;this.rwhisker=c;this.loutlier=w;this.routlier=b;f=nt/(it-e+1);n.get("showOutliers")&&(o=t.ceil(n.get("spotRadius")),nt-=2*t.ceil(n.get("spotRadius")),f=nt/(it-e+1),w<h&&s.drawCircle((w-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append(),b>c&&s.drawCircle((b-e)*f+o,u/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append());s.drawRect(t.round((a-e)*f+o),t.round(u*.1),t.round((v-a)*f),t.round(u*.8),n.get("boxLineColor"),n.get("boxFillColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/2),t.round((a-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((h-e)*f+o),t.round(u/4),t.round((h-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/2),t.round((v-e)*f+o),t.round(u/2),n.get("lineColor")).append();s.drawLine(t.round((c-e)*f+o),t.round(u/4),t.round((c-e)*f+o),t.round(u-u/4),n.get("whiskerColor")).append();s.drawLine(t.round((p-e)*f+o),t.round(u*.1),t.round((p-e)*f+o),t.round(u*.9),n.get("medianColor")).append();n.get("target")&&(d=t.ceil(n.get("spotRadius")),s.drawLine(t.round((n.get("target")-e)*f+o),t.round(u/2-d),t.round((n.get("target")-e)*f+o),t.round(u/2+d),n.get("targetColor")).append(),s.drawLine(t.round((n.get("target")-e)*f+o-d),t.round(u/2),t.round((n.get("target")-e)*f+o+d),t.round(u/2),n.get("targetColor")).append());s.render()}}});yt=u({init:function(n,t,i,r){this.target=n;this.id=t;this.type=i;this.args=r},append:function(){return this.target.appendShape(this),this}});d=u({_pxregex:/(\d+)(px)?\s*$/i,init:function(n,t,i){n&&(this.width=n,this.height=t,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),r.data(i,"_jqs_vcanvas",this))},drawLine:function(n,t,i,r,u,f){return this.drawShape([[n,t],[i,r]],u,f)},drawShape:function(n,t,i,r){return this._genShape("Shape",[n,t,i,r])},drawCircle:function(n,t,i,r,u,f){return this._genShape("Circle",[n,t,i,r,u,f])},drawPieSlice:function(n,t,i,r,u,f,e){return this._genShape("PieSlice",[n,t,i,r,u,f,e])},drawRect:function(n,t,i,r,u,f){return this._genShape("Rect",[n,t,i,r,u,f])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(n,t){r(t).html(n)},_calculatePixelDims:function(n,t,i){var u;u=this._pxregex.exec(t);this.pixelHeight=u?u[1]:r(i).height();u=this._pxregex.exec(n);this.pixelWidth=u?u[1]:r(i).width()},_genShape:function(n,t){var i=wt++;return t.unshift(i),new yt(this,i,n,t)},appendShape:function(){alert("appendShape not implemented")},replaceWithShape:function(){alert("replaceWithShape not implemented")},insertAfterShape:function(){alert("insertAfterShape not implemented")},removeShapeId:function(){alert("removeShapeId not implemented")},getShapeAt:function(){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});g=u(d,{init:function(t,u,f,e){g._super.init.call(this,t,u,f);this.canvas=n.createElement("canvas");f[0]&&(f=f[0]);r.data(f,"_jqs_vcanvas",this);r(this.canvas).css({display:"inline-block",width:t,height:u,verticalAlign:"top"});this._insert(this.canvas,f);this._calculatePixelDims(t,u,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=e;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i;r(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(n,t,r){var u=this.canvas.getContext("2d");return n!==i&&(u.strokeStyle=n),u.lineWidth=r===i?1:r,t!==i&&(u.fillStyle=t),u},reset:function(){var n=this._getContext();n.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=i},_drawShape:function(n,t,r,u,f){var e=this._getContext(r,u,f),o,s;for(e.beginPath(),e.moveTo(t[0][0]+.5,t[0][1]+.5),o=1,s=t.length;o<s;o++)e.lineTo(t[o][0]+.5,t[o][1]+.5);r!==i&&e.stroke();u!==i&&e.fill();this.targetX!==i&&this.targetY!==i&&e.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawCircle:function(n,r,u,f,e,o,s){var h=this._getContext(e,o,s);h.beginPath();h.arc(r,u,f,0,2*t.PI,!1);this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n);e!==i&&h.stroke();o!==i&&h.fill()},_drawPieSlice:function(n,t,r,u,f,e,o,s){var h=this._getContext(o,s);h.beginPath();h.moveTo(t,r);h.arc(t,r,u,f,e,!1);h.lineTo(t,r);h.closePath();o!==i&&h.stroke();s&&h.fill();this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=n)},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t+r,i],[t+r,i+u],[t,i+u],[t,i]],f,e)},appendShape:function(n){return this.shapes[n.id]=n,this.shapeseq.push(n.id),this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var r=this.shapeseq,i;for(this.shapes[t.id]=t,i=r.length;i--;)r[i]==n&&(r[i]=t.id);delete this.shapes[n]},replaceWithShapes:function(n,t){for(var r=this.shapeseq,f={},u,e,i=n.length;i--;)f[n[i]]=!0;for(i=r.length;i--;)u=r[i],f[u]&&(r.splice(i,1),delete this.shapes[u],e=i);for(i=t.length;i--;)r.splice(e,0,t[i].id),this.shapes[t[i].id]=t[i]},insertAfterShape:function(n,t){for(var r=this.shapeseq,i=r.length;i--;)if(r[i]===n){r.splice(i+1,0,t.id);this.shapes[t.id]=t;return}},removeShapeId:function(n){for(var i=this.shapeseq,t=i.length;t--;)if(i[t]===n){i.splice(t,1);break}delete this.shapes[n]},getShapeAt:function(n,t,i){return this.targetX=t,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var i=this.shapeseq,u=this.shapes,f=i.length,e=this._getContext(),r,t,n;for(e.clearRect(0,0,this.pixelWidth,this.pixelHeight),n=0;n<f;n++)r=i[n],t=u[r],this["_draw"+t.type].apply(this,t.args);this.interact||(this.shapes={},this.shapeseq=[])}});nt=u(d,{init:function(t,i,u){var f;nt._super.init.call(this,t,i,u);u[0]&&(u=u[0]);r.data(u,"_jqs_vcanvas",this);this.canvas=n.createElement("span");r(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,u);this._calculatePixelDims(t,i,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;f='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"><\/v:group>';this.canvas.insertAdjacentHTML("beforeEnd",f);this.group=r(this.canvas).children()[0];this.rendered=!1;this.prerender=""},_drawShape:function(n,t,r,u,f){for(var e=[],s,h,c,l,a,o=0,v=t.length;o<v;o++)e[o]=""+t[o][0]+","+t[o][1];return s=e.splice(0,1),f=f===i?1:f,h=r===i?' stroked="false" ':' strokeWeight="'+f+'px" strokeColor="'+r+'" ',c=u===i?' filled="false"':' fillColor="'+u+'" filled="true" ',l=e[0]===e[e.length-1]?"x ":"",a='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+h+c+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+s+" l "+e.join(", ")+" "+l+'e"> <\/v:shape>',a},_drawCircle:function(n,t,r,u,f,e,o){var s,h,c;return t-=u,r-=u,s=f===i?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+f+'" ',h=e===i?' filled="false"':' fillColor="'+e+'" filled="true" ',c='<v:oval  id="jqsshape'+n+'" '+s+h+' style="position:absolute;top:'+r+"px; left:"+t+"px; width:"+u*2+"px; height:"+u*2+'px"><\/v:oval>',c},_drawPieSlice:function(n,r,u,f,e,o,s,h){var y,c,l,a,v,p,w,b;if(e===o)return"";if(o-e==2*t.PI&&(e=0,o=2*t.PI),c=r+t.round(t.cos(e)*f),l=u+t.round(t.sin(e)*f),a=r+t.round(t.cos(o)*f),v=u+t.round(t.sin(o)*f),c===a&&l===v){if(o-e<t.PI)return"";c=a=r+f;l=v=u}return c===a&&l===v&&o-e<t.PI?"":(y=[r-f,u-f,r+f,u+f,c,l,a,v],p=s===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+s+'" ',w=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',b='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+n+'" '+p+w+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+r+","+u+" wa "+y.join(", ")+' x e"> <\/v:shape>',b)},_drawRect:function(n,t,i,r,u,f,e){return this._drawShape(n,[[t,i],[t,i+u],[t+r,i+u],[t+r,i],[t,i]],f,e)},reset:function(){this.group.innerHTML=""},appendShape:function(n){var t=this["_draw"+n.type].apply(this,n.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",t):this.prerender+=t,this.lastShapeId=n.id,n.id},replaceWithShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].outerHTML=u},replaceWithShapes:function(n,t){for(var f=r("#jqsshape"+n[0]),u="",e=t.length,i=0;i<e;i++)u+=this["_draw"+t[i].type].apply(this,t[i].args);for(f[0].outerHTML=u,i=1;i<n.length;i++)r("#jqsshape"+n[i]).remove()},insertAfterShape:function(n,t){var i=r("#jqsshape"+n),u=this["_draw"+t.type].apply(this,t.args);i[0].insertAdjacentHTML("afterEnd",u)},removeShapeId:function(n){var t=r("#jqsshape"+n);this.group.removeChild(t[0])},getShapeAt:function(n){return n.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})}(document,Math);!function(){function al(n){return n&&(n.ownerDocument||n.document||n).documentElement}function bt(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function gi(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function oi(n){return null===n?NaN:+n}function lt(n){return!isNaN(n)}function vl(n){return{left:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;n(t[f],i)<0?r=f+1:u=f}return r},right:function(t,i,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var f=r+u>>>1;n(t[f],i)>0?u=f:r=f+1}return r}}}function ok(n){return n.length}function sk(n){for(var t=1;n*t%1;)t*=10;return t}function yl(n,t){for(var i in t)Object.defineProperty(n.prototype,i,{value:t[i],enumerable:!1})}function at(){this._=Object.create(null)}function ar(n){return(n+="")===rb||n[0]===ie?ie+n:n}function yu(n){return(n+="")[0]===ie?n.slice(1):n}function pl(n){return ar(n)in this._}function wl(n){return(n=ar(n))in this._&&delete this._[n]}function bl(){var n=[];for(var t in this._)n.push(yu(t));return n}function kl(){var n=0;for(var t in this._)++n;return n}function dl(){for(var n in this._)return!1;return!0}function so(){this._=Object.create(null)}function v(n){return n}function hk(n,t,i){return function(){var r=i.apply(t,arguments);return r===t?n:r}}function ho(n,t){var i,u,r;if(t in n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0,u=tc.length;u>i;++i)if(r=tc[i]+t,r in n)return r}function l(){}function co(){}function gl(n){function r(){for(var i,r=t,u=-1,f=r.length;++u<f;)(i=r[u].on)&&i.apply(this,arguments);return n}var t=[],i=new at;return r.on=function(r,u){var e,f=i.get(r);return arguments.length<2?f&&f.on:(f&&(f.on=null,t=t.slice(0,e=t.indexOf(f)).concat(t.slice(e+1)),i.remove(r)),u&&t.push(i.set(r,{on:u})),n)},r}function kt(){n.event.preventDefault()}function lo(){for(var i,t=n.event;i=t.sourceEvent;)t=i;return t}function ao(t){for(var i=new co,r=0,u=arguments.length;++r<u;)i[arguments[r]]=gl(i);return i.of=function(r,u){return function(f){try{var e=f.sourceEvent=n.event;f.target=t;n.event=f;i[f.type].apply(r,u)}finally{n.event=e}}},i}function dt(n){return re(n,e),n}function vo(n){return"function"==typeof n?n:function(){return ic(n,this)}}function na(n){return"function"==typeof n?n:function(){return rc(n,this)}}function ta(t,i){function r(){this.removeAttribute(t)}function u(){this.removeAttributeNS(t.space,t.local)}function f(){this.setAttribute(t,i)}function e(){this.setAttributeNS(t.space,t.local,i)}function o(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=n.ns.qualify(t),null==i?t.local?u:r:"function"==typeof i?t.local?s:o:t.local?e:f}function ia(n){return n.trim().replace(/\s+/g," ")}function ra(t){return new RegExp("(?:^|\\s+)"+n.requote(t)+"(?:\\s+|$)","g")}function ua(n){return(n+"").trim().split(/^|\s+/)}function fa(n,t){function r(){for(var r=-1;++r<i;)n[r](this,t)}function u(){for(var r=-1,u=t.apply(this,arguments);++r<i;)n[r](this,u)}n=ua(n).map(ck);var i=n.length;return"function"==typeof t?u:r}function ck(n){var t=ra(n);return function(i,r){if(u=i.classList)return r?u.add(n):u.remove(n);var u=i.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||i.setAttribute("class",ia(u+" "+n))):i.setAttribute("class",ia(u.replace(t," ")))}}function ea(n,t,i){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,i)}function f(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,i)}return null==t?r:"function"==typeof t?f:u}function oa(n,t){function i(){delete this[n]}function r(){this[n]=t}function u(){var i=t.apply(this,arguments);null==i?delete this[n]:this[n]=i}return null==t?i:"function"==typeof t?u:r}function sa(t){function i(){var n=this.ownerDocument,i=this.namespaceURI;return i?n.createElementNS(i,t):n.createElement(t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=n.ns.qualify(t)).local?r:i}function lk(){var n=this.parentNode;n&&n.removeChild(this)}function yo(n){return{__data__:n}}function ha(n){return function(){return uc(this,n)}}function ak(n){return arguments.length||(n=gi),function(t,i){return t&&i?n(t.__data__,i.__data__):!t-!i}}function vt(n,t){for(var i=0,u=n.length;u>i;i++)for(var f,e=n[i],r=0,o=e.length;o>r;r++)(f=e[r])&&t(f,r,i);return n}function ca(n){return re(n,st),n}function vk(n){var t,i;return function(r,u,f){var e,o=n[f].update,s=o.length;for(f!=i&&(i=f,t=0),u>=t&&(t=u+1);!(e=o[t])&&++t<s;);return e}}function la(t,i,r){function o(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function h(){var n=s(i,ot(arguments));o.call(this);this.addEventListener(t,this[u]=n,n.$=r);n._=i}function c(){var u,f=new RegExp("^__on([^.]+)"+n.requote(t)+"$"),i,r;for(i in this)(u=i.match(f))&&(r=this[i],this.removeEventListener(u[1],r,r.$),delete this[i])}var u="__on"+t,f=t.indexOf("."),s=aa,e;return f>0&&(t=t.slice(0,f)),e=fe.get(t),e&&(t=e,s=yk),f?i?h:o:i?l:c}function aa(t,i){return function(r){var u=n.event;n.event=r;i[0]=this.__data__;try{t.apply(this,i)}finally{n.event=u}}}function yk(n,t){var i=aa(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||i.call(t,n)}}function pu(t){var i=".dragsuppress-"+ ++ub,f="click"+i,u=n.select(bt(t)).on("touchmove"+i,kt).on("dragstart"+i,kt).on("selectstart"+i,kt),r,e;return(null==yi&&(yi="onselectstart"in t?!1:ho(t.style,"userSelect")),yi)&&(r=al(t).style,e=r[yi],r[yi]="none"),function(n){if(u.on(i,null),yi&&(r[yi]=e),n){var t=function(){u.on(f,null)};u.on(f,function(){kt();t()},!0);setTimeout(t,0)}}}function po(t,i){var u,r,f,e,o;return(i.changedTouches&&(i=i.changedTouches[0]),u=t.ownerSVGElement||t,u.createSVGPoint)?(r=u.createSVGPoint(),0>ee&&(f=bt(t),(f.scrollX||f.scrollY)&&(u=n.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=u[0][0].getScreenCTM(),ee=!(e.f||e.e),u.remove())),ee?(r.x=i.pageX,r.y=i.pageY):(r.x=i.clientX,r.y=i.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]):(o=t.getBoundingClientRect(),[i.clientX-o.left-t.clientLeft,i.clientY-o.top-t.clientTop])}function pk(){return n.event.changedTouches[0].identifier}function va(n){return n>0?1:0>n?-1:0}function wo(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(t[1]-n[1])*(i[0]-n[0])}function ya(n){return n>1?0:-1>n?f:Math.acos(n)}function gt(n){return n>1?h:-1>n?-h:Math.asin(n)}function wk(n){return((n=Math.exp(n))-1/n)/2}function pa(n){return((n=Math.exp(n))+1/n)/2}function bk(n){return((n=Math.exp(2*n))-1)/(n+1)}function wa(n){return(n=Math.sin(n/2))*n}function si(){}function ft(n,t,i){return this instanceof ft?(this.h=+n,this.s=+t,void(this.l=+i)):arguments.length<2?n instanceof ft?new ft(n.h,n.s,n.l):ga(""+n,nv,ft):new ft(n,t,i)}function bo(n,t,i){function e(n){return n>360?n-=360:0>n&&(n+=360),60>n?r+(u-r)*n/60:180>n?u:240>n?r+(u-r)*(240-n)/60:r}function f(n){return Math.round(255*e(n))}var r,u;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,i=0>i?0:i>1?1:i,u=.5>=i?i*(1+t):i+t-i*t,r=2*i-u,new b(f(n+120),f(n),f(n-120))}function nt(t,i,r){return this instanceof nt?(this.h=+t,this.c=+i,void(this.l=+r)):arguments.length<2?t instanceof nt?new nt(t.h,t.c,t.l):t instanceof tt?ka(t.l,t.a,t.b):ka((t=tv((t=n.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new nt(t,i,r)}function ko(n,t,i){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new tt(i,Math.cos(n*=u)*t,Math.sin(n)*t)}function tt(n,t,i){return this instanceof tt?(this.l=+n,this.a=+t,void(this.b=+i)):arguments.length<2?n instanceof tt?new tt(n.l,n.a,n.b):n instanceof nt?ko(n.h,n.c,n.l):tv((n=b(n)).r,n.g,n.b):new tt(n,t,i)}function ba(n,t,i){var r=(n+16)/116,u=r+t/500,f=r-i/200;return u=go(u)*eb,r=go(r)*ob,f=go(f)*sb,new b(ts(3.2404542*u-1.5371385*r-.4985314*f),ts(-.969266*u+1.8760108*r+.041556*f),ts(.0556434*u-.2040259*r+1.0572252*f))}function ka(n,t,i){return n>0?new nt(Math.atan2(i,t)*s,Math.sqrt(t*t+i*i),n):new nt(NaN,NaN,n)}function go(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function ns(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function ts(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function b(n,t,i){return this instanceof b?(this.r=~~n,this.g=~~t,void(this.b=~~i)):arguments.length<2?n instanceof b?new b(n.r,n.g,n.b):ga(""+n,b,bo):new b(n,t,i)}function da(n){return new b(n>>16,n>>8&255,255&n)}function wu(n){return da(n)+""}function nr(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function ga(n,t,i){var s,u,r,f=0,e=0,o=0;if(s=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=s[2].split(","),s[1]){case"hsl":return i(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(rs(u[0]),rs(u[1]),rs(u[2]))}return(r=eu.get(n))?t(r.r,r.g,r.b):(null==n||"#"!==n.charAt(0)||isNaN(r=parseInt(n.slice(1),16))||(4===n.length?(f=(3840&r)>>4,f=f>>4|f,e=240&r,e=e>>4|e,o=15&r,o=o<<4|o):7===n.length&&(f=(16711680&r)>>16,e=(65280&r)>>8,o=255&r)),t(f,e,o))}function nv(n,t,i){var f,s,e=Math.min(n/=255,t/=255,i/=255),r=Math.max(n,t,i),u=r-e,o=(r+e)/2;return u?(s=.5>o?u/(r+e):u/(2-r-e),f=n==r?(t-i)/u+(i>t?6:0):t==r?(i-n)/u+2:(n-t)/u+4,f*=60):(f=NaN,s=o>0&&1>o?0:f),new ft(f,s,o)}function tv(n,t,i){n=is(n);t=is(t);i=is(i);var u=ns((.4124564*n+.3575761*t+.1804375*i)/eb),r=ns((.2126729*n+.7151522*t+.072175*i)/ob),f=ns((.0193339*n+.119192*t+.9503041*i)/sb);return tt(116*r-16,500*(u-r),200*(r-f))}function is(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function rs(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function o(n){return"function"==typeof n?n:function(){return n}}function us(n){return function(t,i,r){return 2===arguments.length&&"function"==typeof i&&(r=i,i=null),bu(t,i,n,r)}}function bu(t,i,r,u){function c(){var t,n=e.status;if(!n&&dk(e)||n>=200&&300>n||304===n){try{t=r.call(f,e)}catch(i){return void s.error.call(f,i)}s.load.call(f,t)}else s.error.call(f,e)}var f={},s=n.dispatch("beforesend","progress","load","error"),o={},e=new XMLHttpRequest,h=null;return!this.XDomainRequest||"withCredentials"in e||!/^(http(s)?:)?\/\//.test(t)||(e=new XDomainRequest),"onload"in e?e.onload=e.onerror=c:e.onreadystatechange=function(){e.readyState>3&&c()},e.onprogress=function(t){var i=n.event;n.event=t;try{s.progress.call(f,e)}finally{n.event=i}},f.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",f)},f.mimeType=function(n){return arguments.length?(i=null==n?null:n+"",f):i},f.responseType=function(n){return arguments.length?(h=n,f):h},f.response=function(n){return r=n,f},["get","post"].forEach(function(n){f[n]=function(){return f.send.apply(f,[n].concat(ot(arguments)))}}),f.send=function(n,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),e.open(n,t,!0),null==i||"accept"in o||(o.accept=i+",*/*"),e.setRequestHeader)for(var c in o)e.setRequestHeader(c,o[c]);return null!=i&&e.overrideMimeType&&e.overrideMimeType(i),null!=h&&(e.responseType=h),null!=u&&f.on("error",u).on("load",function(n){u(null,n)}),s.beforesend.call(f,e),e.send(null==r?null:r),f},f.abort=function(){return e.abort(),f},n.rebind(f,s,"on"),null==u?f:f.get(kk(u))}function kk(n){return 1===n.length?function(t,i){n(null==t?i:null)}:n}function dk(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function ku(n,t,i){var u=arguments.length,f,r;return 2>u&&(t=0),3>u&&(i=Date.now()),f=i+t,r={c:n,t:f,n:null},ve?ve.n=r:ae=r,ve=r,ye||(pe=clearTimeout(pe),ye=1,hc(fs)),r}function fs(){var t=iv(),n=rv()-t;n>24?(isFinite(n)&&(clearTimeout(pe),pe=setTimeout(fs,n)),ye=0):(ye=1,hc(fs))}function iv(){for(var t=Date.now(),n=ae;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function rv(){for(var t,n=ae,i=1/0;n;)n.c?(n.t<i&&(i=n.t),n=(t=n).n):n=t?t.n=n.n:ae=n.n;return ve=t,i}function es(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function gk(n,t){var i=Math.pow(10,3*r(8-t));return{scale:t>8?function(n){return n/i}:function(n){return n*i},symbol:n}}function nd(t){var e=t.decimal,r=t.thousands,i=t.grouping,u=t.currency,f=i&&r?function(n,t){for(var f=n.length,o=[],s=0,u=i[0],e=0;f>0&&u>0&&(e+u+1>t&&(u=Math.max(1,t-e)),o.push(n.substring(f-=u,f+u)),!((e+=u+1)>t));)u=i[s=(s+1)%i.length];return o.reverse().join(r)}:v;return function(t){var o=cb.exec(t),y=o[1]||" ",s=o[2]||">",b=o[3]||"-",k=o[4]||"",l=o[5],p=+o[6],w=o[7],r=o[8],i=o[9],h=1,a="",c="",d=!1,g=!0,v;switch(r&&(r=+r.substring(1)),(l||"0"===y&&"="===s)&&(l=y="0",s="="),i){case"n":w=!0;i="g";break;case"%":h=100;c="%";i="f";break;case"p":h=100;c="%";i="r";break;case"b":case"o":case"x":case"X":"#"===k&&(a="0"+i.toLowerCase());case"c":g=!1;case"d":d=!0;r=0;break;case"s":h=-1;i="r"}return"$"===k&&(a=u[0],c=u[1]),"r"!=i||r||(i="g"),null!=r&&("g"==i?r=Math.max(1,Math.min(21,r)):("e"==i||"f"==i)&&(r=Math.max(0,Math.min(20,r)))),i=rut.get(i)||td,v=l&&w,function(t){var ft=c,k,ut,u,nt,it,rt,tt,o;return d&&t%1?"":(k=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===b?"":b,0>h?(ut=n.formatPrefix(t,r),t=ut.scale(t),ft=ut.symbol+c):t*=h,t=i(t,r),it=t.lastIndexOf("."),0>it?(rt=g?t.lastIndexOf("e"):-1,0>rt?(u=t,nt=""):(u=t.substring(0,rt),nt=t.substring(rt))):(u=t.substring(0,it),nt=e+t.substring(it+1)),!l&&w&&(u=f(u,1/0)),tt=a.length+u.length+nt.length+(v?0:k.length),o=p>tt?new Array(tt=p-tt+1).join(y):"",v&&(u=f(o+u,o.length?p-nt.length:1/0)),k+=a,t=u+nt,("<"===s?k+t+o:">"===s?o+k+t:"^"===s?o.substring(0,tt>>=1)+k+t+o.substring(tt):k+(v?t:o+t))+ft)}}}function td(n){return n+""}function yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function hi(n,t,i){function e(t){var i=n(t),r=f(i,1);return r-t>t-i?i:r}function u(i){return t(i=n(new y(i-1)),1),i}function f(n,i){return t(n=new y(+n),i),n}function o(n,r,f){var e=u(n),o=[];if(f>1)for(;r>e;)i(e)%f||o.push(new Date(+e)),t(e,1);else for(;r>e;)o.push(new Date(+e)),t(e,1);return o}function s(n,t,i){try{y=yt;var r=new yt;return r._=n,o(r,t,i)}finally{y=Date}}n.floor=n;n.round=e;n.ceil=u;n.offset=f;n.range=o;var r=n.utc=du(n);return r.floor=r,r.round=du(e),r.ceil=du(u),r.offset=du(f),r.range=s,n}function du(n){return function(t,i){try{y=yt;var r=new yt;return r._=t,n(r,i)._}finally{y=Date}}}function id(t){function r(n){function t(t){for(var f,o,h,e=[],r=-1,s=0;++r<i;)37===n.charCodeAt(r)&&(e.push(n.slice(s,r)),null!=(o=lb[f=n.charAt(++r)])&&(f=n.charAt(++r)),(h=u[f])&&(f=h(t,null==o?"e"===f?" ":"0":o)),e.push(f),s=r+1);return e.push(n.slice(s,r)),e.join("")}var i=n.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=f(i,n,t,0),u,r;return e!=t.length?null:("p"in i&&(i.H=i.H%12+12*i.p),u=null!=i.Z&&y!==yt,r=new(u?yt:y),"j"in i?r.setFullYear(i.y,0,i.j):"W"in i||"U"in i?("w"in i||(i.w="W"in i?1:0),r.setFullYear(i.y,0,1),r.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(r.getDay()+5)%7:i.w+7*i.U-(r.getDay()+6)%7)):r.setFullYear(i.y,i.m,i.d),r.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),u?r._:r)},t.toString=function(){return n},t}function f(n,t,i,r){for(var f,e,o,u=0,s=t.length,h=i.length;s>u;){if(r>=h)return-1;if(f=t.charCodeAt(u++),37===f){if(o=t.charAt(u++),e=k[o in lb?t.charAt(u++):o],!e||(r=e(n,i,r))<0)return-1}else if(f!=i.charCodeAt(r++))return-1}return r}function d(n,t,i){v.lastIndex=0;var r=v.exec(t.slice(i));return r?(n.w=ct.get(r[0].toLowerCase()),i+r[0].length):-1}function g(n,t,i){a.lastIndex=0;var r=a.exec(t.slice(i));return r?(n.w=ht.get(r[0].toLowerCase()),i+r[0].length):-1}function nt(n,t,i){b.lastIndex=0;var r=b.exec(t.slice(i));return r?(n.m=at.get(r[0].toLowerCase()),i+r[0].length):-1}function tt(n,t,i){p.lastIndex=0;var r=p.exec(t.slice(i));return r?(n.m=lt.get(r[0].toLowerCase()),i+r[0].length):-1}function it(n,t,i){return f(n,u.c.toString(),t,i)}function rt(n,t,i){return f(n,u.x.toString(),t,i)}function ut(n,t,i){return f(n,u.X.toString(),t,i)}function ft(n,t,i){var r=l.get(t.slice(i,i+=2).toLowerCase());return null==r?-1:(n.p=r,i)}var et=t.dateTime,ot=t.date,st=t.time,c=t.periods,e=t.days,o=t.shortDays,s=t.months,h=t.shortMonths,u,k;r.utc=function(n){function t(n){try{y=yt;var t=new y;return t._=n,i(t)}finally{y=Date}}var i=r(n);return t.parse=function(n){try{y=yt;var t=i.parse(n);return t&&t._}finally{y=Date}},t.toString=i.toString,t};r.multi=r.utc.multi=bd;var l=n.map(),a=gu(e),ht=nf(e),v=gu(o),ct=nf(o),p=gu(s),lt=nf(s),b=gu(h),at=nf(h);return c.forEach(function(n,t){l.set(n.toLowerCase(),t)}),u={a:function(n){return o[n.getDay()]},A:function(n){return e[n.getDay()]},b:function(n){return h[n.getMonth()]},B:function(n){return s[n.getMonth()]},c:r(et),d:function(n,t){return w(n.getDate(),t,2)},e:function(n,t){return w(n.getDate(),t,2)},H:function(n,t){return w(n.getHours(),t,2)},I:function(n,t){return w(n.getHours()%12||12,t,2)},j:function(n,t){return w(1+i.dayOfYear(n),t,3)},L:function(n,t){return w(n.getMilliseconds(),t,3)},m:function(n,t){return w(n.getMonth()+1,t,2)},M:function(n,t){return w(n.getMinutes(),t,2)},p:function(n){return c[+(n.getHours()>=12)]},S:function(n,t){return w(n.getSeconds(),t,2)},U:function(n,t){return w(i.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return w(i.mondayOfYear(n),t,2)},x:r(ot),X:r(st),y:function(n,t){return w(n.getFullYear()%100,t,2)},Y:function(n,t){return w(n.getFullYear()%1e4,t,4)},Z:pd,"%":function(){return"%"}},k={a:d,A:g,b:nt,B:tt,c:it,d:uv,e:uv,H:fv,I:fv,j:ld,L:yd,m:cd,M:ad,p:ft,S:vd,U:ud,w:rd,W:fd,x:rt,X:ut,y:od,Y:ed,Z:sd,"%":wd},r}function w(n,t,i){var u=0>n?"-":"",r=(u?-n:n)+"",f=r.length;return u+(i>f?new Array(i-f+1).join(t)+r:r)}function gu(t){return new RegExp("^(?:"+t.map(n.requote).join("|")+")","i")}function nf(n){for(var i=new at,t=-1,r=n.length;++t<r;)i.set(n[t].toLowerCase(),t);return i}function rd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+1));return r?(n.w=+r[0],i+r[0].length):-1}function ud(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.U=+r[0],i+r[0].length):-1}function fd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i));return r?(n.W=+r[0],i+r[0].length):-1}function ed(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+4));return r?(n.y=+r[0],i+r[0].length):-1}function od(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.y=hd(+r[0]),i+r[0].length):-1}function sd(n,t,i){return/^[+-]\d{4}$/.test(t=t.slice(i,i+5))?(n.Z=-t,i+5):-1}function hd(n){return n+(n>68?1900:2e3)}function cd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.m=r[0]-1,i+r[0].length):-1}function uv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.d=+r[0],i+r[0].length):-1}function ld(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.j=+r[0],i+r[0].length):-1}function fv(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.H=+r[0],i+r[0].length):-1}function ad(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.M=+r[0],i+r[0].length):-1}function vd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+2));return r?(n.S=+r[0],i+r[0].length):-1}function yd(n,t,i){c.lastIndex=0;var r=c.exec(t.slice(i,i+3));return r?(n.L=+r[0],i+r[0].length):-1}function pd(n){var t=n.getTimezoneOffset(),i=t>0?"-":"+",u=r(t)/60|0,f=r(t)%60;return i+w(u,"0",2)+w(f,"0",2)}function wd(n,t,i){ab.lastIndex=0;var r=ab.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function bd(n){for(var i=n.length,t=-1;++t<i;)n[t][0]=this(n[t][0]);return function(t){for(var r=0,i=n[r];!i[1](t);)i=n[++r];return i[0](t)}}function os(){}function ev(n,t,i){var r=i.s=n+t,u=r-n,f=r-u;i.t=n-f+(t-u)}function tf(n,t){n&&ac.hasOwnProperty(n.type)&&ac[n.type](n,t)}function ss(n,t,i){var r,u=-1,f=n.length-i;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ov(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)ss(n[i],t,1);t.polygonEnd()}function kd(){function r(r,e){r*=u;e=e*u/2+f/4;var o=r-n,s=o>=0?1:-1,h=s*o,c=Math.cos(e),l=Math.sin(e),a=i*l,v=t*c+a*Math.cos(h),y=a*s*Math.sin(h);ti.add(Math.atan2(y,v));n=r;t=c;i=l}var e,o,n,t,i;k.point=function(s,h){k.point=r;n=(e=s)*u;t=Math.cos(h=(o=h)*u/2+f/4);i=Math.sin(h)};k.lineEnd=function(){r(e,o)}}function ci(n){var t=n[0],i=n[1],r=Math.cos(i);return[r*Math.cos(t),r*Math.sin(t),Math.sin(i)]}function rf(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function tr(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function hs(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function uf(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ff(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function ef(n){return[Math.atan2(n[1],n[0]),gt(n[2])]}function of(n,i){return r(n[0]-i[0])<t&&r(n[1]-i[1])<t}function cs(n,t){n*=u;var i=Math.cos(t*=u);vr(i*Math.cos(n),i*Math.sin(n),Math.sin(t))}function vr(n,t,i){++su;pi+=(n-pi)/su;wi+=(t-wi)/su;wt+=(i-wt)/su}function sv(){function r(r,f){r*=u;var c=Math.cos(f*=u),o=c*Math.cos(r),s=c*Math.sin(r),h=Math.sin(f),e=Math.atan2(Math.sqrt((e=t*h-i*s)*e+(e=i*o-n*h)*e+(e=n*s-t*o)*e),n*o+t*s+i*h);be+=e;ii+=e*(n+(n=o));ri+=e*(t+(t=s));ct+=e*(i+(i=h));vr(n,t,i)}var n,t,i;rt.point=function(f,e){f*=u;var o=Math.cos(e*=u);n=o*Math.cos(f);t=o*Math.sin(f);i=Math.sin(e);rt.point=r;vr(n,t,i)}}function hv(){rt.point=cs}function dd(){function r(r,f){r*=u;var p=Math.cos(f*=u),e=p*Math.cos(r),o=p*Math.sin(r),s=Math.sin(f),c=t*s-i*o,l=i*e-n*s,a=n*o-t*e,v=Math.sqrt(c*c+l*l+a*a),w=n*e+t*o+i*s,y=v&&-ya(w)/v,h=Math.atan2(v,w);sr+=y*c;hr+=y*l;ui+=y*a;be+=h;ii+=h*(n+(n=e));ri+=h*(t+(t=o));ct+=h*(i+(i=s));vr(n,t,i)}var f,e,n,t,i;rt.point=function(o,s){f=o;e=s;rt.point=r;o*=u;var h=Math.cos(s*=u);n=h*Math.cos(o);t=h*Math.sin(o);i=Math.sin(s);vr(n,t,i)};rt.lineEnd=function(){r(f,e);rt.lineEnd=hv;rt.point=cs}}function cv(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),i}function yr(){return!0}function lv(n,t,i,r,u){var h=[],s=[],o,l,v,f,c,a,e;if(n.forEach(function(n){var o,i,f,e,t,r;if(!((o=n.length-1)<=0)){if(i=n[0],f=n[o],of(i,f)){for(u.lineStart(),e=0;o>e;++e)u.point((i=n[e])[0],i[1]);return void u.lineEnd()}t=new sf(i,n,null,!0);r=new sf(i,null,t,!1);t.o=r;h.push(t);s.push(r);t=new sf(f,n,null,!1);r=new sf(f,null,t,!0);t.o=r;h.push(t);s.push(r)}}),s.sort(t),av(h),av(s),h.length){for(var e=0,y=i,a=s.length;a>e;++e)s[e].e=y=!y;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z;u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,a=o.length;a>e;++e)u.point((l=o[e])[0],l[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((l=o[e])[0],l[1]);else r(f.x,f.p.x,-1,u);f=f.p}f=f.o;o=f.z;c=!c}while(!f.v);u.lineEnd()}}}function av(n){if(r=n.length){for(var r,t,u=0,i=n[0];++u<r;)i.n=t=n[u],t.p=i,i=t;i.n=t=n[0];t.p=i}}function sf(n,t,i,r){this.x=n;this.z=t;this.o=i;this.e=r;this.v=!1;this.n=this.p=null}function vv(t,i,r,u){return function(f,e){function v(n,i){var r=f(n,i);t(n=r[0],i=r[1])&&e.point(n,i)}function d(n,t){var i=f(n,t);y.point(i[0],i[1])}function p(){o.point=d;y.lineStart()}function w(){o.point=v;y.lineEnd()}function b(n,t){c.push([n,t]);var i=f(n,t);a.point(i[0],i[1])}function g(){a.lineStart();c=[]}function nt(){var f,t,r;b(c[0][0],c[0][1]);a.lineEnd();var i,u=a.clean(),n=k.buffer(),t=n.length;if(c.pop(),l.push(c),c=null,t)if(1&u){if(i=n[0],t=i.length-1,r=-1,t>0){for(s||(e.polygonStart(),s=!0),e.lineStart();++r<t;)e.point((f=i[r])[0],f[1]);e.lineEnd()}}else t>1&&2&u&&n.push(n.pop().concat(n.shift())),h.push(n.filter(gd))}var h,l,c,y=i(e),tt=f.invert(u[0],u[1]),o={point:v,lineStart:p,lineEnd:w,polygonStart:function(){o.point=b;o.lineStart=g;o.lineEnd=nt;h=[];l=[]},polygonEnd:function(){o.point=v;o.lineStart=p;o.lineEnd=w;h=n.merge(h);var t=ug(tt,l);h.length?(s||(e.polygonStart(),s=!0),lv(h,ng,t,r,e)):t&&(s||(e.polygonStart(),s=!0),e.lineStart(),r(null,null,1,e),e.lineEnd());s&&(e.polygonEnd(),s=!1);h=l=null},sphere:function(){e.polygonStart();e.lineStart();r(null,null,1,e);e.lineEnd();e.polygonEnd()}},k=yv(),a=i(k),s=!1;return o}}function gd(n){return n.length>1}function yv(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,i){t.push([n,i])},lineEnd:l,buffer:function(){var i=n;return n=[],t=null,i},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function ng(n,i){return((n=n.x)[0]<0?n[1]-h-t:h-n[1])-((i=i.x)[0]<0?i[1]-h-t:h-i[1])}function tg(n){var o,u=NaN,i=NaN,e=NaN;return{lineStart:function(){n.lineStart();o=1},point:function(s,c){var l=s>0?f:-f,a=r(s-u);r(a-f)<t?(n.point(u,i=(i+c)/2>0?h:-h),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),n.point(s,i),o=0):e!==l&&a>=f&&(r(u-e)<t&&(u-=e*t),r(s-l)<t&&(s-=l*t),i=ig(u,i,s,c),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(l,i),o=0);n.point(u=s,i=c);e=l},lineEnd:function(){n.lineEnd();u=i=NaN},clean:function(){return 2-o}}}function ig(n,i,u,f){var e,o,s=Math.sin(n-u);return r(s)>t?Math.atan((Math.sin(i)*(o=Math.cos(f))*Math.sin(u)-Math.sin(f)*(e=Math.cos(i))*Math.sin(n))/(e*o*s)):(i+f)/2}function rg(n,i,u,e){var o,s;null==n?(o=u*h,e.point(-f,o),e.point(0,o),e.point(f,o),e.point(f,0),e.point(f,-o),e.point(0,-o),e.point(-f,-o),e.point(-f,0),e.point(-f,o)):r(n[0]-i[0])>t?(s=n[0]<i[0]?f:-f,o=u*s/2,e.point(-s,o),e.point(0,o),e.point(s,o)):e.point(i[0],i[1])}function ug(n,i){var e=n[0],nt=n[1],ct=[Math.sin(e),-Math.cos(e),0],a=0,tt=0,o,it,s,v,u,k,g;for(ti.reset(),o=0,it=i.length;it>o;++o)if(s=i[o],v=s.length,v)for(var h=s[0],y=h[0],rt=h[1]/2+f/4,ut=Math.sin(rt),ft=Math.cos(rt),c=1;;){c===v&&(c=0);n=s[c];var p=n[0],et=n[1]/2+f/4,ot=Math.sin(et),st=Math.cos(et),r=p-y,w=r>=0?1:-1,b=w*r,l=b>f,ht=ut*ot;if((ti.add(Math.atan2(ht*w*Math.sin(b),ft*st+ht*Math.cos(b))),a+=l?r+w*d:r,l^y>=e^p>=e)&&(u=tr(ci(h),ci(n)),ff(u),k=tr(ct,u),ff(k),g=(l^r>=0?-1:1)*gt(k[2]),(nt>g||nt===g&&(u[0]||u[1]))&&(tt+=l^r>=0?1:-1)),!c++)break;y=p;ut=ot;ft=st;h=n}return(-t>a||t>a&&0>ti)^1&tt}function fg(n){function s(n,t){return Math.cos(n)*Math.cos(t)>i}function c(n){var i,a,r,c,u;return{lineStart:function(){c=r=!1;u=1},point:function(v,y){var w,p=[v,y],b=s(v,y),d=e?b?0:h(v,y):b?h(v+(0>v?f:-f),y):0,k;(!i&&(c=r=b)&&n.lineStart(),b!==r&&(w=o(i,p),(of(i,w)||of(p,w))&&(p[0]+=t,p[1]+=t,b=s(p[0],p[1]))),b!==r)?(u=0,b?(n.lineStart(),w=o(p,i),n.point(w[0],w[1])):(w=o(i,p),n.point(w[0],w[1]),n.lineEnd()),i=w):l&&i&&e^b&&(d&a||!(k=o(p,i,!0))||(u=0,e?(n.lineStart(),n.point(k[0][0],k[0][1]),n.point(k[1][0],k[1][1]),n.lineEnd()):(n.point(k[1][0],k[1][1]),n.lineEnd(),n.lineStart(),n.point(k[0][0],k[0][1]))));!b||i&&of(i,p)||n.point(p[0],p[1]);i=p;r=b;a=d},lineEnd:function(){r&&n.lineEnd();i=null},clean:function(){return u|(c&&r)<<1}}}function o(n,u,e){var et=ci(n),ot=ci(u),rt=[1,0,0],a=tr(et,ot),ut=rf(a,a),b=a[0],k=ut-b*b,g,o,it;if(!k)return!e&&n;var st=i*ut/k,ht=-i*b/k,ct=tr(rt,a),s=uf(rt,st),lt=uf(a,ht);hs(s,lt);var v=ct,p=rf(s,v),d=rf(v,v),ft=p*p-d*(rf(s,s)-1);if(!(0>ft)){if(g=Math.sqrt(ft),o=uf(v,(-p-g)/d),hs(o,s),o=ef(o),!e)return o;var w,h=n[0],y=u[0],c=n[1],l=u[1];h>y&&(w=h,h=y,y=w);var nt=y-h,tt=r(nt-f)<t,at=tt||t>nt;if(!tt&&c>l&&(w=c,c=l,l=w),at?tt?c+l>0^o[1]<(r(o[0]-h)<t?c:l):c<=o[1]&&o[1]<=l:nt>f^(h<=o[0]&&o[0]<=y))return it=uf(v,(-p+g)/d),hs(it,s),[o,ef(it)]}}function h(t,i){var u=e?n:f-n,r=0;return-u>t?r|=1:t>u&&(r|=2),-u>i?r|=4:i>u&&(r|=8),r}var i=Math.cos(n),e=i>0,l=r(i)>t,a=ys(n,6*u);return vv(s,c,a,e?[0,-n]:[-f,n-f])}function pv(n,t,i,r){return function(u){var f,a=u.a,v=u.b,c=a.x,l=a.y,y=v.x,p=v.y,e=0,o=1,s=y-c,h=p-l;if(f=n-c,s||!(f>0)){if(f/=s,0>s){if(e>f)return;o>f&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=i-c,s||!(0>f)){if(f/=s,0>s){if(f>o)return;f>e&&(e=f)}else if(s>0){if(e>f)return;o>f&&(o=f)}if(f=t-l,h||!(f>0)){if(f/=h,0>h){if(e>f)return;o>f&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=r-l,h||!(0>f)){if(f/=h,0>h){if(f>o)return;f>e&&(e=f)}else if(h>0){if(e>f)return;o>f&&(o=f)}return e>0&&(u.a={x:c+e*s,y:l+e*h}),1>o&&(u.b={x:c+o*s,y:l+o*h}),u}}}}}}function wv(i,u,f,e){function o(n,e){return r(n[0]-i)<t?e>0?0:3:r(n[0]-f)<t?e>0?2:1:r(n[1]-u)<t?e>0?1:0:e>0?3:2}function h(n,t){return s(n.x,t.x)}function s(n,t){var i=o(n,1),r=o(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-t[0]:2===i?n[1]-t[1]:t[0]-n[0]}return function(t){function ft(n){for(var r=0,s=c.length,u=n[1],f=0;s>f;++f)for(var t,e=1,o=c[f],h=o.length,i=o[0];h>e;++e)t=o[e],i[1]<=u?t[1]>u&&wo(i,t,n)>0&&++r:t[1]<=u&&wo(i,t,n)<0&&--r,i=t;return 0!==r}function d(n,t,r,h){var c=0,l=0;if(null==n||(c=o(n,r))!==(l=o(t,r))||s(n,t)<0^r>0){do h.point(0===c||3===c?i:f,c>1?e:u);while((c=(c+r+4)%4)!==l)}else h.point(t[0],t[1])}function g(n,t){return n>=i&&f>=n&&t>=u&&e>=t}function nt(n,i){g(n,i)&&t.point(n,i)}function et(){k.point=tt;c&&c.push(v=[]);w=!0;l=!1;y=p=NaN}function ot(){r&&(tt(it,rt),ut&&l&&b.rejoin(),r.push(b.buffer()));k.point=nt;l&&t.lineEnd()}function tt(n,i){var r,u;n=Math.max(-ke,Math.min(ke,n));i=Math.max(-ke,Math.min(ke,i));r=g(n,i);(c&&v.push([n,i]),w)?(it=n,rt=i,ut=r,w=!1,r&&(t.lineStart(),t.point(n,i))):r&&l?t.point(n,i):(u={a:{x:y,y:p},b:{x:n,y:i}},ht(u)?(l||(t.lineStart(),t.point(u.a.x,u.a.y)),t.point(u.b.x,u.b.y),r||t.lineEnd(),a=!1):r&&(t.lineStart(),t.point(n,i),a=!1));y=n;p=i;l=r}var r,c,v,it,rt,ut,y,p,l,w,a,st=t,b=yv(),ht=pv(i,u,f,e),k={point:nt,lineStart:et,lineEnd:ot,polygonStart:function(){t=b;r=[];c=[];a=!0},polygonEnd:function(){t=st;r=n.merge(r);var u=ft([i,e]),f=a&&u,o=r.length;(f||o)&&(t.polygonStart(),f&&(t.lineStart(),d(null,null,1,t),t.lineEnd()),o&&lv(r,h,u,d,t),t.polygonEnd());r=c=v=null}};return k}}function ls(n){var t=0,i=f/3,r=as(n),u=r(t,i);return u.parallels=function(n){return arguments.length?r(t=n[0]*f/180,i=n[1]*f/180):[t/f*180,i/f*180]},u}function bv(n,t){function f(n,t){var r=Math.sqrt(u-2*i*Math.sin(t))/i;return[r*Math.sin(n*=i),e-r*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),e=Math.sqrt(u)/i;return f.invert=function(n,t){var r=e-t;return[Math.atan2(n,r)/i,gt((u-(n*n+r*r)*i*i)/(2*i))]},f}function eg(){function i(i,r){yc+=t*i-n*r;n=i;t=r}var r,u,n,t;fi.point=function(f,e){fi.point=i;r=n=f;u=t=e};fi.lineEnd=function(){i(r,u)}}function og(n,t){de>n&&(de=n);n>no&&(no=n);ge>t&&(ge=t);t>to&&(to=t)}function sg(){function i(n,i){t.push("M",n,",",i,u)}function f(i,r){t.push("M",i,",",r);n.point=e}function e(n,i){t.push("L",n,",",i)}function r(){n.point=i}function o(){t.push("Z")}var u=kv(4.5),t=[],n={point:i,lineStart:function(){n.point=f},lineEnd:r,polygonStart:function(){n.lineEnd=o},polygonEnd:function(){n.lineEnd=r;n.point=i},pointRadius:function(t){return u=kv(t),n},result:function(){if(t.length){var n=t.join("");return t=[],n}}};return n}function kv(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function li(n,t){pi+=n;wi+=t;++wt}function dv(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ii+=u*(n+i)/2;ri+=u*(t+r)/2;ct+=u;li(n=i,t=r)}var n,t;ut.point=function(r,u){ut.point=i;li(n=r,t=u)}}function gv(){ut.point=li}function hg(){function i(i,r){var f=i-n,e=r-t,u=Math.sqrt(f*f+e*e);ii+=u*(n+i)/2;ri+=u*(t+r)/2;ct+=u;u=t*i-n*r;sr+=u*(n+i);hr+=u*(t+r);ui+=3*u;li(n=i,t=r)}var r,u,n,t;ut.point=function(f,e){ut.point=i;li(r=n=f,u=t=e)};ut.lineEnd=function(){i(r,u)}}function cg(n){function i(t,i){n.moveTo(t+r,i);n.arc(t,i,r,0,d)}function f(i,r){n.moveTo(i,r);t.point=e}function e(t,i){n.lineTo(t,i)}function u(){t.point=i}function o(){n.closePath()}var r=4.5,t={point:i,lineStart:function(){t.point=f},lineEnd:u,polygonStart:function(){t.lineEnd=o},polygonEnd:function(){t.lineEnd=u;t.point=i},pointRadius:function(n){return r=n,t},result:l};return t}function ny(n){function o(n){return(e?h:s)(n)}function s(t){return iy(t,function(i,r){i=n(i,r);t.point(i[0],i[1])})}function h(t){function y(i,r){i=n(i,r);t.point(i[0],i[1])}function c(){u=NaN;r.point=l;t.lineStart()}function l(r,c){var l=ci([r,c]),a=n(r,c);i(u,f,v,o,s,h,u=a[0],f=a[1],v=r,o=l[0],s=l[1],h=l[2],e,t);t.point(u,f)}function a(){r.point=y;t.lineEnd()}function nt(){c();r.point=tt;r.lineEnd=it}function tt(n,t){l(p=n,rt=t);w=u;b=f;k=o;d=s;g=h;r.point=l}function it(){i(u,f,v,o,s,h,w,b,p,k,d,g,e,t);r.lineEnd=a;a()}var p,rt,w,b,k,d,g,v,u,f,o,s,h,r={point:y,lineStart:c,lineEnd:a,polygonStart:function(){t.polygonStart();r.lineStart=nt},polygonEnd:function(){t.polygonEnd();r.lineStart=c}};return r}function i(u,e,o,s,h,l,a,v,y,p,w,b,k,d){var it=a-u,rt=v-e,et=it*it+rt*rt;if(et>4*f&&k--){var nt=s+p,tt=h+w,g=l+b,ot=Math.sqrt(nt*nt+tt*tt+g*g),vt=Math.asin(g/=ot),st=r(r(g)-1)<t||r(o-y)<t?(o+y)/2:Math.atan2(tt,nt),ht=n(st,vt),ut=ht[0],ft=ht[1],ct=ut-u,lt=ft-e,at=rt*ct-it*lt;(at*at/et>f||r((it*ct+rt*lt)/et-.5)>.3||c>s*p+h*w+l*b)&&(i(u,e,o,s,h,l,ut,ft,st,nt/=ot,tt/=ot,g,k,d),d.point(ut,ft),i(ut,ft,st,nt,tt,g,a,v,y,p,w,b,k,d))}}var f=.5,c=Math.cos(30*u),e=16;return o.precision=function(n){return arguments.length?(e=(f=n*n)>0&&16,o):Math.sqrt(f)},o}function lg(n){var t=ny(function(t,i){return n([t*s,i*s])});return function(n){return ry(t(n))}}function ty(n){this.stream=n}function iy(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ni(n){return as(function(){return n})()}function as(t){function i(n){return n=a(n[0]*u,n[1]*u),[n[0]*r+h,c-n[1]*r]}function et(n){return n=a.invert((n[0]-h)/r,(c-n[1])/r),n&&[n[0]*s,n[1]*s]}function e(){a=cv(tt=vs(k,d,g),o);var n=o(w,b);return h=y-n[0]*r,c=p+n[1]*r,l()}function l(){return f&&(f.valid=!1,f=null),i}var o,tt,a,h,c,f,it=ny(function(n,t){return n=o(n,t),[n[0]*r+h,c-n[1]*r]}),r=150,y=480,p=250,w=0,b=0,k=0,d=0,g=0,rt=vb,ut=v,nt=null,ft=null;return i.stream=function(n){return f&&(f.valid=!1),f=ry(rt(tt,it(ut(n)))),f.valid=!0,f},i.clipAngle=function(n){return arguments.length?(rt=null==n?(nt=n,vb):fg((nt=+n)*u),l()):nt},i.clipExtent=function(n){return arguments.length?(ft=n,ut=n?wv(n[0][0],n[0][1],n[1][0],n[1][1]):v,l()):ft},i.scale=function(n){return arguments.length?(r=+n,e()):r},i.translate=function(n){return arguments.length?(y=+n[0],p=+n[1],e()):[y,p]},i.center=function(n){return arguments.length?(w=n[0]%360*u,b=n[1]%360*u,e()):[w*s,b*s]},i.rotate=function(n){return arguments.length?(k=n[0]%360*u,d=n[1]%360*u,g=n.length>2?n[2]%360*u:0,e()):[k*s,d*s,g*s]},n.rebind(i,it,"precision"),function(){return o=t.apply(this,arguments),i.invert=o.invert&&et,e()}}function ry(n){return iy(n,function(t,i){n.point(t*u,i*u)})}function pr(n,t){return[n,t]}function uy(n,t){return[n>f?n-d:-f>n?n+d:n,t]}function vs(n,t,i){return n?t||i?cv(ey(n),oy(t,i)):ey(n):t||i?oy(t,i):uy}function fy(n){return function(t,i){return t+=n,[t>f?t-d:-f>t?t+d:t,i]}}function ey(n){var t=fy(n);return t.invert=fy(-n),t}function oy(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*i+o*r;return[Math.atan2(s*u-c*f,o*i-h*r),gt(c*u+s*f)]}var i=Math.cos(n),r=Math.sin(n),u=Math.cos(t),f=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,s=Math.sin(n)*e,h=Math.sin(t),c=h*u-s*f;return[Math.atan2(s*u+h*f,o*i+c*r),gt(c*i-o*r)]},e}function ys(n,t){var i=Math.cos(n),r=Math.sin(n);return function(u,f,e,o){var h=e*t,c,s;for(null!=u?(u=sy(i,u),f=sy(i,f),(e>0?f>u:u>f)&&(u+=e*d)):(u=n+e*d,f=n-.5*h),s=u;e>0?s>f:f>s;s-=h)o.point((c=ef([i,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function sy(n,i){var r=ci(i),u;return r[0]-=n,ff(r),u=ya(-r[1]),((-r[2]<0?-u:u)+2*Math.PI-t)%(2*Math.PI)}function hy(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[n,t]})}}function cy(i,r,u){var f=n.range(i,r-t,u).concat(r);return function(n){return f.map(function(t){return[t,n]})}}function ps(n){return n.source}function ws(n){return n.target}function ag(n,t,i,r){var f=Math.cos(t),c=Math.sin(t),e=Math.cos(r),l=Math.sin(r),a=f*Math.cos(n),v=f*Math.sin(n),y=e*Math.cos(i),p=e*Math.sin(i),u=2*Math.asin(Math.sqrt(wa(r-t)+f*e*wa(i-n))),o=1/Math.sin(u),h=u?function(n){var t=Math.sin(n*=u)*o,i=Math.sin(u-n)*o,r=i*a+t*y,f=i*v+t*p,e=i*c+t*l;return[Math.atan2(f,r)*s,Math.atan2(e,Math.sqrt(r*r+f*f))*s]}:function(){return[n*s,t*s]};return h.distance=u,h}function vg(){function f(f,e){var h=Math.sin(e*=u),s=Math.cos(e),o=r((f*=u)-i),c=Math.cos(o);pc+=Math.atan2(Math.sqrt((o=s*Math.sin(o))*o+(o=t*h-n*s*c)*o),n*h+t*s*c);i=f;n=h;t=s}var i,n,t;bi.point=function(r,e){i=r*u;n=Math.sin(e*=u);t=Math.cos(e);bi.point=f};bi.lineEnd=function(){bi.point=bi.lineEnd=l}}function wr(n,t){function i(t,i){var f=Math.cos(t),r=Math.cos(i),u=n(f*r);return[u*r*Math.sin(t),u*Math.sin(i)]}return i.invert=function(n,i){var r=Math.sqrt(n*n+i*i),u=t(r),f=Math.sin(u),e=Math.cos(u);return[Math.atan2(n*f,r*e),Math.asin(r&&i*f/r)]},i}function ly(n,i){function o(n,i){u>0?-h+t>i&&(i=-h+t):i>h-t&&(i=h-t);var f=u/Math.pow(e(i),r);return[f*Math.sin(r*n),u-f*Math.cos(r*n)]}var s=Math.cos(n),e=function(n){return Math.tan(f/4+n/2)},r=n===i?Math.sin(n):Math.log(s/Math.cos(i))/Math.log(e(i)/e(n)),u=s*Math.pow(e(n),r)/r;return r?(o.invert=function(n,t){var i=u-t,f=va(r)*Math.sqrt(n*n+i*i);return[Math.atan2(n,i)/r,2*Math.atan(Math.pow(u/f,1/r))-h]},o):hf}function ay(n,i){function e(n,t){var i=f-t;return[i*Math.sin(u*n),f-i*Math.cos(u*n)]}var o=Math.cos(n),u=n===i?Math.sin(n):(o-Math.cos(i))/(i-n),f=o/u+n;return r(u)<t?pr:(e.invert=function(n,t){var i=f-t;return[Math.atan2(n,i)/u,f-va(u)*Math.sqrt(n*n+i*i)]},e)}function hf(n,t){return[n,Math.log(Math.tan(f/4+t/2))]}function vy(n){var i,t=ni(n),r=t.scale,u=t.translate,e=t.clipExtent;return t.scale=function(){var n=r.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.translate=function(){var n=u.apply(t,arguments);return n===t?i?t.clipExtent(null):t:n},t.clipExtent=function(n){var h=e.apply(t,arguments),o,s;return h===t?(i=null==n)&&(o=f*r(),s=u(),e([[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]])):i&&(h=null),h},t.clipExtent(null)}function bs(n,t){return[Math.log(Math.tan(f/4+t/2)),-n]}function ir(n){return n[0]}function br(n){return n[1]}function yy(n){for(var u=n.length,i=[0,1],t=2,r=2;u>r;r++){for(;t>1&&wo(n[i[t-2]],n[i[t-1]],n[r])<=0;)--t;i[t++]=r}return i.slice(0,t)}function yg(n,t){return n[0]-t[0]||n[1]-t[1]}function ks(n,t,i){return(i[0]-t[0])*(n[1]-t[1])<(i[1]-t[1])*(n[0]-t[0])}function ds(n,t,i,r){var u=n[0],e=i[0],o=t[0]-u,s=r[0]-e,f=n[1],h=i[1],c=t[1]-f,l=r[1]-h,a=(s*(f-h)-l*(u-e))/(l*o-s*c);return[u+a*o,f+a*c]}function py(n){var t=n[0],i=n[n.length-1];return!(t[0]-i[0]||t[1]-i[1])}function pg(){af(this);this.edge=this.site=this.circle=null}function wy(n){var t=tl.pop()||new pg;return t.site=n,t}function gs(n){ur(n);lr.remove(n);tl.push(n);af(n)}function wg(n){var a=n.circle,o=a.x,s=a.cy,v={x:o,y:s},h=n.P,c=n.N,f=[n],u,i,e,l;for(gs(n),u=h;u.circle&&r(o-u.circle.x)<t&&r(s-u.circle.cy)<t;)h=u.P,f.unshift(u),gs(u),u=h;for(f.unshift(u),ur(u),i=c;i.circle&&r(o-i.circle.x)<t&&r(s-i.circle.cy)<t;)c=i.N,f.push(i),gs(i),i=c;for(f.push(i),ur(i),l=f.length,e=1;l>e;++e)i=f[e],u=f[e-1],cf(i.edge,u.site,i.site,v);u=f[0];i=f[l-1];i.edge=kr(u.site,i.site,null,v);rr(u);rr(i)}function bg(n){for(var f,i,r,a,v,b=n.x,k=n.y,u=lr._;u;)if(a=by(u,k)-b,a>t)u=u.L;else{if(v=b-kg(u,k),!(v>t)){a>-t?(i=u.P,r=u):v>-t?(i=u,r=u.N):i=r=u;break}if(!u.R){i=u;break}u=u.R}if(f=wy(n),lr.insert(i,f),i||r){if(i===r)return ur(i),r=wy(i.site),lr.insert(f,r),f.edge=r.edge=kr(i.site,f.site),rr(i),void rr(r);if(!r)return void(f.edge=kr(i.site,f.site));ur(i);ur(r);var e=i.site,y=e.x,p=e.y,o=n.x-y,s=n.y-p,h=r.site,c=h.x-y,l=h.y-p,d=2*(o*l-s*c),g=o*o+s*s,nt=c*c+l*l,w={x:(l*g-s*nt)/d+y,y:(o*nt-c*g)/d+p};cf(r.edge,e,h,w);f.edge=kr(e,n,null,w);r.edge=kr(n,h,null,w);rr(i);rr(r)}}function by(n,t){var i=n.site,u=i.x,l=i.y,f=l-t,e;if(!f)return u;if(e=n.P,!e)return-(1/0);i=e.site;var o=i.x,a=i.y,r=a-t;if(!r)return o;var s=o-u,h=1/f-1/r,c=s/r;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*r)-a+r/2+l-f/2)))/h+u:(u+o)/2}function kg(n,t){var r=n.N,i;return r?by(r,t):(i=n.site,i.y===t?i.x:1/0)}function ky(n){this.site=n;this.edges=[]}function dg(n){for(var i,u,f,e,o,s,h,y,w,p,c=n[0][0],l=n[1][0],a=n[0][1],v=n[1][1],b=ki,k=b.length;k--;)if(o=b[k],o&&o.prepare())for(h=o.edges,y=h.length,s=0;y>s;)p=h[s].end(),f=p.x,e=p.y,w=h[++s%y].start(),i=w.x,u=w.y,(r(f-i)>t||r(e-u)>t)&&(h.splice(s,0,new lf(rn(o.site,p,r(f-c)<t&&v-e>t?{x:c,y:r(i-c)<t?u:v}:r(e-v)<t&&l-f>t?{x:r(u-v)<t?i:l,y:v}:r(f-l)<t&&e-a>t?{x:l,y:r(i-l)<t?u:a}:r(e-a)<t&&f-c>t?{x:r(u-a)<t?i:c,y:a}:null),o.site,null)),++y)}function dy(n,t){return t.angle-n.angle}function gg(){af(this);this.x=this.y=this.arc=this.site=this.cy=null}function rr(n){var w=n.P,b=n.N,u,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h.x,a=h.y,f=s.x-l,e=s.y-a,o=c.x-l,r=c.y-a,v=2*(f*r-e*o);if(!(v>=-oe)){var k=f*f+e*e,d=o*o+r*r,y=(r*k-e*d)/v,p=(f*d-o*k)/v,r=p+a,i=il.pop()||new gg;for(i.arc=n,i.site=h,i.x=y+l,i.y=r+Math.sqrt(y*y+p*p),i.cy=r,n.circle=i,u=null,t=cu._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x){if(!t.L){u=t.P;break}t=t.L}else{if(!t.R){u=t;break}t=t.R}cu.insert(u,i);u||(nl=i)}}}}function ur(n){var t=n.circle;t&&(t.P||(nl=t.N),cu.remove(t),il.push(t),af(t),n.circle=null)}function nn(n){for(var i,u=cr,e=pv(n[0][0],n[0][1],n[1][0],n[1][1]),f=u.length;f--;)i=u[f],(!tn(i,n)||!e(i)||r(i.a.x-i.b.x)<t&&r(i.a.y-i.b.y)<t)&&(i.a=i.b=null,u.splice(f,1))}function tn(n,t){var f=n.b;if(f)return!0;var r,u,i=n.a,h=t[0][0],c=t[1][0],e=t[0][1],o=t[1][1],p=n.l,w=n.r,l=p.x,a=p.y,v=w.x,y=w.y,s=(l+v)/2,b=(a+y)/2;if(y===a){if(h>s||s>=c)return;if(l>v){if(i){if(i.y>=o)return}else i={x:s,y:e};f={x:s,y:o}}else{if(i){if(i.y<e)return}else i={x:s,y:o};f={x:s,y:e}}}else if(r=(l-v)/(y-a),u=b-r*s,-1>r||r>1)if(l>v){if(i){if(i.y>=o)return}else i={x:(e-u)/r,y:e};f={x:(o-u)/r,y:o}}else{if(i){if(i.y<e)return}else i={x:(o-u)/r,y:o};f={x:(e-u)/r,y:e}}else if(y>a){if(i){if(i.x>=c)return}else i={x:h,y:r*h+u};f={x:c,y:r*c+u}}else{if(i){if(i.x<h)return}else i={x:c,y:r*c+u};f={x:h,y:r*h+u}}return n.a=i,n.b=f,!0}function gy(n,t){this.l=n;this.r=t;this.a=this.b=null}function kr(n,t,i,r){var u=new gy(n,t);return cr.push(u),i&&cf(u,n,t,i),r&&cf(u,t,n,r),ki[n.i].edges.push(new lf(u,n,t)),ki[t.i].edges.push(new lf(u,t,n)),u}function rn(n,t,i){var r=new gy(n,null);return r.a=t,r.b=i,cr.push(r),r}function cf(n,t,i,r){n.a||n.b?n.l===i?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=i)}function lf(n,t,i){var r=n.a,u=n.b;this.edge=n;this.site=t;this.angle=i?Math.atan2(i.y-t.y,i.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nh(){this._=null}function af(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function dr(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.R=r.L;i.R&&(i.R.U=i);r.L=i}function gr(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.L=r.R;i.L&&(i.L.U=i);r.R=i}function np(n){for(;n.L;)n=n.L;return n}function th(n,t){var u,f,r,i=n.sort(un).pop(),e;for(cr=[],ki=new Array(n.length),lr=new nh,cu=new nh;;)if(r=nl,i&&(!r||i.y<r.y||i.y===r.y&&i.x<r.x))(i.x!==u||i.y!==f)&&(ki[i.i]=new ky(i),bg(i),u=i.x,f=i.y),i=n.pop();else{if(!r)break;wg(r.arc)}return t&&(nn(t),dg(t)),e={cells:ki,edges:cr},lr=cu=cr=ki=null,e}function un(n,t){return t.y-n.y||t.x-n.x}function fn(n,t,i){return(n.x-i.x)*(t.y-n.y)-(n.x-t.x)*(i.y-n.y)}function en(n){return n.x}function on(n){return n.y}function tp(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nu(n,t,i,r,u,f){if(!n(t,i,r,u,f)){var o=.5*(i+u),s=.5*(r+f),e=t.nodes;e[0]&&nu(n,e[0],i,r,o,s);e[1]&&nu(n,e[1],o,r,u,s);e[2]&&nu(n,e[2],i,s,o,f);e[3]&&nu(n,e[3],o,s,u,f)}}function sn(n,t,i,r,u,f,e){var s,h=1/0;return function o(n,c,l,a,v){var y;if(!(c>f||l>e||r>a||u>v)){if(k=n.point){var k,d=t-n.x,g=i-n.y,nt=d*d+g*g;h>nt&&(y=Math.sqrt(h=nt),r=t-y,u=i-y,f=t+y,e=i+y,s=k)}for(var tt=n.nodes,p=.5*(c+a),w=.5*(l+v),it=t>=p,rt=i>=w,b=rt<<1|it,ut=b+4;ut>b;++b)if(n=tt[3&b])switch(3&b){case 0:o(n,c,l,p,w);break;case 1:o(n,p,l,a,w);break;case 2:o(n,c,w,p,v);break;case 3:o(n,p,w,a,v)}}}(n,r,u,f,e),s}function ih(t,i){t=n.rgb(t);i=n.rgb(i);var r=t.r,u=t.g,f=t.b,e=i.r-r,o=i.g-u,s=i.b-f;return function(n){return"#"+nr(Math.round(r+e*n))+nr(Math.round(u+o*n))+nr(Math.round(f+s*n))}}function ip(n,t){var i,u={},r={};for(i in n)i in t?u[i]=ai(n[i],t[i]):r[i]=n[i];for(i in t)i in n||(r[i]=t[i]);return function(n){for(i in u)r[i]=u[i](n);return r}}function pt(n,t){return n=+n,t=+t,function(i){return n*(1-i)+t*i}}function rp(n,t){var s,f,u,e=io.lastIndex=ro.lastIndex=0,r=-1,i=[],o=[];for(n+="",t+="";(s=io.exec(n))&&(f=ro.exec(t));)(u=f.index)>e&&(u=t.slice(e,u),i[r]?i[r]+=u:i[++r]=u),(s=s[0])===(f=f[0])?i[r]?i[r]+=f:i[++r]=f:(i[++r]=null,o.push({i:r,x:pt(s,f)})),e=ro.lastIndex;return e<t.length&&(u=t.slice(e),i[r]?i[r]+=u:i[++r]=u),i.length<2?o[0]?(t=o[0].x,function(n){return t(n)+""}):function(){return t}:(t=o.length,function(n){for(var u,r=0;t>r;++r)i[(u=o[r]).i]=u.x(n);return i.join("")})}function ai(t,i){for(var r,u=n.interpolators.length;--u>=0&&!(r=n.interpolators[u](t,i)););return r}function vf(n,t){for(var u=[],r=[],e=n.length,o=t.length,f=Math.min(n.length,t.length),i=0;f>i;++i)u.push(ai(n[i],t[i]));for(;e>i;++i)r[i]=n[i];for(;o>i;++i)r[i]=t[i];return function(n){for(i=0;f>i;++i)r[i]=u[i](n);return r}}function hn(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function up(n){return function(t){return 1-n(1-t)}}function fp(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function cn(n){return n*n}function ln(n){return n*n*n}function an(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,i=t*n;return 4*(.5>n?i:3*(n-t)+i-.75)}function vn(n){return function(t){return Math.pow(t,n)}}function yn(n){return 1-Math.cos(n*h)}function pn(n){return Math.pow(2,10*(n-1))}function wn(n){return 1-Math.sqrt(1-n*n)}function bn(n,t){var i;return arguments.length<2&&(t=.45),arguments.length?i=t/d*Math.asin(1/n):(n=1,i=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-i)*d/t)}}function kn(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function dn(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function gn(t,i){t=n.hcl(t);i=n.hcl(i);var u=t.h,f=t.c,o=t.l,r=i.h-u,e=i.c-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.c:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return ko(u+r*n,f+e*n,o+s*n)+""}}function ntt(t,i){t=n.hsl(t);i=n.hsl(i);var u=t.h,f=t.s,o=t.l,r=i.h-u,e=i.s-f,s=i.l-o;return isNaN(e)&&(e=0,f=isNaN(f)?i.s:f),isNaN(r)?(r=0,u=isNaN(u)?i.h:u):r>180?r-=360:-180>r&&(r+=360),function(n){return bo(u+r*n,f+e*n,o+s*n)+""}}function ttt(t,i){t=n.lab(t);i=n.lab(i);var r=t.l,u=t.a,f=t.b,e=i.l-r,o=i.a-u,s=i.b-f;return function(n){return ba(r+e*n,u+o*n,f+s*n)+""}}function ep(n,t){return t-=n,function(i){return Math.round(n+t*i)}}function op(n){var t=[n.a,n.b],i=[n.c,n.d],r=hp(t),u=sp(t,i),f=hp(itt(i,t,-u))||0;t[0]*i[1]<i[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1);this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-i[0],i[1]))*s;this.translate=[n.e,n.f];this.scale=[r,f];this.skew=f?Math.atan2(u,f)*s:0}function sp(n,t){return n[0]*t[0]+n[1]*t[1]}function hp(n){var t=Math.sqrt(sp(n,n));return t&&(n[0]/=t,n[1]/=t),t}function itt(n,t,i){return n[0]+=i*t[0],n[1]+=i*t[1],n}function fr(n){return n.length?n.pop()+",":""}function rtt(n,t,i,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=i.push("translate(",null,",",null,")");r.push({i:u-4,x:pt(n[0],t[0])},{i:u-2,x:pt(n[1],t[1])})}else(t[0]||t[1])&&i.push("translate("+t+")")}function utt(n,t,i,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:i.push(fr(i)+"rotate(",null,")")-2,x:pt(n,t)})):t&&i.push(fr(i)+"rotate("+t+")")}function ftt(n,t,i,r){n!==t?r.push({i:i.push(fr(i)+"skewX(",null,")")-2,x:pt(n,t)}):t&&i.push(fr(i)+"skewX("+t+")")}function ett(n,t,i,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=i.push(fr(i)+"scale(",null,",",null,")");r.push({i:u-4,x:pt(n[0],t[0])},{i:u-2,x:pt(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&i.push(fr(i)+"scale("+t+")")}function cp(t,i){var r=[],u=[];return t=n.transform(t),i=n.transform(i),rtt(t.translate,i.translate,r,u),utt(t.rotate,i.rotate,r,u),ftt(t.skew,i.skew,r,u),ett(t.scale,i.scale,r,u),t=i=null,function(n){for(var t,i=-1,f=u.length;++i<f;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function ott(n,t){return t=(t-=n=+n)||1/t,function(i){return(i-n)/t}}function stt(n,t){return t=(t-=n=+n)||1/t,function(i){return Math.max(0,Math.min(1,(i-n)/t))}}function htt(n){for(var f,t=n.source,i=n.target,u=ctt(t,i),r=[t];t!==u;)t=t.parent,r.push(t);for(f=r.length;i!==u;)r.splice(f,0,i),i=i.parent;return r}function lp(n){for(var i=[],t=n.parent;null!=t;)i.push(n),n=t,t=t.parent;return i.push(n),i}function ctt(n,t){if(n===t)return n;for(var r=lp(n),u=lp(t),i=r.pop(),f=u.pop(),e=null;i===f;)e=i,i=r.pop(),f=u.pop();return e}function ltt(n){n.fixed|=2}function att(n){n.fixed&=-7}function vtt(n){n.fixed|=4;n.px=n.x;n.py=n.y}function ytt(n){n.fixed&=-5}function ap(n,t,i){var f=0,e=0,u;if(n.charge=0,!n.leaf)for(var r,o=n.nodes,h=o.length,s=-1;++s<h;)r=o[s],null!=r&&(ap(r,t,i),n.charge+=r.charge,f+=r.charge*r.cx,e+=r.charge*r.cy);n.point&&(n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5),u=t*i[n.point.index],n.charge+=n.pointCharge=u,f+=u*n.point.x,e+=u*n.point.y);n.cx=f/n.charge;n.cy=e/n.charge}function tu(t,i){return n.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=ktt,t}function iu(n,t){for(var r,u,i=[n];null!=(n=i.pop());)if(t(n),(u=n.children)&&(r=u.length))for(;--r>=0;)i.push(u[r])}function et(n,t){for(var e,u,f,i=[n],r=[];null!=(n=i.pop());)if(r.push(n),(u=n.children)&&(e=u.length))for(f=-1;++f<e;)i.push(u[f]);for(;null!=(n=r.pop());)t(n)}function ptt(n){return n.children}function wtt(n){return n.value}function btt(n,t){return t.value-n.value}function ktt(t){return n.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function dtt(n){return n.x}function gtt(n){return n.y}function nit(n,t,i){n.y0=t;n.y=i}function rh(t){return n.range(t.length)}function uh(n){for(var t=-1,r=n[0].length,i=[];++t<r;)i[t]=0;return i}function tit(n){for(var i,t=1,r=0,u=n[0][1],f=n.length;f>t;++t)(i=n[t][1])>u&&(r=t,u=i);return r}function iit(n){return n.reduce(rit,0)}function rit(n,t){return n+t[1]}function uit(n,t){return vp(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function vp(n,t){for(var i=-1,r=+n[0],f=(n[1]-r)/t,u=[];++i<=t;)u[i]=f*i+r;return u}function fit(t){return[n.min(t),n.max(t)]}function eit(n,t){return n.value-t.value}function fh(n,t){var i=n._pack_next;n._pack_next=t;t._pack_prev=n;t._pack_next=i;i._pack_prev=t}function yp(n,t){n._pack_next=t;t._pack_prev=n}function pp(n,t){var i=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>i*i+r*r}function wp(n){function h(n){c=Math.min(n.x-n.r,c);l=Math.max(n.x+n.r,l);a=Math.min(n.y-n.r,a);v=Math.max(n.y+n.r,v)}if((u=n.children)&&(s=u.length)){var u,i,r,t,f,e,o,s,c=1/0,l=-(1/0),a=1/0,v=-(1/0);if(u.forEach(oit),i=u[0],i.x=-i.r,i.y=0,h(i),s>1&&(r=u[1],r.x=r.r,r.y=0,h(r),s>2))for(t=u[2],kp(i,r,t),h(t),fh(i,t),i._pack_prev=t,fh(t,r),r=i._pack_next,f=3;s>f;f++){kp(i,r,t=u[f]);var y=0,p=1,w=1;for(e=r._pack_next;e!==r;e=e._pack_next,p++)if(pp(e,t)){y=1;break}if(1==y)for(o=i._pack_prev;o!==e._pack_prev&&!pp(o,t);o=o._pack_prev,w++);y?(w>p||p==w&&r.r<i.r?yp(i,r=e):yp(i=o,r),f--):(fh(i,t),r=t,h(t))}var k=(c+l)/2,d=(a+v)/2,b=0;for(f=0;s>f;f++)t=u[f],t.x-=k,t.y-=d,b=Math.max(b,t.r+Math.sqrt(t.x*t.x+t.y*t.y));n.r=b;u.forEach(sit)}}function oit(n){n._pack_next=n._pack_prev=n}function sit(n){delete n._pack_next;delete n._pack_prev}function bp(n,t,i,r){var u=n.children,f,e;if(n.x=t+=r*n.x,n.y=i+=r*n.y,n.r*=r,u)for(f=-1,e=u.length;++f<e;)bp(u[f],t,i,r)}function kp(n,t,i){var r=n.r+i.r,f=t.x-n.x,e=t.y-n.y,u,o,s,h;r&&(f||e)?(u=t.r+i.r,o=f*f+e*e,u*=u,r*=r,s=.5+(r-u)/(2*o),h=Math.sqrt(Math.max(0,2*u*(r+o)-(r-=o)*r-u*u))/(2*o),i.x=n.x+s*f+h*e,i.y=n.y+s*e-h*f):(i.x=n.x+r,i.y=n.y)}function dp(n,t){return n.parent==t.parent?1:2}function eh(n){var t=n.children;return t.length?t[0]:n.t}function oh(n){var t,i=n.children;return(t=i.length)?i[t-1]:n.t}function hit(n,t,i){var r=i/(t.i-n.i);t.c-=r;t.s+=i;n.c+=r;t.z+=i;t.m+=i}function cit(n){for(var t,i=0,f=0,r=n.children,u=r.length;--u>=0;)t=r[u],t.z+=i,t.m+=i,i+=t.s+(f+=t.c)}function lit(n,t,i){return n.a.parent===t.parent?n.a:i}function ait(t){return 1+n.max(t,function(n){return n.y})}function vit(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function gp(n){var t=n.children;return t&&t.length?gp(t[0]):n}function nw(n){var i,t=n.children;return t&&(i=t.length)?nw(t[i-1]):n}function sh(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function tw(n,t){var u=n.x+t[3],f=n.y+t[0],i=n.dx-t[1]-t[3],r=n.dy-t[0]-t[2];return 0>i&&(u+=i/2,i=0),0>r&&(f+=r/2,r=0),{x:u,y:f,dx:i,dy:r}}function er(n){var t=n[0],i=n[n.length-1];return i>t?[t,i]:[i,t]}function yf(n){return n.rangeExtent?n.rangeExtent():er(n.range())}function yit(n,t,i,r){var u=i(n[0],n[1]),f=r(t[0],t[1]);return function(n){return f(u(n))}}function pf(n,t){var i,r=0,u=n.length-1,f=n[r],e=n[u];return f>e&&(i=r,r=u,u=i,i=f,f=e,e=i),n[r]=t.floor(f),n[u]=t.ceil(e),n}function iw(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:kb}function pit(t,i,r,u){var o=[],s=[],f=0,e=Math.min(t.length,i.length)-1;for(t[e]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=e;)o.push(r(t[f-1],t[f])),s.push(u(i[f-1],i[f]));return function(i){var r=n.bisect(t,i,1,e)-1;return s[r](o[r](i))}}function rw(n,t,i,r){function f(){var f=Math.min(n.length,t.length)>2?pit:yit,s=r?stt:ott;return e=f(n,t,s,i),o=f(t,n,s,ai),u}function u(n){return e(n)}var e,o;return u.invert=function(n){return o(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),f()):n},u.range=function(n){return arguments.length?(t=n,f()):t},u.rangeRound=function(n){return u.range(n).interpolate(ep)},u.clamp=function(n){return arguments.length?(r=n,f()):r},u.interpolate=function(n){return arguments.length?(i=n,f()):i},u.ticks=function(t){return ch(n,t)},u.tickFormat=function(t,i){return lh(n,t,i)},u.nice=function(t){return uw(n,t),f()},u.copy=function(){return rw(n,t,i,r)},f()}function hh(t,i){return n.rebind(t,i,"range","rangeRound","interpolate","clamp")}function uw(n,t){return pf(n,iw(or(n,t)[2])),pf(n,iw(or(n,t)[2])),n}function or(n,t){null==t&&(t=10);var r=er(n),f=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(f/t)/Math.LN10)),u=t/f*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function ch(t,i){return n.range.apply(n,or(t,i))}function lh(t,i,u){var e=or(t,i),f,o;if(u){if(f=cb.exec(u),f.shift(),"s"===f[8])return o=n.formatPrefix(Math.max(r(e[0]),r(e[1]))),f[7]||(f[7]="."+wf(o.scale(e[2]))),f[8]="f",u=n.format(f.join("")),function(n){return u(o.scale(n))+o.symbol};f[7]||(f[7]="."+wit(f[8],e));u=f.join("")}else u=",."+wf(e[2])+"f";return n.format(u)}function wf(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function wit(n,t){var i=wf(t[2]);return n in db?Math.abs(i-wf(Math.max(r(t[0]),r(t[1]))))+ +("e"!==n):i-2*("%"===n)}function fw(t,i,r,u){function e(n){return(r?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(i)}function o(n){return r?Math.pow(i,n):-Math.pow(i,-n)}function f(n){return t(e(n))}return f.invert=function(n){return o(t.invert(n))},f.domain=function(n){return arguments.length?(r=n[0]>=0,t.domain((u=n.map(Number)).map(e)),f):u},f.base=function(n){return arguments.length?(i=+n,t.domain(u.map(e)),f):i},f.nice=function(){var n=pf(u.map(e),r?Math:gb);return t.domain(n),u=n.map(o),f},f.ticks=function(){var h=er(u),t=[],c=h[0],l=h[1],n=Math.floor(e(c)),s=Math.ceil(e(l)),a=i%1?2:i,f;if(isFinite(s-n)){if(r){for(;s>n;n++)for(f=1;a>f;f++)t.push(o(n)*f);t.push(o(n))}else for(t.push(o(n));n++<s;)for(f=a-1;f>0;f--)t.push(o(n)*f);for(n=0;t[n]<c;n++);for(s=t.length;t[s-1]>l;s--);t=t.slice(n,s)}return t},f.tickFormat=function(t,r){if(!arguments.length)return ul;arguments.length<2?r=ul:"function"!=typeof r&&(r=n.format(r));var u=Math.max(1,i*t/f.ticks().length);return function(n){var t=n/o(Math.round(e(n)));return i-.5>t*i&&(t*=i),u>=t?r(n):""}},f.copy=function(){return fw(t.copy(),i,r,u)},hh(f,t)}function ew(n,t,i){function r(t){return n(u(t))}var u=bf(t),f=bf(1/t);return r.invert=function(t){return f(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((i=t.map(Number)).map(u)),r):i},r.ticks=function(n){return ch(i,n)},r.tickFormat=function(n,t){return lh(i,n,t)},r.nice=function(n){return r.domain(uw(i,n))},r.exponent=function(e){return arguments.length?(u=bf(t=e),f=bf(1/t),n.domain(i.map(u)),r):t},r.copy=function(){return ew(n.copy(),t,i)},hh(r,n)}function bf(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ow(t,i){function r(n){return u[((e.get(n)||("range"===i.t?e.set(n,t.push(n)):NaN))-1)%u.length]}function o(i,r){return n.range(t.length).map(function(n){return i+r*n})}var e,u,f;return r.domain=function(n){if(!arguments.length)return t;t=[];e=new at;for(var u,f=-1,o=n.length;++f<o;)e.has(u=n[f])||e.set(u,t.push(u));return r[i.t].apply(r,i.a)},r.range=function(n){return arguments.length?(u=n,f=0,i={t:"range",a:arguments},r):u},r.rangePoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=(s+h)/2,0):(h-s)/(t.length-1+e);return u=o(s+c*e/2,c),f=0,i={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(n,e){arguments.length<2&&(e=0);var s=n[0],h=n[1],c=t.length<2?(s=h=Math.round((s+h)/2),0):(h-s)/(t.length-1+e)|0;return u=o(s+Math.round(c*e/2+(h-s-(t.length-1+e)*c)/2),c),f=0,i={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],l=n[+h],a=n[1-h],c=(a-l)/(t.length-e+2*s);return u=o(l+c*s,c),h&&u.reverse(),f=c*(1-e),i={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(n,e,s){arguments.length<2&&(e=0);arguments.length<3&&(s=e);var h=n[1]<n[0],c=n[+h],a=n[1-h],l=Math.floor((a-c)/(t.length-e+2*s));return u=o(c+Math.round((a-c-(t.length-e)*l)/2),l),h&&u.reverse(),f=Math.round(l*(1-e)),i={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return f},r.rangeExtent=function(){return er(i.a[0])},r.copy=function(){return ow(t,i)},r.domain(t)}function sw(t,i){function f(){var f=0,e=i.length;for(r=[];++f<e;)r[f-1]=n.quantile(t,f/e);return u}function u(t){if(!isNaN(t=+t))return i[n.bisect(r,t)]}var r;return u.domain=function(n){return arguments.length?(t=n.map(oi).filter(lt).sort(gi),f()):t},u.range=function(n){return arguments.length?(i=n,f()):i},u.quantiles=function(){return r},u.invertExtent=function(n){return n=i.indexOf(n),0>n?[NaN,NaN]:[n>0?r[n-1]:t[0],n<r.length?r[n]:t[t.length-1]]},u.copy=function(){return sw(t,i)},f()}function hw(n,t,i){function r(t){return i[Math.max(0,Math.min(e,Math.floor(u*(t-n))))]}function f(){return u=i.length/(t-n),e=i.length-1,r}var u,e;return r.domain=function(i){return arguments.length?(n=+i[0],t=+i[i.length-1],f()):[n,t]},r.range=function(n){return arguments.length?(i=n,f()):i},r.invertExtent=function(t){return t=i.indexOf(t),t=0>t?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return hw(n,t,i)},f()}function cw(t,i){function r(r){if(r>=r)return i[n.bisect(t,r)]}return r.domain=function(n){return arguments.length?(t=n,r):t},r.range=function(n){return arguments.length?(i=n,r):i},r.invertExtent=function(n){return n=i.indexOf(n),[t[n-1],t[n]]},r.copy=function(){return cw(t,i)},r}function lw(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(i){return arguments.length?(n=i.map(t),t):n},t.ticks=function(t){return ch(n,t)},t.tickFormat=function(t,i){return lh(n,t,i)},t.copy=function(){return lw(n)},t}function bit(){return 0}function kit(n){return n.innerRadius}function dit(n){return n.outerRadius}function aw(n){return n.startAngle}function vw(n){return n.endAngle}function git(n){return n&&n.padAngle}function kf(n,t,i,r){return(n-i)*t-(t-r)*n>0?0:1}function df(n,t,i,r,u){var v=n[0]-t[0],y=n[1]-t[1],nt=(u?r:-r)/Math.sqrt(v*v+y*y),p=nt*y,w=-nt*v,b=n[0]+p,k=n[1]+w,d=t[0]+p,g=t[1]+w,tt=(b+d)/2,it=(k+g)/2,e=d-b,f=g-k,s=e*e+f*f,h=i-r,o=b*g-d*k,c=(0>f?-1:1)*Math.sqrt(Math.max(0,h*h*s-o*o)),l=(o*f-e*c)/s,a=(-o*e-f*c)/s,rt=(o*f+e*c)/s,ut=(-o*e+f*c)/s,ft=l-tt,et=a-it,ot=rt-tt,st=ut-it;return ft*ft+et*et>ot*ot+st*st&&(l=rt,a=ut),[[l-p,a-w],[l*i/h,a*i/h]]}function yw(n){function t(t){function a(){l.push("M",i(n(s),e))}for(var c,l=[],s=[],h=-1,v=t.length,y=o(r),p=o(u);++h<v;)f.call(this,c=t[h],h)?s.push([+y.call(this,c,h),+p.call(this,c,h)]):s.length&&(a(),s=[]);return s.length&&a(),l.length?l.join(""):null}var r=ir,u=br,f=yr,i=it,s=i.key,e=.7;return t.x=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(f=n,t):f},t.interpolate=function(n){return arguments.length?(s="function"==typeof n?i=n:(i=uo.get(n)||it).key,t):s},t.tension=function(n){return arguments.length?(e=n,t):e},t}function it(n){return n.length>1?n.join("L"):n+"Z"}function pw(n){return n.join("L")+"Z"}function nrt(n){for(var r=0,u=n.length,t=n[0],i=[t[0],",",t[1]];++r<u;)i.push("H",(t[0]+(t=n[r])[0])/2,"V",t[1]);return u>1&&i.push("H",t[0]),i.join("")}function ah(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("V",(t=n[i])[1],"H",t[0]);return r.join("")}function vh(n){for(var i=0,u=n.length,t=n[0],r=[t[0],",",t[1]];++i<u;)r.push("H",(t=n[i])[0],"V",t[1]);return r.join("")}function trt(n,t){return n.length<4?it(n):n[1]+gf(n.slice(1,-1),yh(n,t))}function irt(n,t){return n.length<3?pw(n):n[0]+gf((n.push(n[0]),n),yh([n[n.length-2]].concat(n,[n[1]]),t))}function rrt(n,t){return n.length<3?it(n):n[0]+gf(n,yh(n,t))}function gf(n,t){var o,h;if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return it(n);var c=n.length!=t.length,f="",s=n[0],i=n[1],e=t[0],r=e,u=1;if(c&&(f+="Q"+(i[0]-2*e[0]/3)+","+(i[1]-2*e[1]/3)+","+i[0]+","+i[1],s=n[1],u=2),t.length>1)for(r=t[1],i=n[u],u++,f+="C"+(s[0]+e[0])+","+(s[1]+e[1])+","+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1],o=2;o<t.length;o++,u++)i=n[u],r=t[o],f+="S"+(i[0]-r[0])+","+(i[1]-r[1])+","+i[0]+","+i[1];return c&&(h=n[u],f+="Q"+(i[0]+2*r[0]/3)+","+(i[1]+2*r[1]/3)+","+h[0]+","+h[1]),f}function yh(n,t){for(var r,u=[],f=(1-t)/2,e=n[0],i=n[1],o=1,s=n.length;++o<s;)r=e,e=i,i=n[o],u.push([f*(i[0]-r[0]),f*(i[1]-r[1])]);return u}function ww(n){if(n.length<3)return it(n);var o=1,s=n.length,t=n[0],i=t[0],r=t[1],u=[i,i,i,(t=n[1])[0]],f=[r,r,r,t[1]],e=[i,",",r,"L",g(ei,u),",",g(ei,f)];for(n.push(n[s-1]);++o<=s;)t=n[o],u.shift(),u.push(t[0]),f.shift(),f.push(t[1]),ph(e,u,f);return n.pop(),e.push("L",t),e.join("")}function urt(n){if(n.length<4)return it(n);for(var t,f=[],i=-1,e=n.length,r=[0],u=[0];++i<3;)t=n[i],r.push(t[0]),u.push(t[1]);for(f.push(g(ei,r)+","+g(ei,u)),--i;++i<e;)t=n[i],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),ph(f,r,u);return f.join("")}function frt(n){for(var f,t,i=-1,e=n.length,o=e+4,r=[],u=[];++i<4;)t=n[i%e],r.push(t[0]),u.push(t[1]);for(f=[g(ei,r),",",g(ei,u)],--i;++i<o;)t=n[i%e],r.shift(),r.push(t[0]),u.shift(),u.push(t[1]),ph(f,r,u);return f.join("")}function ert(n,t){var i=n.length-1;if(i)for(var r,u,e=n[0][0],o=n[0][1],s=n[i][0]-e,h=n[i][1]-o,f=-1;++f<=i;)r=n[f],u=f/i,r[0]=t*r[0]+(1-t)*(e+u*s),r[1]=t*r[1]+(1-t)*(o+u*h);return ww(n)}function g(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function ph(n,t,i){n.push("C",g(nk,t),",",g(nk,i),",",g(tk,t),",",g(tk,i),",",g(ei,t),",",g(ei,i))}function wh(n,t){return(t[1]-n[1])/(t[0]-n[0])}function ort(n){for(var t=0,e=n.length-1,i=[],f=n[0],r=n[1],u=i[0]=wh(f,r);++t<e;)i[t]=(u+(u=wh(f=r,r=n[t+1])))/2;return i[t]=u,i}function srt(n){for(var e,o,s,u,c=[],f=ort(n),i=-1,h=n.length-1;++i<h;)e=wh(n[i],n[i+1]),r(e)<t?f[i]=f[i+1]=0:(o=f[i]/e,s=f[i+1]/e,u=o*o+s*s,u>9&&(u=3*e/Math.sqrt(u),f[i]=u*o,f[i+1]=u*s));for(i=-1;++i<=h;)u=(n[Math.min(h,i+1)][0]-n[Math.max(0,i-1)][0])/(6*(1+f[i]*f[i])),c.push([u||0,f[i]*u||0]);return c}function hrt(n){return n.length<3?it(n):n[0]+gf(n,srt(n))}function bw(n){for(var t,i,r,u=-1,f=n.length;++u<f;)t=n[u],i=t[0],r=t[1]-h,t[0]=i*Math.cos(r),t[1]=i*Math.sin(r);return n}function kw(n){function t(t){function b(){p.push("M",i(n(w),s),a,l(n(y.reverse()),s),"Z")}for(var v,k,d,p=[],y=[],w=[],c=-1,g=t.length,nt=o(f),tt=o(e),it=f===r?function(){return k}:o(r),rt=e===u?function(){return d}:o(u);++c<g;)h.call(this,v=t[c],c)?(y.push([k=+nt.call(this,v,c),d=+tt.call(this,v,c)]),w.push([+it.call(this,v,c),+rt.call(this,v,c)])):y.length&&(b(),y=[],w=[]);return y.length&&b(),p.length?p.join(""):null}var f=ir,r=ir,e=0,u=br,h=yr,i=it,c=i.key,l=i,a="L",s=.7;return t.x=function(n){return arguments.length?(f=r=n,t):r},t.x0=function(n){return arguments.length?(f=n,t):f},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(e=u=n,t):u},t.y0=function(n){return arguments.length?(e=n,t):e},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(h=n,t):h},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?i=n:(i=uo.get(n)||it).key,l=i.reverse||i,a=i.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function crt(n){return n.radius}function dw(n){return[n.x,n.y]}function lrt(n){return function(){var t=n.apply(this,arguments),i=t[0],r=t[1]-h;return[i*Math.cos(r),i*Math.sin(r)]}}function art(){return 64}function vrt(){return"circle"}function gw(n){var t=Math.sqrt(n/f);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function nb(n){return function(){var t,r,i;(t=this[n])&&(i=t[r=t.active])&&(i.timer.c=null,i.timer.t=NaN,--t.count?delete t[r]:delete this[n],t.active+=.5,i.event&&i.event.interrupt.call(this,this.__data__,i.index))}}function ru(n,t,i){return re(n,a),n.namespace=t,n.id=i,n}function bh(n,t,i,r){var u=n.id,f=n.namespace;return vt(n,"function"==typeof i?function(n,e,o){n[f][u].tween.set(t,r(i.call(n,n.__data__,e,o)))}:(i=r(i),function(n){n[f][u].tween.set(t,i)}))}function yrt(n){return null==n&&(n=""),function(){this.textContent=n}}function kh(n){return null==n?"__transition__":"__transition_"+n+"__"}function ne(n,t,i,r,u){function y(n){var t=e.delay;return o.t=t+s,n>=t?c(n-t):void(o.c=c)}function c(i){var p=f.active,u=f[p],c,y;u&&(u.timer.c=null,u.timer.t=NaN,--f.count,delete f[p],u.event&&u.event.interrupt.call(n,n.__data__,u.index));for(c in f)r>+c&&(y=f[c],y.timer.c=null,y.timer.t=NaN,--f.count,delete f[c]);o.c=l;ku(function(){return o.c&&l(i||1)&&(o.c=null,o.t=NaN),1},0,s);f.active=r;e.event&&e.event.start.call(n,n.__data__,t);h=[];e.tween.forEach(function(i,r){(r=r.call(n,n.__data__,t))&&h.push(r)});v=e.ease;a=e.duration}function l(u){for(var o=u/a,c=v(o),s=h.length;s>0;)h[--s].call(n,c);if(o>=1)return(e.event&&e.event.end.call(n,n.__data__,t),--f.count?delete f[r]:delete n[i],1)}var s,o,a,v,h,f=n[i]||(n[i]={active:0,count:0}),e=f[r];e||(s=u.time,o=ku(y,0,s),e=f[r]={tween:new at,time:s,timer:o,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++f.count)}function prt(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:i(n))+",0)"})}function wrt(n,t,i){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:i(n))+")"})}function dh(n){return n.toISOString()}function gh(t,i,r){function u(n){return t(n)}function f(t,r){var e=t[1]-t[0],f=e/r,u=n.bisect(oo,f);return u==oo.length?[i.year,or(t.map(function(n){return n/31536e6}),r)[2]]:u?i[f/oo[u-1]<oo[u]/f?u-1:u]:[wut,or(t,r)[2]]}return u.invert=function(n){return vi(t.invert(n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain().map(vi)},u.nice=function(n,t){function r(i){return!isNaN(i)&&!n.range(i,vi(+i+1),t).length}var e=u.domain(),o=er(e),i=null==n?f(o,10):"number"==typeof n&&f(o,n);return i&&(n=i[0],t=i[1]),u.domain(pf(e,t>1?{floor:function(t){for(;r(t=n.floor(t));)t=vi(t-1);return t},ceil:function(t){for(;r(t=n.ceil(t));)t=vi(+t+1);return t}}:n))},u.ticks=function(n,t){var i=er(u.domain()),r=null==n?f(i,10):"number"==typeof n?f(i,n):!n.range&&[{range:n},t];return r&&(n=r[0],t=r[1]),n.range(i[0],vi(+i[1]+1),1>t?1:t)},u.tickFormat=function(){return r},u.copy=function(){return gh(t.copy(),i,r)},hh(u,t)}function vi(n){return new Date(n)}function brt(n){return JSON.parse(n.responseText)}function krt(n){var t=p.createRange();return t.selectNode(p.body),t.createContextualFragment(n.responseText)}var n={version:"3.5.12"},tb=[].slice,ot=function(n){return tb.call(n)},p=this.document,nc,r,rb,ie,tc,e,ue,st,fe,yi,ub,ee,se,ec,oc,he,ce,fu,eu,ae,ve,ye,pe,hc,hb,ht,cc,ou,lc,ac,we,ti,k,pc,bi,wc,bc,kc,dc,gc,hu,cr,ki,lr,nl,cu,tl,il,lu,io,ro,pb,rl,wb,bb,kb,db,ul,gb,au,uo,fl,vu,el,ol,rk,ll,ek;if(p)try{ot(p.documentElement.childNodes)[0].nodeType}catch(but){ot=function(n){for(var t=n.length,i=new Array(t);t--;)i[t]=n[t];return i}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch(kut){var te=this.Element.prototype,drt=te.setAttribute,grt=te.setAttributeNS,ib=this.CSSStyleDeclaration.prototype,nut=ib.setProperty;te.setAttribute=function(n,t){drt.call(this,n,t+"")};te.setAttributeNS=function(n,t,i){grt.call(this,n,t,i+"")};ib.setProperty=function(n,t,i){nut.call(this,n,t+"",i)}}n.ascending=gi;n.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN};n.min=function(n,t){var u,i,r=-1,f=n.length;if(1===arguments.length){for(;++r<f;)if(null!=(i=n[r])&&i>=i){u=i;break}for(;++r<f;)null!=(i=n[r])&&u>i&&(u=i)}else{for(;++r<f;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=i;break}for(;++r<f;)null!=(i=t.call(n,n[r],r))&&u>i&&(u=i)}return u};n.max=function(n,t){var u,i,r=-1,f=n.length;if(1===arguments.length){for(;++r<f;)if(null!=(i=n[r])&&i>=i){u=i;break}for(;++r<f;)null!=(i=n[r])&&i>u&&(u=i)}else{for(;++r<f;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=i;break}for(;++r<f;)null!=(i=t.call(n,n[r],r))&&i>u&&(u=i)}return u};n.extent=function(n,t){var u,i,f,r=-1,e=n.length;if(1===arguments.length){for(;++r<e;)if(null!=(i=n[r])&&i>=i){u=f=i;break}for(;++r<e;)null!=(i=n[r])&&(u>i&&(u=i),i>f&&(f=i))}else{for(;++r<e;)if(null!=(i=t.call(n,n[r],r))&&i>=i){u=f=i;break}for(;++r<e;)null!=(i=t.call(n,n[r],r))&&(u>i&&(u=i),i>f&&(f=i))}return[u,f]};n.sum=function(n,t){var r,u=0,f=n.length,i=-1;if(1===arguments.length)for(;++i<f;)lt(r=+n[i])&&(u+=r);else for(;++i<f;)lt(r=+t.call(n,n[i],i))&&(u+=r);return u};n.mean=function(n,t){var r,f=0,e=n.length,i=-1,u=e;if(1===arguments.length)for(;++i<e;)lt(r=oi(n[i]))?f+=r:--u;else for(;++i<e;)lt(r=oi(t.call(n,n[i],i)))?f+=r:--u;if(u)return f/u};n.quantile=function(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r};n.median=function(t,i){var u,f=[],e=t.length,r=-1;if(1===arguments.length)for(;++r<e;)lt(u=oi(t[r]))&&f.push(u);else for(;++r<e;)lt(u=oi(i.call(t,t[r],r)))&&f.push(u);if(f.length)return n.quantile(f.sort(gi),.5)};n.variance=function(n,t){var i,r,s=n.length,u=0,o=0,f=-1,e=0;if(1===arguments.length)for(;++f<s;)lt(i=oi(n[f]))&&(r=i-u,u+=r/++e,o+=r*(i-u));else for(;++f<s;)lt(i=oi(t.call(n,n[f],f)))&&(r=i-u,u+=r/++e,o+=r*(i-u));if(e>1)return o/(e-1)};n.deviation=function(){var t=n.variance.apply(this,arguments);return t?Math.sqrt(t):t};nc=vl(gi);n.bisectLeft=nc.left;n.bisect=n.bisectRight=nc.right;n.bisector=function(n){return vl(1===n.length?function(t,i){return gi(n(t),i)}:n)};n.shuffle=function(n,t,i){(r=arguments.length)<3&&(i=n.length,2>r&&(t=0));for(var f,u,r=i-t;r;)u=Math.random()*r--|0,f=n[r+t],n[r+t]=n[u+t],n[u+t]=f;return n};n.permute=function(n,t){for(var i=t.length,r=new Array(i);i--;)r[i]=n[t[i]];return r};n.pairs=function(n){for(var f,t=0,i=n.length-1,r=n[0],u=new Array(0>i?0:i);i>t;)u[t]=[f=r,r=n[++t]];return u};n.zip=function(){var r,t,e;if(!(r=arguments.length))return[];for(var i=-1,u=n.min(arguments,ok),f=new Array(u);++i<u;)for(t=-1,e=f[i]=new Array(r);++t<r;)e[t]=arguments[t][i];return f};n.transpose=function(t){return n.zip.apply(n,t)};n.keys=function(n){var t=[];for(var i in n)t.push(i);return t};n.values=function(n){var t=[];for(var i in n)t.push(n[i]);return t};n.entries=function(n){var t=[];for(var i in n)t.push({key:i,value:n[i]});return t};n.merge=function(n){for(var t,i,r,u=n.length,e=-1,f=0;++e<u;)f+=n[e].length;for(i=new Array(f);--u>=0;)for(r=n[u],t=r.length;--t>=0;)i[--f]=r[t];return i};r=Math.abs;n.range=function(n,t,i){if(arguments.length<3&&(i=1,arguments.length<2&&(t=n,n=0)),(t-n)/i==1/0)throw new Error("infinite range");var f,e=[],u=sk(r(i)),o=-1;if(n*=u,t*=u,i*=u,0>i)for(;(f=n+i*++o)>t;)e.push(f/u);else for(;(f=n+i*++o)<t;)e.push(f/u);return e};n.map=function(n,t){var r=new at,e,i,u,f;if(n instanceof at)n.forEach(function(n,t){r.set(n,t)});else if(Array.isArray(n))if(i=-1,u=n.length,1===arguments.length)for(;++i<u;)r.set(i,n[i]);else for(;++i<u;)r.set(t.call(n,e=n[i],i),e);else for(f in n)r.set(f,n[f]);return r};rb="__proto__";ie="\x00";yl(at,{has:pl,get:function(n){return this._[ar(n)]},set:function(n,t){return this._[ar(n)]=t},remove:wl,keys:bl,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:yu(t),value:this._[t]});return n},size:kl,empty:dl,forEach:function(n){for(var t in this._)n.call(this,yu(t),this._[t])}});n.nest=function(){function r(n,e,o){if(o>=i.length)return f?f.call(t,e):u?e.sort(u):e;for(var l,s,h,a,v=-1,y=e.length,p=i[o++],c=new at;++v<y;)(a=c.get(l=p(s=e[v])))?a.push(s):c.set(l,[s]);return n?(s=n(),h=function(t,i){s.set(t,r(n,i,o))}):(s={},h=function(t,i){s[t]=r(n,i,o)}),c.forEach(h),s}function e(n,t){if(t>=i.length)return n;var r=[],u=o[t++];return n.forEach(function(n,i){r.push({key:n,values:e(i,t)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var u,f,t={},i=[],o=[];return t.map=function(n,t){return r(t,n,0)},t.entries=function(t){return e(r(n.map,t,0),0)},t.key=function(n){return i.push(n),t},t.sortKeys=function(n){return o[i.length-1]=n,t},t.sortValues=function(n){return u=n,t},t.rollup=function(n){return f=n,t},t};n.set=function(n){var i=new so,t,r;if(n)for(t=0,r=n.length;r>t;++t)i.add(n[t]);return i};yl(so,{has:pl,add:function(n){return this._[ar(n+="")]=!0,n},remove:wl,values:bl,size:kl,empty:dl,forEach:function(n){for(var t in this._)n.call(this,yu(t))}});n.behavior={};n.rebind=function(n,t){for(var i,r=1,u=arguments.length;++r<u;)n[i=arguments[r]]=hk(n,t,t[i]);return n};tc=["webkit","ms","moz","Moz","o","O"];n.dispatch=function(){for(var n=new co,t=-1,i=arguments.length;++t<i;)n[arguments[t]]=gl(n);return n};co.prototype.on=function(n,t){var r=n.indexOf("."),i="";if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n)return arguments.length<2?this[n].on(i):this[n].on(i,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(i,null);return this}};n.event=null;n.requote=function(n){return n.replace(tut,"\\$&")};var tut=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,re={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var i in t)n[i]=t[i]},ic=function(n,t){return t.querySelector(n)},rc=function(n,t){return t.querySelectorAll(n)},uc=function(n,t){var i=n.matches||n[ho(n,"matchesSelector")];return(uc=function(n,t){return i.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ic=function(n,t){return Sizzle(n,t)[0]||null},rc=Sizzle,uc=Sizzle.matchesSelector);n.selection=function(){return n.select(p.documentElement)};e=n.selection.prototype=[];e.select=function(n){var i,f,e,t,o=[],r,s,u,h;for(n=vo(n),r=-1,s=this.length;++r<s;)for(o.push(i=[]),i.parentNode=(e=this[r]).parentNode,u=-1,h=e.length;++u<h;)(t=e[u])?(i.push(f=n.call(t,t.__data__,u,r)),f&&"__data__"in t&&(f.__data__=t.__data__)):i.push(null);return dt(o)};e.selectAll=function(n){var u,t,f=[],i,e;for(n=na(n),i=-1,e=this.length;++i<e;)for(var o=this[i],r=-1,s=o.length;++r<s;)(t=o[r])&&(f.push(u=ot(n.call(t,t.__data__,r,i))),u.parentNode=t);return dt(f)};ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};n.ns={prefix:ue,qualify:function(n){var t=n.indexOf(":"),i=n;return t>=0&&"xmlns"!==(i=n.slice(0,t))&&(n=n.slice(t+1)),ue.hasOwnProperty(i)?{space:ue[i],local:n}:n}};e.attr=function(t,i){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=n.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(ta(i,t[i]));return this}return this.each(ta(t,i))};e.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var r=this.node(),u=(n=ua(n)).length,i=-1;if(t=r.classList){for(;++i<u;)if(!t.contains(n[i]))return!1}else for(t=r.getAttribute("class");++i<u;)if(!ra(n[i]).test(t))return!1;return!0}for(t in n)this.each(fa(t,n[t]));return this}return this.each(fa(n,t))};e.style=function(n,t,i){var r=arguments.length,u;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.each(ea(i,n[i],t));return this}if(2>r)return u=this.node(),bt(u).getComputedStyle(u,null).getPropertyValue(n);i=""}return this.each(ea(n,t,i))};e.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(oa(t,n[t]));return this}return this.each(oa(n,t))};e.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent};e.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML};e.append=function(n){return n=sa(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})};e.insert=function(n,t){return n=sa(n),t=vo(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})};e.remove=function(){return this.each(lk)};e.data=function(n,t){function e(n,i){var r,u,e,o=n.length,a=i.length,b=Math.min(o,a),v=new Array(a),c=new Array(a),y=new Array(o),p,l,w;if(t){for(l=new at,w=new Array(o),r=-1;++r<o;)(u=n[r])&&(l.has(p=t.call(u,u.__data__,r))?y[r]=u:l.set(p,u),w[r]=p);for(r=-1;++r<a;)(u=l.get(p=t.call(i,e=i[r],r)))?u!==!0&&(v[r]=u,u.__data__=e):c[r]=yo(e),l.set(p,!0);for(r=-1;++r<o;)r in w&&l.get(w[r])!==!0&&(y[r]=n[r])}else{for(r=-1;++r<b;)u=n[r],e=i[r],u?(u.__data__=e,v[r]=u):c[r]=yo(e);for(;a>r;++r)c[r]=yo(i[r]);for(;o>r;++r)y[r]=n[r]}c.update=v;c.parentNode=v.parentNode=y.parentNode=n.parentNode;s.push(c);f.push(v);h.push(y)}var r,o,i=-1,u=this.length;if(!arguments.length){for(n=new Array(u=(r=this[0]).length);++i<u;)(o=r[i])&&(n[i]=o.__data__);return n}var s=ca([]),f=dt([]),h=dt([]);if("function"==typeof n)for(;++i<u;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<u;)e(r=this[i],n);return f.enter=function(){return s},f.exit=function(){return h},f};e.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")};e.filter=function(n){var u,f,r,e=[],t,o,i,s;for("function"!=typeof n&&(n=ha(n)),t=0,o=this.length;o>t;t++)for(e.push(u=[]),u.parentNode=(f=this[t]).parentNode,i=0,s=f.length;s>i;i++)(r=f[i])&&n.call(r,r.__data__,i,t)&&u.push(r);return dt(e)};e.order=function(){for(var i=-1,f=this.length;++i<f;)for(var t,r=this[i],u=r.length-1,n=r[u];--u>=0;)(t=r[u])&&(n&&n!==t.nextSibling&&n.parentNode.insertBefore(t,n),n=t);return this};e.sort=function(n){n=ak.apply(this,arguments);for(var t=-1,i=this.length;++t<i;)this[t].sort(n);return this.order()};e.each=function(n){return vt(this,function(t,i,r){n.call(t,t.__data__,i,r)})};e.call=function(n){var t=ot(arguments);return n.apply(t[0]=this,t),this};e.empty=function(){return!this.node()};e.node=function(){for(var i,n=0,r=this.length;r>n;n++)for(var u=this[n],t=0,f=u.length;f>t;t++)if(i=u[t],i)return i;return null};e.size=function(){var n=0;return vt(this,function(){++n}),n};st=[];n.selection.enter=ca;n.selection.enter.prototype=st;st.append=e.append;st.empty=e.empty;st.node=e.node;st.call=e.call;st.size=e.size;st.select=function(n){for(var i,h,r,e,o,t,u,s=[],f=-1,c=this.length;++f<c;)for(o=(t=this[f]).update,s.push(r=[]),r.parentNode=t.parentNode,i=-1,h=t.length;++i<h;)(u=t[i])?(r.push(o[i]=e=n.call(t.parentNode,u.__data__,i,f)),e.__data__=u.__data__):r.push(null);return dt(s)};st.insert=function(n,t){return arguments.length<2&&(t=vk(this)),e.insert.call(this,n,t)};n.select=function(n){var t;return"string"==typeof n?(t=[ic(n,p)],t.parentNode=p.documentElement):(t=[n],t.parentNode=al(n)),dt([t])};n.selectAll=function(n){var t;return"string"==typeof n?(t=ot(rc(n,p)),t.parentNode=p.documentElement):(t=ot(n),t.parentNode=null),dt([t])};e.on=function(n,t,i){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(i in n)this.each(la(i,n[i],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;i=!1}return this.each(la(n,t,i))};fe=n.map({mouseenter:"mouseover",mouseleave:"mouseout"});p&&fe.forEach(function(n){"on"+n in p&&fe.remove(n)});ub=0;n.mouse=function(n){return po(n,lo())};ee=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;n.touch=function(n,t,i){if(arguments.length<3&&(i=t,t=lo().changedTouches),t)for(var u,r=0,f=t.length;f>r;++r)if((u=t[r]).identifier===i)return po(n,u)};n.behavior.drag=function(){function t(){this.on("mousedown.drag",f).on("touchstart.drag",e)}function r(t,r,f,e,o){return function(){function b(){var t,i,n=r(v,h);n&&(t=n[0]-c[0],i=n[1]-c[1],w|=t|i,c=n,y({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:t,dy:i}))}function k(){r(v,h)&&(d.on(e+l,null).on(o+l,null),g(w),y({type:"dragend"}))}var s,a=this,p=n.event.target,v=a.parentNode,y=u.of(a,arguments),w=0,h=t(),l=".drag"+(null==h?"":"-"+h),d=n.select(f(p)).on(e+l,b).on(o+l,k),g=pu(p),c=r(v,h);i?(s=i.apply(a,arguments),s=[s.x-c[0],s.y-c[1]]):s=[0,0];y({type:"dragstart"})}}var u=ao(t,"drag","dragstart","dragend"),i=null,f=r(l,n.mouse,bt,"mousemove","mouseup"),e=r(pk,n.touch,v,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},n.rebind(t,u,"on")};n.touches=function(n,t){return arguments.length<2&&(t=lo().touches),t?ot(t).map(function(t){var i=po(n,t);return i.identifier=t.identifier,i}):[]};var t=1e-6,oe=t*t,f=Math.PI,d=2*f,iut=d-t,h=f/2,u=f/180,s=180/f,uu=Math.SQRT2,fc=2,fb=4;n.interpolateZoom=function(n,t){var e,u,c=n[0],l=n[1],i=n[2],p=t[0],w=t[1],r=t[2],o=p-c,s=w-l,h=o*o+s*s;if(oe>h)u=Math.log(r/i)/uu,e=function(n){return[c+n*o,l+n*s,i*Math.exp(uu*n*u)]};else{var a=Math.sqrt(h),v=(r*r-i*i+fb*h)/(2*i*fc*a),y=(r*r-i*i-fb*h)/(2*r*fc*a),f=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);u=(b-f)/uu;e=function(n){var t=n*u,r=pa(f),e=i/(fc*a)*(r*bk(uu*t+f)-wk(f));return[c+e*o,l+e*s,i*r/pa(uu*t+f)]}}return e.duration=1e3*u,e};n.behavior.zoom=function(){function i(n){n.on(it,ft).on(ec+".zoom",at).on("dblclick.zoom",vt).on(rt,et)}function s(n){return[(n[0]-t.x)/t.k,(n[1]-t.y)/t.k]}function lt(n){return[n[0]*t.k+t.x,n[1]*t.k+t.y]}function h(n){t.k=Math.max(w[0],Math.min(w[1],n))}function c(n,i){i=lt(i);t.x+=n[0]-i[0];t.y+=n[1]-i[1]}function ut(u,f,e,o){u.__chart__={x:t.x,y:t.y,k:t.k};h(Math.pow(2,o));c(r=f,e);u=n.select(u);b>0&&(u=u.transition().duration(b));u.call(i.event)}function k(){a&&a.domain(nt.range().map(function(n){return(n-t.x)/t.k}).map(nt.invert));v&&v.domain(tt.range().map(function(n){return(n-t.y)/t.k}).map(tt.invert))}function f(n){st++||n({type:"zoomstart"})}function e(n){k();n({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function u(n){--st||(n({type:"zoomend"}),r=null)}function ft(){function h(){r=1;c(n.mouse(t),v);e(i)}function l(){a.on(ht,null).on(ct,null);y(r);u(i)}var t=this,i=o.of(t,arguments),r=0,a=n.select(bt(t)).on(ht,h).on(ct,l),v=s(n.mouse(t)),y=pu(t);eo.call(t);f(i)}function et(){function y(){var u=n.touches(i);return w=t.k,u.forEach(function(n){n.identifier in r&&(r[n.identifier]=s(n))}),u}function p(){var s=n.event.target,u,o,f;n.select(s).on(tt,d).on(ot,nt);b.push(s);for(var h=n.event.changedTouches,e=0,p=h.length;p>e;++e)r[h[e].identifier]=null;if(u=y(),o=Date.now(),1===u.length)500>o-g&&(f=u[0],ut(i,f,r[f.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),kt()),g=o;else if(u.length>1){var f=u[0],c=u[1],l=f[0]-c[0],v=f[1]-c[1];a=l*l+v*v}}function d(){var t,f,u,o,y=n.touches(i),v,p,s,b;for(eo.call(i),v=0,p=y.length;p>v;++v,o=null)if(u=y[v],o=r[u.identifier]){if(f)break;t=u;f=o}o&&(s=(s=u[0]-t[0])*s+(s=u[1]-t[1])*s,b=a&&Math.sqrt(s/a),t=[(t[0]+u[0])/2,(t[1]+u[1])/2],f=[(f[0]+o[0])/2,(f[1]+o[1])/2],h(b*w));g=null;c(t,f);e(l)}function nt(){var e;if(n.event.touches.length){for(var i=n.event.changedTouches,t=0,f=i.length;f>t;++t)delete r[i[t].identifier];for(e in r)return void y()}n.selectAll(b).on(v,null);k.on(it,ft).on(rt,et);st();u(l)}var w,i=this,l=o.of(i,arguments),r={},a=0,v=".zoom-"+n.event.changedTouches[0].identifier,tt="touchmove"+v,ot="touchend"+v,b=[],k=n.select(i),st=pu(i);p();f(l);k.on(it,null).on(rt,p)}function at(){var i=o.of(this,arguments);l?clearTimeout(l):(eo.call(this),ot=s(r=d||n.mouse(this)),f(i));l=setTimeout(function(){l=null;u(i)},50);kt();h(Math.pow(2,.002*se())*t.k);c(r,ot);e(i)}function vt(){var i=n.mouse(this),r=Math.log(t.k)/Math.LN2;ut(this,i,s(i),n.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var ot,r,d,l,g,nt,a,tt,v,t={x:0,y:0,k:1},y=[960,500],w=oc,b=250,st=0,it="mousedown.zoom",ht="mousemove.zoom",ct="mouseup.zoom",rt="touchstart.zoom",o=ao(i,"zoomstart","zoom","zoomend");return ec||(ec="onwheel"in p?(se=function(){return-n.event.deltaY*(n.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(se=function(){return n.event.wheelDelta},"mousewheel"):(se=function(){return-n.event.detail},"MozMousePixelScroll")),i.event=function(i){i.each(function(){var i=o.of(this,arguments),s=t;di?n.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};f(i)}).tween("zoom:zoom",function(){var u=y[0],h=y[1],f=r?r[0]:u/2,o=r?r[1]:h/2,c=n.interpolateZoom([(f-t.x)/t.k,(o-t.y)/t.k,u/t.k],[(f-s.x)/s.k,(o-s.y)/s.k,u/s.k]);return function(n){var r=c(n),s=u/r[2];this.__chart__=t={x:f-r[0]*s,y:o-r[1]*s,k:s};e(i)}}).each("interrupt.zoom",function(){u(i)}).each("end.zoom",function(){u(i)}):(this.__chart__=t,f(i),e(i),u(i))})},i.translate=function(n){return arguments.length?(t={x:+n[0],y:+n[1],k:t.k},k(),i):[t.x,t.y]},i.scale=function(n){return arguments.length?(t={x:t.x,y:t.y,k:null},h(+n),k(),i):t.k},i.scaleExtent=function(n){return arguments.length?(w=null==n?oc:[+n[0],+n[1]],i):w},i.center=function(n){return arguments.length?(d=n&&[+n[0],+n[1]],i):d},i.size=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],i):y},i.duration=function(n){return arguments.length?(b=+n,i):b},i.x=function(n){return arguments.length?(a=n,nt=n.copy(),t={x:0,y:0,k:1},i):a},i.y=function(n){return arguments.length?(v=n,tt=n.copy(),t={x:0,y:0,k:1},i):v},n.rebind(i,o,"on")};oc=[0,1/0];n.color=si;si.prototype.toString=function(){return this.rgb()+""};n.hsl=ft;he=ft.prototype=new si;he.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ft(this.h,this.s,this.l/n)};he.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ft(this.h,this.s,n*this.l)};he.rgb=function(){return bo(this.h,this.s,this.l)};n.hcl=nt;ce=nt.prototype=new si;ce.brighter=function(n){return new nt(this.h,this.c,Math.min(100,this.l+le*(arguments.length?n:1)))};ce.darker=function(n){return new nt(this.h,this.c,Math.max(0,this.l-le*(arguments.length?n:1)))};ce.rgb=function(){return ko(this.h,this.c,this.l).rgb()};n.lab=tt;var le=18,eb=.95047,ob=1,sb=1.08883,sc=tt.prototype=new si;sc.brighter=function(n){return new tt(Math.min(100,this.l+le*(arguments.length?n:1)),this.a,this.b)};sc.darker=function(n){return new tt(Math.max(0,this.l-le*(arguments.length?n:1)),this.a,this.b)};sc.rgb=function(){return ba(this.l,this.a,this.b)};n.rgb=b;fu=b.prototype=new si;fu.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var i=this.r,r=this.g,u=this.b,t=30;return i||r||u?(i&&t>i&&(i=t),r&&t>r&&(r=t),u&&t>u&&(u=t),new b(Math.min(255,i/n),Math.min(255,r/n),Math.min(255,u/n))):new b(t,t,t)};fu.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new b(n*this.r,n*this.g,n*this.b)};fu.hsl=function(){return nv(this.r,this.g,this.b)};fu.toString=function(){return"#"+nr(this.r)+nr(this.g)+nr(this.b)};eu=n.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eu.forEach(function(n,t){eu.set(n,da(t))});n.functor=o;n.xhr=us(v);n.dsv=function(n,t){function i(n,i,r){arguments.length<3&&(r=i,i=null);var e=bu(n,t,null==i?u:f(i),r);return e.row=function(n){return arguments.length?e.response(null==(i=n)?u:f(n)):i},e}function u(n){return i.parse(n.responseText)}function f(n){return function(t){return i.parse(t.responseText,n)}}function e(t){return t.map(r).join(n)}function r(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),s=n.charCodeAt(0);return i.parse=function(n,t){var r;return i.parseRows(n,function(n,i){if(r)return r(n,i-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,i){return t(u(n),i)}:u})},i.parseRows=function(n,t){function h(){var f,t,u,h;if(i>=o)return e;if(r)return r=!1,c;if(f=i,34===n.charCodeAt(f)){for(t=f;t++<o;)if(34===n.charCodeAt(t)){if(34!==n.charCodeAt(t+1))break;++t}return i=t+2,u=n.charCodeAt(t+1),13===u?(r=!0,10===n.charCodeAt(t+2)&&++i):10===u&&(r=!0),n.slice(f+1,t).replace(/""/g,'"')}for(;o>i;){if(u=n.charCodeAt(i++),h=1,10===u)r=!0;else if(13===u)r=!0,10===n.charCodeAt(i)&&(++i,++h);else if(u!==s)continue;return n.slice(f,i-h)}return n.slice(f)}for(var f,u,r,c={},e={},l=[],o=n.length,i=0,a=0;(u=h())!==e;){for(f=[];u!==c&&u!==e;)f.push(u),u=h();t&&null==(f=t(f,a++))||l.push(f)}return l},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var f=new so,u=[];return t.forEach(function(n){for(var t in n)f.has(t)||u.push(f.add(t))}),[u.map(r).join(n)].concat(t.map(function(t){return u.map(function(n){return r(t[n])}).join(n)})).join("\n")},i.formatRows=function(n){return n.map(e).join("\n")},i};n.csv=n.dsv(",","text/csv");n.tsv=n.dsv("\t","text/tab-separated-values");hc=this[ho(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};n.timer=function(){ku.apply(this,arguments)};n.timer.flush=function(){iv();rv()};n.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};hb=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(gk);n.formatPrefix=function(t,i){var r=0;return(t=+t)&&(0>t&&(t*=-1),i&&(t=n.round(t,es(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),hb[8+r/3]};var cb=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,rut=n.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(t,i){return(t=n.round(t,es(t,i))).toFixed(Math.max(0,Math.min(20,es(t*(1+1e-15),i))))}}),i=n.time={},y=Date;yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ht.setUTCDate.apply(this._,arguments)},setDay:function(){ht.setUTCDay.apply(this._,arguments)},setFullYear:function(){ht.setUTCFullYear.apply(this._,arguments)},setHours:function(){ht.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ht.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ht.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ht.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ht.setUTCSeconds.apply(this._,arguments)},setTime:function(){ht.setTime.apply(this._,arguments)}};ht=Date.prototype;i.year=hi(function(n){return n=i.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()});i.years=i.year.range;i.years.utc=i.year.utc.range;i.day=hi(function(n){var t=new y(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1});i.days=i.day.range;i.days.utc=i.day.utc.range;i.dayOfYear=function(n){var t=i.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var r=i[n]=hi(function(n){return(n=i.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)-(r!==t)});i[n+"s"]=r.range;i[n+"s"].utc=r.utc.range;i[n+"OfYear"]=function(n){var r=i.year(n).getDay();return Math.floor((i.dayOfYear(n)+(r+t)%7)/7)}});i.week=i.sunday;i.weeks=i.sunday.range;i.weeks.utc=i.sunday.utc.range;i.weekOfYear=i.sundayOfYear;var lb={"-":"",_:" ",0:"0"},c=/^\s*\d+/,ab=/^%/;n.locale=function(n){return{numberFormat:nd(n),timeFormat:id(n)}};cc=n.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});n.format=cc.numberFormat;n.geo={};os.prototype={s:0,t:0,add:function(n){ev(n,this.t,ou);ev(ou.s,this.s,this);this.s?this.t+=ou.t:this.s=ou.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};ou=new os;n.geo.stream=function(n,t){n&&lc.hasOwnProperty(n.type)?lc[n.type](n,t):tf(n,t)};lc={Feature:function(n,t){tf(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)tf(i[r].geometry,t)}};ac={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){ss(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ss(i[r],t,0)},Polygon:function(n,t){ov(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ov(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)tf(i[r],t)}};n.geo.area=function(t){return we=0,n.geo.stream(t,k),we};ti=new os;k={sphere:function(){we+=4*f},point:l,lineStart:l,lineEnd:l,polygonStart:function(){ti.reset();k.lineStart=kd},polygonEnd:function(){var n=2*ti;we+=0>n?4*f+n:n;k.lineStart=k.lineEnd=k.point=l}};n.geo.bounds=function(){function w(n,t){v.push(l=[i=n,f=n]);o>t&&(o=t);t>h&&(h=t)}function b(n,t){var d=ci([n*u,t*u]),v;if(y){var b=tr(y,d),nt=[b[1],-b[0],0],c=tr(nt,b);ff(c);c=ef(c);var g=n-a,p=g>0?1:-1,l=c[0]*s*p,k=r(g)>180;k^(l>p*a&&p*n>l)?(v=c[1]*s,v>h&&(h=v)):(l=(l+360)%360-180,k^(l>p*a&&p*n>l))?(v=-c[1]*s,o>v&&(o=v)):(o>t&&(o=t),t>h&&(h=t));k?a>n?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n):f>=i?(i>n&&(i=n),n>f&&(f=n)):n>a?e(i,n)>e(i,f)&&(f=n):e(n,f)>e(i,f)&&(i=n)}else w(n,t);y=d;a=n}function d(){c.point=b}function g(){l[0]=i;l[1]=f;c.point=w;y=null}function nt(n,t){if(y){var i=n-a;p+=r(i)>180?i+(i>0?360:-360):i}else it=n,rt=t;k.point(n,t);b(n,t)}function ut(){k.lineStart()}function ft(){nt(it,rt);k.lineEnd();r(p)>t&&(i=-(f=180));l[0]=i;l[1]=f;y=null}function e(n,t){return(t-=n)<0?t+360:t}function et(n,t){return n[0]-t[0]}function tt(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var i,o,f,h,a,it,rt,y,p,v,l,c={point:w,lineStart:d,lineEnd:g,polygonStart:function(){c.point=nt;c.lineStart=ut;c.lineEnd=ft;p=0;k.polygonStart()},polygonEnd:function(){k.polygonEnd();c.point=w;c.lineStart=d;c.lineEnd=g;0>ti?(i=-(f=180),o=-(h=90)):p>t?h=90:-t>p&&(o=-90);l[0]=i;l[1]=f}};return function(t){var a;if(h=f=-(i=o=1/0),v=[],n.geo.stream(t,c),a=v.length,a){v.sort(et);for(var u,s=1,r=v[0],y=[r];a>s;++s)u=v[s],tt(u[0],r)||tt(u[1],r)?(e(r[0],u[1])>e(r[0],r[1])&&(r[1]=u[1]),e(u[0],r[1])>e(r[0],r[1])&&(r[0]=u[0])):y.push(r=u);for(var p,u,w=-(1/0),a=y.length-1,s=0,r=y[a];a>=s;r=u,++s)u=y[s],(p=e(r[1],u[0]))>w&&(w=p,i=u[0],f=r[1])}return v=l=null,i===1/0||o===1/0?[[NaN,NaN],[NaN,NaN]]:[[i,o],[f,h]]}}();n.geo.centroid=function(i){su=be=pi=wi=wt=ii=ri=ct=sr=hr=ui=0;n.geo.stream(i,rt);var r=sr,u=hr,f=ui,e=r*r+u*u+f*f;return oe>e&&(r=ii,u=ri,f=ct,t>be&&(r=pi,u=wi,f=wt),e=r*r+u*u+f*f,oe>e)?[NaN,NaN]:[Math.atan2(u,r)*s,gt(f/Math.sqrt(e))*s]};var su,be,pi,wi,wt,ii,ri,ct,sr,hr,ui,rt={sphere:l,point:cs,lineStart:sv,lineEnd:hv,polygonStart:function(){rt.lineStart=dd},polygonEnd:function(){rt.lineStart=sv}},vb=vv(yr,tg,rg,[-f,-f/2]),ke=1e9;n.geo.clipExtent=function(){var t,i,r,u,n,f,e={stream:function(t){return n&&(n.valid=!1),n=f(t),n.valid=!0,n},extent:function(o){return arguments.length?(f=wv(t=+o[0][0],i=+o[0][1],r=+o[1][0],u=+o[1][1]),n&&(n.valid=!1,n=null),e):[[t,i],[r,u]]}};return e.extent([[0,0],[960,500]])};(n.geo.conicEqualArea=function(){return ls(bv)}).raw=bv;n.geo.albers=function(){return n.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};n.geo.albersUsa=function(){function r(n){var t=n[0],i=n[1];return u=null,s(t,i),u||(h(t,i),u)||c(t,i),u}var u,s,h,c,i=n.geo.albers(),f=n.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),e=n.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o={point:function(n,t){u=[n,t]}};return r.invert=function(n){var u=i.scale(),o=i.translate(),t=(n[0]-o[0])/u,r=(n[1]-o[1])/u;return(r>=.12&&.234>r&&t>=-.425&&-.214>t?f:r>=.166&&.234>r&&t>=-.214&&-.115>t?e:i).invert(n)},r.stream=function(n){var t=i.stream(n),r=f.stream(n),u=e.stream(n);return{point:function(n,i){t.point(n,i);r.point(n,i);u.point(n,i)},sphere:function(){t.sphere();r.sphere();u.sphere()},lineStart:function(){t.lineStart();r.lineStart();u.lineStart()},lineEnd:function(){t.lineEnd();r.lineEnd();u.lineEnd()},polygonStart:function(){t.polygonStart();r.polygonStart();u.polygonStart()},polygonEnd:function(){t.polygonEnd();r.polygonEnd();u.polygonEnd()}}},r.precision=function(n){return arguments.length?(i.precision(n),f.precision(n),e.precision(n),r):i.precision()},r.scale=function(n){return arguments.length?(i.scale(n),f.scale(.35*n),e.scale(n),r.translate(i.translate())):i.scale()},r.translate=function(n){if(!arguments.length)return i.translate();var u=i.scale(),l=+n[0],a=+n[1];return s=i.translate(n).clipExtent([[l-.455*u,a-.238*u],[l+.455*u,a+.238*u]]).stream(o).point,h=f.translate([l-.307*u,a+.201*u]).clipExtent([[l-.425*u+t,a+.12*u+t],[l-.214*u-t,a+.234*u-t]]).stream(o).point,c=e.translate([l-.205*u,a+.212*u]).clipExtent([[l-.214*u+t,a+.166*u+t],[l-.115*u-t,a+.234*u-t]]).stream(o).point,r},r.scale(1070)};var vc,yc,de,ge,no,to,fi={point:l,lineStart:l,lineEnd:l,polygonStart:function(){yc=0;fi.lineStart=eg},polygonEnd:function(){fi.lineStart=fi.lineEnd=fi.point=l;vc+=r(yc/2)}},uut={point:og,lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l},ut={point:li,lineStart:dv,lineEnd:gv,polygonStart:function(){ut.lineStart=hg},polygonEnd:function(){ut.point=li;ut.lineStart=dv;ut.lineEnd=gv}};n.geo.path=function(){function t(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),f&&f.valid||(f=u(i)),n.geo.stream(t,f)),i.result()}function e(){return f=null,t}var o,s,u,i,f,r=4.5;return t.area=function(t){return vc=0,n.geo.stream(t,u(fi)),vc},t.centroid=function(t){return pi=wi=wt=ii=ri=ct=sr=hr=ui=0,n.geo.stream(t,u(ut)),ui?[sr/ui,hr/ui]:ct?[ii/ct,ri/ct]:wt?[pi/wt,wi/wt]:[NaN,NaN]},t.bounds=function(t){return no=to=-(de=ge=1/0),n.geo.stream(t,u(uut)),[[de,ge],[no,to]]},t.projection=function(n){return arguments.length?(u=(o=n)?n.stream||lg(n):v,e()):o},t.context=function(n){return arguments.length?(i=null==(s=n)?new sg:new cg(n),"function"!=typeof r&&i.pointRadius(r),e()):s},t.pointRadius=function(n){return arguments.length?(r="function"==typeof n?n:(i.pointRadius(+n),+n),t):r},t.projection(n.geo.albersUsa()).context(null)};n.geo.transform=function(n){return{stream:function(t){var i=new ty(t);for(var r in n)i[r]=n[r];return i}}};ty.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};n.geo.projection=ni;n.geo.projectionMutator=as;(n.geo.equirectangular=function(){return ni(pr)}).raw=pr.invert=pr;n.geo.rotation=function(n){function t(t){return t=n(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t}return n=vs(n[0]%360*u,n[1]*u,n.length>2?n[2]*u:0),t.invert=function(t){return t=n.invert(t[0]*u,t[1]*u),t[0]*=s,t[1]*=s,t},t};uy.invert=pr;n.geo.circle=function(){function n(){var n="function"==typeof t?t.apply(this,arguments):t,f=vs(-n[0]*u,-n[1]*u,0).invert,i=[];return r(null,null,1,{point:function(n,t){i.push(n=f(n,t));n[0]*=s;n[1]*=s}}),{type:"Polygon",coordinates:[i]}}var i,r,t=[0,0],f=6;return n.origin=function(i){return arguments.length?(t=i,n):t},n.angle=function(t){return arguments.length?(r=ys((i=+t)*u,f*u),n):i},n.precision=function(t){return arguments.length?(r=ys(i*u,(f=+t)*u),n):f},n.angle(90)};n.geo.distance=function(n,t){var i,f=(t[0]-n[0])*u,e=n[1]*u,o=t[1]*u,a=Math.sin(f),s=Math.cos(f),h=Math.sin(e),c=Math.cos(e),l=Math.sin(o),r=Math.cos(o);return Math.atan2(Math.sqrt((i=r*a)*i+(i=c*l-h*r*s)*i),h*l+c*r*s)};n.geo.graticule=function(){function i(){return{type:"MultiLineString",coordinates:d()}}function d(){return n.range(Math.ceil(f/v)*v,u,v).map(b).concat(n.range(Math.ceil(o/y)*y,e,y).map(k)).concat(n.range(Math.ceil(h/a)*a,s,a).filter(function(n){return r(n%v)>t}).map(g)).concat(n.range(Math.ceil(l/w)*w,c,w).filter(function(n){return r(n%y)>t}).map(nt))}var s,h,u,f,c,l,e,o,g,nt,b,k,a=10,w=a,v=90,y=360,p=2.5;return i.lines=function(){return d().map(function(n){return{type:"LineString",coordinates:n}})},i.outline=function(){return{type:"Polygon",coordinates:[b(f).concat(k(e).slice(1),b(u).reverse().slice(1),k(o).reverse().slice(1))]}},i.extent=function(n){return arguments.length?i.majorExtent(n).minorExtent(n):i.minorExtent()},i.majorExtent=function(n){return arguments.length?(f=+n[0][0],u=+n[1][0],o=+n[0][1],e=+n[1][1],f>u&&(n=f,f=u,u=n),o>e&&(n=o,o=e,e=n),i.precision(p)):[[f,o],[u,e]]},i.minorExtent=function(n){return arguments.length?(h=+n[0][0],s=+n[1][0],l=+n[0][1],c=+n[1][1],h>s&&(n=h,h=s,s=n),l>c&&(n=l,l=c,c=n),i.precision(p)):[[h,l],[s,c]]},i.step=function(n){return arguments.length?i.majorStep(n).minorStep(n):i.minorStep()},i.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],i):[v,y]},i.minorStep=function(n){return arguments.length?(a=+n[0],w=+n[1],i):[a,w]},i.precision=function(n){return arguments.length?(p=+n,g=hy(l,c,90),nt=cy(h,s,p),b=hy(o,e,90),k=cy(f,u,p),i):p},i.majorExtent([[-180,-90+t],[180,90-t]]).minorExtent([[-180,-80-t],[180,80+t]])};n.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[u||i.apply(this,arguments),f||r.apply(this,arguments)]}}var u,f,i=ps,r=ws;return t.distance=function(){return n.geo.distance(u||i.apply(this,arguments),f||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,u="function"==typeof n?null:n,t):i},t.target=function(n){return arguments.length?(r=n,f="function"==typeof n?null:n,t):r},t.precision=function(){return arguments.length?t:0},t};n.geo.interpolate=function(n,t){return ag(n[0]*u,n[1]*u,t[0]*u,t[1]*u)};n.geo.length=function(t){return pc=0,n.geo.stream(t,bi),pc};bi={sphere:l,point:l,lineStart:vg,lineEnd:l,polygonStart:l,polygonEnd:l};wc=wr(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(n.geo.azimuthalEqualArea=function(){return ni(wc)}).raw=wc;bc=wr(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},v);(n.geo.azimuthalEquidistant=function(){return ni(bc)}).raw=bc;(n.geo.conicConformal=function(){return ls(ly)}).raw=ly;(n.geo.conicEquidistant=function(){return ls(ay)}).raw=ay;kc=wr(function(n){return 1/n},Math.atan);(n.geo.gnomonic=function(){return ni(kc)}).raw=kc;hf.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-h]};(n.geo.mercator=function(){return vy(hf)}).raw=hf;dc=wr(function(){return 1},Math.asin);(n.geo.orthographic=function(){return ni(dc)}).raw=dc;gc=wr(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(n.geo.stereographic=function(){return ni(gc)}).raw=gc;bs.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-h]};(n.geo.transverseMercator=function(){var n=vy(bs),i=n.center,t=n.rotate;return n.center=function(n){return n?i([-n[1],n[0]]):(n=i(),[n[1],-n[0]])},n.rotate=function(n){return n?t([n[0],n[1],n.length>2?n[2]+90:90]):(n=t(),[n[0],n[1],n[2]-90])},t([0,0,90])}).raw=bs;n.geom={};n.geom.hull=function(n){function t(n){if(n.length<3)return[];for(var l=o(i),a=o(r),h=n.length,u=[],c=[],t=0;h>t;t++)u.push([+l.call(this,n[t],t),+a.call(this,n[t],t),t]);for(u.sort(yg),t=0;h>t;t++)c.push([u[t][0],-u[t][1]]);var f=yy(u),e=yy(c),v=e[0]===f[0],y=e[e.length-1]===f[f.length-1],s=[];for(t=f.length-1;t>=0;--t)s.push(n[u[f[t]][2]]);for(t=+v;t<e.length-y;++t)s.push(n[u[e[t]][2]]);return s}var i=ir,r=br;return arguments.length?t(n):(t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(r=n,t):r},t)};n.geom.polygon=function(n){return re(n,hu),n};hu=n.geom.polygon.prototype=[];hu.area=function(){for(var t,i=-1,r=this.length,n=this[r-1],u=0;++i<r;)t=n,n=this[i],u+=t[1]*n[0]-t[0]*n[1];return.5*u};hu.centroid=function(n){var i,r,u=-1,f=this.length,e=0,o=0,t=this[f-1];for(arguments.length||(n=-1/(6*this.area()));++u<f;)i=t,t=this[u],r=i[0]*t[1]-t[0]*i[1],e+=(i[0]+t[0])*r,o+=(i[1]+t[1])*r;return[e*n,o*n]};hu.clip=function(n){for(var f,e,o,t,i,r,s=py(n),h=-1,c=this.length-py(this),u=this[c-1];++h<c;){for(f=n.slice(),n.length=0,t=this[h],i=f[(o=f.length-s)-1],e=-1;++e<o;)r=f[e],ks(r,u,t)?(ks(i,u,t)||n.push(ds(i,r,u,t)),n.push(r)):ks(i,u,t)&&n.push(ds(i,r,u,t)),i=r;s&&n.push(n[0]);u=t}return n};tl=[];il=[];ky.prototype.prepare=function(){for(var t,n=this.edges,i=n.length;i--;)t=n[i].edge,t.b&&t.a||n.splice(i,1);return n.sort(dy),n.length};lf.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nh.prototype={insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=np(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)r=i.U,i===r.L?(u=r.R,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(dr(this,i),n=i,i=n.U),i.C=!1,r.C=!0,gr(this,r))):(u=r.L,u&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(gr(this,i),n=i,i=n.U),i.C=!1,r.C=!0,dr(this,r))),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P);n.P&&(n.P.N=n.N);n.N=n.P=null;var t,r,e,i=n.U,f=n.L,u=n.R;if(r=f?u?np(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,dr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,gr(this,t),t=i.R);t.C=i.C;i.C=t.R.C=!1;dr(this,i);n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,gr(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,dr(this,t),t=i.L);t.C=i.C;i.C=t.L.C=!1;gr(this,i);n=this._;break}t.C=!0;n=i;i=i.U}while(!n.C);n&&(n.C=!1)}}};n.geom.voronoi=function(n){function i(n){var o=new Array(n.length),t=r[0][0],i=r[0][1],f=r[1][0],e=r[1][1];return th(u(n),r).cells.forEach(function(r,u){var h=r.edges,s=r.site,c=o[u]=h.length?h.map(function(n){var t=n.start();return[t.x,t.y]}):s.x>=t&&s.x<=f&&s.y>=i&&s.y<=e?[[t,e],[f,e],[f,i],[t,i]]:[];c.point=n[u]}),o}function u(n){return n.map(function(n,i){return{x:Math.round(s(n,i)/t)*t,y:Math.round(h(n,i)/t)*t,i:i}})}var f=ir,e=br,s=f,h=e,r=lu;return n?i(n):(i.links=function(n){return th(u(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},i.triangles=function(n){var t=[];return th(u(n)).cells.forEach(function(i,r){for(var l,e,o=i.site,s=i.edges.sort(dy),h=-1,c=s.length,u=s[c-1].edge,f=u.l===o?u.r:u.l;++h<c;)l=u,e=f,u=s[h].edge,f=u.l===o?u.r:u.l,r<e.i&&r<f.i&&fn(o,e,f)<0&&t.push([n[r],n[e.i],n[f.i]])}),t},i.x=function(n){return arguments.length?(s=o(f=n),i):f},i.y=function(n){return arguments.length?(h=o(e=n),i):e},i.clipExtent=function(n){return arguments.length?(r=null==n?lu:n,i):r===lu?null:r},i.size=function(n){return arguments.length?i.clipExtent(n&&[[0,0],n]):r===lu?null:r&&r[1]},i)};lu=[[-1e6,-1e6],[1e6,1e6]];n.geom.delaunay=function(t){return n.geom.voronoi().triangles(t)};n.geom.quadtree=function(n,t,i,u,f){function e(n){function it(n,t,i,u,f,e,o,s){var h,c,l;isNaN(i)||isNaN(u)||(n.leaf?(h=n.x,c=n.y,null!=h?r(h-i)+r(c-u)<.01?nt(n,t,i,u,f,e,o,s):(l=n.point,n.x=n.y=n.point=null,nt(n,l,h,c,f,e,o,s),nt(n,t,i,u,f,e,o,s)):(n.x=i,n.y=u,n.point=t)):nt(n,t,i,u,f,e,o,s))}function nt(n,t,i,r,u,f,e,o){var s=.5*(u+e),h=.5*(f+o),c=i>=s,l=r>=h,a=l<<1|c;n.leaf=!1;n=n.nodes[a]||(n.nodes[a]=tp());c?u=s:e=s;l?f=h:o=h;it(n,t,i,r,u,f,e,o)}var l,d,g,e,tt,a,v,y,p,ft=o(s),et=o(h),b,k,rt,ut,w;if(null!=t)a=t,v=i,y=u,p=f;else if(y=p=-(a=v=1/0),d=[],g=[],tt=n.length,c)for(e=0;tt>e;++e)l=n[e],l.x<a&&(a=l.x),l.y<v&&(v=l.y),l.x>y&&(y=l.x),l.y>p&&(p=l.y),d.push(l.x),g.push(l.y);else for(e=0;tt>e;++e)b=+ft(l=n[e],e),k=+et(l,e),a>b&&(a=b),v>k&&(v=k),b>y&&(y=b),k>p&&(p=k),d.push(b),g.push(k);if(rt=y-a,ut=p-v,rt>ut?p=v+rt:y=a+ut,w=tp(),w.add=function(n){it(w,n,+ft(n,++e),+et(n,e),a,v,y,p)},w.visit=function(n){nu(n,w,a,v,y,p)},w.find=function(n){return sn(w,n[0],n[1],a,v,y,p)},e=-1,null==t){for(;++e<tt;)it(w,n[e],d[e],g[e],a,v,y,p);--e}else n.forEach(w.add);return d=g=n=l=null,w}var c,s=ir,h=br;return(c=arguments.length)?(s=en,h=on,3===c&&(f=i,u=t,i=t=0),e(n)):(e.x=function(n){return arguments.length?(s=n,e):s},e.y=function(n){return arguments.length?(h=n,e):h},e.extent=function(n){return arguments.length?(null==n?t=i=u=f=null:(t=+n[0][0],i=+n[0][1],u=+n[1][0],f=+n[1][1]),e):null==t?null:[[t,i],[u,f]]},e.size=function(n){return arguments.length?(null==n?t=i=u=f=null:(t=i=0,u=+n[0],f=+n[1]),e):null==t?null:[u-t,f-i]},e)};n.interpolateRgb=ih;n.interpolateObject=ip;n.interpolateNumber=pt;n.interpolateString=rp;io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;ro=new RegExp(io.source,"g");n.interpolate=ai;n.interpolators=[function(n,t){var i=typeof t;return("string"===i?eu.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ih:rp:t instanceof si?ih:Array.isArray(t)?vf:"object"===i&&isNaN(t)?ip:pt)(n,t)}];n.interpolateArray=vf;var yb=function(){return v},fut=n.map({linear:yb,poly:vn,quad:function(){return cn},cubic:function(){return ln},sin:function(){return yn},exp:function(){return pn},circle:function(){return wn},elastic:bn,back:kn,bounce:function(){return dn}}),eut=n.map({"in":v,out:up,"in-out":fp,"out-in":function(n){return fp(up(n))}});n.ease=function(n){var t=n.indexOf("-"),i=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return i=fut.get(i)||yb,r=eut.get(r)||v,hn(r(i.apply(null,tb.call(arguments,1))))};n.interpolateHcl=gn;n.interpolateHsl=ntt;n.interpolateLab=ttt;n.interpolateRound=ep;n.transform=function(t){var i=p.createElementNS(n.ns.prefix.svg,"g");return(n.transform=function(n){if(null!=n){i.setAttribute("transform",n);var t=i.transform.baseVal.consolidate()}return new op(t?t.matrix:pb)})(t)};op.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};pb={a:1,b:0,c:0,d:1,e:0,f:0};n.interpolateTransform=cp;n.layout={};n.layout.bundle=function(){return function(n){for(var t=[],i=-1,r=n.length;++i<r;)t.push(htt(n[i]));return t}};n.layout.chord=function(){function c(){var y,c,tt,t,a,k={},b=[],it=n.range(r),g=[],p,w;for(i=[],u=[],y=0,t=-1;++t<r;){for(c=0,a=-1;++a<r;)c+=f[t][a];b.push(c);g.push(n.range(r));y+=c}for(e&&it.sort(function(n,t){return e(b[n],b[t])}),o&&g.forEach(function(n,t){n.sort(function(n,i){return o(f[t][n],f[t][i])})}),y=(d-h*r)/y,c=0,t=-1;++t<r;){for(tt=c,a=-1;++a<r;){var v=it[t],nt=g[v][a],rt=f[v][nt],ut=c,ft=c+=rt*y;k[v+"-"+nt]={index:v,subindex:nt,startAngle:ut,endAngle:ft,value:rt}}u[v]={index:v,startAngle:tt,endAngle:c,value:b[v]};c+=h}for(t=-1;++t<r;)for(a=t-1;++a<r;)p=k[t+"-"+a],w=k[a+"-"+t],(p.value||w.value)&&i.push(p.value<w.value?{source:w,target:p}:{source:p,target:w});s&&l()}function l(){i.sort(function(n,t){return s((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var i,u,f,r,e,o,s,t={},h=0;return t.matrix=function(n){return arguments.length?(r=(f=n)&&f.length,i=u=null,t):f},t.padding=function(n){return arguments.length?(h=n,i=u=null,t):h},t.sortGroups=function(n){return arguments.length?(e=n,i=u=null,t):e},t.sortSubgroups=function(n){return arguments.length?(o=n,i=null,t):o},t.sortChords=function(n){return arguments.length?(s=n,i&&l(),t):s},t.chords=function(){return i||c(),i},t.groups=function(){return u||c(),u},t};n.layout.force=function(){function g(n){return function(t,i,r,u){var e;if(t.point!==n){var o=t.cx-n.x,s=t.cy-n.y,h=u-i,f=o*o+s*s;if(f>h*h/d)return b>f&&(e=t.charge/f,n.px-=o*e,n.py-=s*e),!0;t.point&&f&&b>f&&(e=t.pointCharge/f,n.px-=o*e,n.py-=s*e)}return!t.charge}}function nt(i){i.px=n.event.x;i.py=n.event.y;t.resume()}var o,l,r,a,y,p,t={},s=n.dispatch("start","tick","end"),f=[1,1],w=.9,h=out,c=sut,e=-30,b=hut,k=.1,d=.64,i=[],u=[];return t.tick=function(){if((r*=.99)<.005)return o=null,s.end({type:"end",alpha:r=0}),!0;for(var it,t,l,d,nt,c,v,b,tt=i.length,rt=u.length,h=0;rt>h;++h)t=u[h],l=t.source,d=t.target,v=d.x-l.x,b=d.y-l.y,(nt=v*v+b*b)&&(nt=r*y[h]*((nt=Math.sqrt(nt))-a[h])/nt,v*=nt,b*=nt,d.x-=v*(c=l.weight+d.weight?l.weight/(l.weight+d.weight):.5),d.y-=b*c,l.x+=v*(c=1-c),l.y+=b*c);if((c=r*k)&&(v=f[0]/2,b=f[1]/2,h=-1,c))for(;++h<tt;)t=i[h],t.x+=(v-t.x)*c,t.y+=(b-t.y)*c;if(e)for(ap(it=n.geom.quadtree(i),r,p),h=-1;++h<tt;)(t=i[h]).fixed||it.visit(g(t));for(h=-1;++h<tt;)t=i[h],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*w,t.y-=(t.py-(t.py=t.y))*w);s.tick({type:"tick",alpha:r})},t.nodes=function(n){return arguments.length?(i=n,t):i},t.links=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(f=n,t):f},t.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,t):h},t.distance=t.linkDistance,t.linkStrength=function(n){return arguments.length?(c="function"==typeof n?n:+n,t):c},t.friction=function(n){return arguments.length?(w=+n,t):w},t.charge=function(n){return arguments.length?(e="function"==typeof n?n:+n,t):e},t.chargeDistance=function(n){return arguments.length?(b=n*n,t):Math.sqrt(b)},t.gravity=function(n){return arguments.length?(k=+n,t):k},t.theta=function(n){return arguments.length?(d=n*n,t):Math.sqrt(d)},t.alpha=function(n){return arguments.length?(n=+n,r?n>0?r=n:(o.c=null,o.t=NaN,o=null,s.end({type:"end",alpha:r=0})):n>0&&(s.start({type:"start",alpha:r=n}),o=ku(t.tick)),t):r},t.start=function(){function v(t,i){var f;if(!o){for(o=new Array(s),r=0;s>r;++r)o[r]=[];for(r=0;l>r;++r)f=u[r],o[f.source.index].push(f.target),o[f.target.index].push(f.source)}for(var e,h=o[n],r=-1,c=h.length;++r<c;)if(!isNaN(e=h[r][t]))return e;return Math.random()*i}for(var o,r,s=i.length,l=u.length,w=f[0],b=f[1],n=0;s>n;++n)(r=i[n]).index=n,r.weight=0;for(n=0;l>n;++n)r=u[n],"number"==typeof r.source&&(r.source=i[r.source]),"number"==typeof r.target&&(r.target=i[r.target]),++r.source.weight,++r.target.weight;for(n=0;s>n;++n)r=i[n],isNaN(r.x)&&(r.x=v("x",w)),isNaN(r.y)&&(r.y=v("y",b)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof h)for(n=0;l>n;++n)a[n]=+h.call(this,u[n],n);else for(n=0;l>n;++n)a[n]=h;if(y=[],"function"==typeof c)for(n=0;l>n;++n)y[n]=+c.call(this,u[n],n);else for(n=0;l>n;++n)y[n]=c;if(p=[],"function"==typeof e)for(n=0;s>n;++n)p[n]=+e.call(this,i[n],n);else for(n=0;s>n;++n)p[n]=e;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){return l||(l=n.behavior.drag().origin(v).on("dragstart.force",ltt).on("drag.force",nt).on("dragend.force",att)),arguments.length?void this.on("mouseover.force",vtt).on("mouseout.force",ytt).call(l):l},n.rebind(t,s,"on")};var out=20,sut=1,hut=1/0;n.layout.hierarchy=function(){function n(u){var f,h=[u],c=[],o,e,s;for(u.depth=0;null!=(f=h.pop());)if(c.push(f),(e=r.call(n,f,f.depth))&&(o=e.length)){for(;--o>=0;)h.push(s=e[o]),s.parent=f,s.depth=f.depth+1;t&&(f.value=0);f.children=e}else t&&(f.value=+t.call(n,f,f.depth)||0),delete f.children;return et(u,function(n){var r,u;i&&(r=n.children)&&r.sort(i);t&&(u=n.parent)&&(u.value+=n.value)}),c}var i=btt,r=ptt,t=wtt;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(i){return arguments.length?(t=i,n):t},n.revalue=function(i){return t&&(iu(i,function(n){n.children&&(n.value=0)}),et(i,function(i){var r;i.children||(i.value=+t.call(n,i,i.depth)||0);(r=i.parent)&&(r.value+=i.value)})),i},n};n.layout.partition=function(){function r(n,t,i,u){var f=n.children,o,s,h,e;if(n.x=t,n.y=n.depth*u,n.dx=i,n.dy=u,f&&(o=f.length))for(e=-1,i=n.value?i/n.value:0;++e<o;)r(s=f[e],t,h=s.value*i,u),t+=h}function u(n){var t=n.children,i=0,f,r;if(t&&(f=t.length))for(r=-1;++r<f;)i=Math.max(i,u(t[r]));return 1+i}function i(n,i){var e=f.call(this,n,i);return r(e[0],0,t[0],t[1]/u(e[0])),e}var f=n.layout.hierarchy(),t=[1,1];return i.size=function(n){return arguments.length?(t=n,i):t},tu(i,f)};n.layout.pie=function(){function t(o){var a,h=o.length,s=o.map(function(n,i){return+e.call(t,n,i)}),c=+("function"==typeof r?r.apply(this,arguments):r),l=("function"==typeof u?u.apply(this,arguments):u)-c,v=Math.min(Math.abs(l)/h,+("function"==typeof f?f.apply(this,arguments):f)),y=v*(0>l?-1:1),p=n.sum(s),k=p?(l-h*y)/p:0,w=n.range(h),b=[];return null!=i&&w.sort(i===rl?function(n,t){return s[t]-s[n]}:function(n,t){return i(o[n],o[t])}),w.forEach(function(n){b[n]={data:o[n],value:a=s[n],startAngle:c,endAngle:c+=a*k+y,padAngle:v}}),b}var e=Number,i=rl,r=0,u=d,f=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(n){return arguments.length?(i=n,t):i},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(u=n,t):u},t.padAngle=function(n){return arguments.length?(f=n,t):f},t};rl={};n.layout.stack=function(){function t(s,h){var p,v,c,w,b,k;if(!(p=s.length))return s;var a=s.map(function(n,i){return r.call(t,n,i)}),l=a.map(function(n){return n.map(function(n,i){return[e.call(t,n,i),o.call(t,n,i)]})}),y=u.call(t,l,h);for(a=n.permute(a,y),l=n.permute(l,y),b=f.call(t,l,h),k=a[0].length,c=0;k>c;++c)for(i.call(t,a[0][c],w=b[c],l[0][c][1]),v=1;p>v;++v)i.call(t,a[v][c],w+=l[v-1][c][1],l[v][c][1]);return s}var r=v,u=rh,f=uh,i=nit,e=dtt,o=gtt;return t.values=function(n){return arguments.length?(r=n,t):r},t.order=function(n){return arguments.length?(u="function"==typeof n?n:wb.get(n)||rh,t):u},t.offset=function(n){return arguments.length?(f="function"==typeof n?n:bb.get(n)||uh,t):f},t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(i=n,t):i},t};wb=n.map({"inside-out":function(t){for(var i,u=t.length,f=t.map(tit),e=t.map(iit),l=n.range(u).sort(function(n,t){return f[n]-f[t]}),o=0,s=0,h=[],c=[],r=0;u>r;++r)i=l[r],s>o?(o+=e[i],h.push(i)):(s+=e[i],c.push(i));return c.reverse().concat(h)},reverse:function(t){return n.range(t.length).reverse()},"default":rh});bb=n.map({silhouette:function(n){for(var r,i,s=n.length,f=n[0].length,e=[],u=0,o=[],t=0;f>t;++t){for(r=0,i=0;s>r;r++)i+=n[r][t][1];i>u&&(u=i);e.push(i)}for(t=0;f>t;++t)o[t]=(u-e[t])/2;return o},wiggle:function(n){var i,t,r,u,h,c,f,e,o,a=n.length,l=n[0],v=l.length,s=[];for(s[0]=e=o=0,t=1;v>t;++t){for(i=0,u=0;a>i;++i)u+=n[i][t][1];for(i=0,h=0,f=l[t][0]-l[t-1][0];a>i;++i){for(r=0,c=(n[i][t][1]-n[i][t-1][1])/(2*f);i>r;++r)c+=(n[r][t][1]-n[r][t-1][1])/f;h+=c*n[i][t][1]}s[t]=e-=u?h/u*f:0;o>e&&(o=e)}for(t=0;v>t;++t)s[t]-=o;return s},expand:function(n){for(var t,r,u=n.length,f=n[0].length,o=1/u,e=[],i=0;f>i;++i){for(t=0,r=0;u>t;t++)r+=n[t][i][1];if(r)for(t=0;u>t;t++)n[t][i][1]/=r;else for(t=0;u>t;t++)n[t][i][1]=o}for(i=0;f>i;++i)e[i]=0;return e},zero:uh});n.layout.histogram=function(){function t(t,e){for(var o,s,l=[],h=t.map(r,this),a=u.call(this,h,e),c=f.call(this,a,h,e),e=-1,y=h.length,v=c.length-1,p=i?1:1/y;++e<v;)o=l[e]=[],o.dx=c[e+1]-(o.x=c[e]),o.y=0;if(v>0)for(e=-1;++e<y;)s=h[e],s>=a[0]&&s<=a[1]&&(o=l[n.bisect(c,s,1,v)-1],o.y+=p,o.push(t[e]));return l}var i=!0,r=Number,u=fit,f=uit;return t.value=function(n){return arguments.length?(r=n,t):r},t.range=function(n){return arguments.length?(u=o(n),t):u},t.bins=function(n){return arguments.length?(f="number"==typeof n?function(t){return vp(t,n)}:o(n),t):f},t.frequency=function(n){return arguments.length?(i=!!n,t):i},t};n.layout.pack=function(){function i(n,i){var c=f.call(this,n,i),e=c[0],o=u[0],s=u[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t},h;return(e.x=e.y=0,et(e,function(n){n.r=+l(n.value)}),et(e,wp),r)&&(h=r*(t?1:Math.max(2*e.r/o,2*e.r/s))/2,et(e,function(n){n.r+=h}),et(e,wp),et(e,function(n){n.r-=h})),bp(e,o/2,s/2,t?1:1/Math.max(2*e.r/o,2*e.r/s)),c}var t,f=n.layout.hierarchy().sort(eit),r=0,u=[1,1];return i.size=function(n){return arguments.length?(u=n,i):u},i.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,i):t},i.padding=function(n){return arguments.length?(r=+n,i):r},tu(i,f)};n.layout.tree=function(){function i(n,i){var p=e.call(this,n,i),c=p[0],v=o(c);if(et(v,s),v.parent.m=-v.z,iu(v,h),u)iu(c,f);else{var l=c,a=c,y=c;iu(c,function(n){n.x<l.x&&(l=n);n.x>a.x&&(a=n);n.depth>y.depth&&(y=n)});var w=r(l,a)/2-l.x,b=t[0]/(a.x+r(a,l)/2+w),k=t[1]/(y.depth||1);iu(c,function(n){n.x=(n.x+w)*b;n.y=n.depth*k})}return p}function o(n){for(var u,f={A:null,children:[n]},e=[f];null!=(u=e.pop());)for(var i,r=u.children,t=0,o=r.length;o>t;++t)e.push((r[t]=i={_:r[t],parent:u,children:(i=r[t].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:t}).a=i);return f.children[0]}function s(n){var i=n.children,f=n.parent.children,t=n.i?f[n.i-1]:null,u;i.length?(cit(n),u=(i[0].z+i[i.length-1].z)/2,t?(n.z=t.z+r(n._,t._),n.m=n.z-u):n.z=u):t&&(n.z=t.z+r(n._,t._));n.parent.A=c(n,t,n.parent.A||f[0])}function h(n){n._.x=n.z+n.parent.m;n.m+=n.parent.m}function c(n,t,i){if(t){for(var s,u=n,e=n,f=t,o=u.parent.children[0],h=u.m,c=e.m,l=f.m,a=o.m;f=oh(f),u=eh(u),f&&u;)o=eh(o),e=oh(e),e.a=n,s=f.z+l-u.z-h+r(f._,u._),s>0&&(hit(lit(f,n,i),n,s),h+=s,c+=s),l+=f.m,h+=u.m,a+=o.m,c+=e.m;f&&!oh(e)&&(e.t=f,e.m+=l-c);u&&!eh(o)&&(o.t=u,o.m+=h-a,i=n)}return i}function f(n){n.x*=t[0];n.y=n.depth*t[1]}var e=n.layout.hierarchy().sort(null).value(null),r=dp,t=[1,1],u=null;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n)?f:null,i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null==(t=n)?null:f,i):u?t:null},tu(i,e)};n.layout.cluster=function(){function i(n,i){var o,c=f.call(this,n,i),e=c[0],a=0;et(e,function(n){var t=n.children;t&&t.length?(n.x=vit(t),n.y=ait(t)):(n.x=o?a+=r(n,o):0,n.y=0,o=n)});var s=gp(e),h=nw(e),l=s.x-r(s,h)/2,v=h.x+r(h,s)/2;return et(e,u?function(n){n.x=(n.x-e.x)*t[0];n.y=(e.y-n.y)*t[1]}:function(n){n.x=(n.x-l)/(v-l)*t[0];n.y=(1-(e.y?n.y/e.y:1))*t[1]}),c}var f=n.layout.hierarchy().sort(null).value(null),r=dp,t=[1,1],u=!1;return i.separation=function(n){return arguments.length?(r=n,i):r},i.size=function(n){return arguments.length?(u=null==(t=n),i):u?null:t},i.nodeSize=function(n){return arguments.length?(u=null!=(t=n),i):u?t:null},tu(i,f)};n.layout.treemap=function(){function o(n,t){for(var r,i,u=-1,f=n.length;++u<f;)i=(r=n[u]).value*(0>t?0:t),r.area=isNaN(i)||0>=i?0:i}function a(n){var u=n.children;if(u&&u.length){var l,v,y,r=c(n),t=[],f=u.slice(),h=1/0,e="slice"===i?r.dx:"dice"===i?r.dy:"slice-dice"===i?1&n.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(o(f,r.dx*r.dy/n.value),t.area=0;(y=f.length)>0;)t.push(l=f[y-1]),t.area+=l.area,"squarify"!==i||(v=p(t,e))<=h?(f.pop(),h=v):(t.area-=t.pop().area,s(t,e,r,!1),e=Math.min(r.dx,r.dy),t.length=t.area=0,h=1/0);t.length&&(s(t,e,r,!0),t.length=t.area=0);u.forEach(a)}}function v(n){var u=n.children;if(u&&u.length){var i,r=c(n),f=u.slice(),t=[];for(o(f,r.dx*r.dy/n.value),t.area=0;i=f.pop();)t.push(i),t.area+=i.area,null!=i.z&&(s(t,i.z?r.dx:r.dy,r,!f.length),t.length=t.area=0);u.forEach(v)}}function p(n,t){for(var i,r=n.area,u=0,f=1/0,o=-1,s=n.length;++o<s;)(i=n[o].area)&&(f>i&&(f=i),i>u&&(u=i));return r*=r,t*=t,r?Math.max(t*u*e/r,r/(t*f*e)):1/0}function s(n,t,i,r){var f,h=-1,c=n.length,o=i.x,s=i.y,e=t?u(n.area/t):0;if(t==i.dx){for((r||e>i.dy)&&(e=i.dy);++h<c;)f=n[h],f.x=o,f.y=s,f.dy=e,o+=f.dx=Math.min(i.x+i.dx-o,e?u(f.area/e):0);f.z=!0;f.dx+=i.x+i.dx-o;i.y+=e;i.dy-=e}else{for((r||e>i.dx)&&(e=i.dx);++h<c;)f=n[h],f.x=o,f.y=s,f.dx=e,s+=f.dy=Math.min(i.y+i.dy-s,e?u(f.area/e):0);f.z=!1;f.dy+=i.y+i.dy-s;i.x+=e;i.dx-=e}}function t(n){var i=r||h(n),t=i[0];return t.x=t.y=0,t.value?(t.dx=f[0],t.dy=f[1]):t.dx=t.dy=0,r&&h.revalue(t),o([t],t.dx*t.dy/t.value),(r?v:a)(t),l&&(r=i),i}var r,h=n.layout.hierarchy(),u=Math.round,f=[1,1],y=null,c=sh,l=!1,i="squarify",e=.5*(1+Math.sqrt(5));return t.size=function(n){return arguments.length?(f=n,t):f},t.padding=function(n){function u(i){var r=n.call(t,i,i.depth);return null==r?sh(i):tw(i,"number"==typeof r?[r,r,r,r]:r)}function i(t){return tw(t,n)}if(!arguments.length)return y;var r;return c=null==(y=n)?sh:"function"==(r=typeof n)?u:"number"===r?(n=[n,n,n,n],i):i,t},t.round=function(n){return arguments.length?(u=n?Math.round:Number,t):u!=Number},t.sticky=function(n){return arguments.length?(l=n,r=null,t):l},t.ratio=function(n){return arguments.length?(e=n,t):e},t.mode=function(n){return arguments.length?(i=n+"",t):i},tu(t,h)};n.random={normal:function(n,t){var i=arguments.length;return 2>i&&(t=1),1>i&&(n=0),function(){var r,u,i;do r=2*Math.random()-1,u=2*Math.random()-1,i=r*r+u*u;while(!i||i>1);return n+t*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=n.random.normal.apply(n,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=n.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(n){return function(){for(var t=0,i=0;n>i;i++)t+=Math.random();return t}}};n.scale={};kb={floor:v,ceil:v};n.scale.linear=function(){return rw([0,1],[0,1],ai,!1)};db={s:1,g:1,p:1,r:1,e:1};n.scale.log=function(){return fw(n.scale.linear().domain([0,1]),10,!0,[1,10])};ul=n.format(".0e");gb={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};n.scale.pow=function(){return ew(n.scale.linear(),1,[0,1])};n.scale.sqrt=function(){return n.scale.pow().exponent(.5)};n.scale.ordinal=function(){return ow([],{t:"range",a:[[]]})};n.scale.category10=function(){return n.scale.ordinal().range(cut)};n.scale.category20=function(){return n.scale.ordinal().range(lut)};n.scale.category20b=function(){return n.scale.ordinal().range(aut)};n.scale.category20c=function(){return n.scale.ordinal().range(vut)};var cut=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wu),lut=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wu),aut=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wu),vut=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(wu);n.scale.quantile=function(){return sw([],[])};n.scale.quantize=function(){return hw(0,1,[0,1])};n.scale.threshold=function(){return cw([.5],[0,1])};n.scale.identity=function(){return lw([0,1])};n.svg={};n.svg.arc=function(){function n(){var n=Math.max(0,+i.apply(this,arguments)),o=Math.max(0,+r.apply(this,arguments)),it=e.apply(this,arguments)-h,rt=s.apply(this,arguments)-h,pt=Math.abs(rt-it),v=it>rt?0:1,kt,dt,ni,ti,nt,tt,lt,at,vt,yt;if(n>o&&(ut=o,o=n,n=ut),pt>=iut)return a(o,v)+(n?a(n,1-v):"")+"Z";var ut,st,wt,bt,y,p,w,ft,k,d,g,ht,ct=0,et=0,b=[];if(((bt=(+l.apply(this,arguments)||0)/2)&&(wt=u===au?Math.sqrt(n*n+o*o):+u.apply(this,arguments),v||(et*=-1),o&&(et=gt(wt/o*Math.sin(bt))),n&&(ct=gt(wt/n*Math.sin(bt)))),o)?(y=o*Math.cos(it+et),p=o*Math.sin(it+et),w=o*Math.cos(rt-et),ft=o*Math.sin(rt-et),kt=Math.abs(rt-it-2*et)<=f?0:1,et&&kf(y,p,w,ft)===v^kt&&(dt=(it+rt)/2,y=o*Math.cos(dt),p=o*Math.sin(dt),w=ft=null)):y=p=0,n?(k=n*Math.cos(rt-ct),d=n*Math.sin(rt-ct),g=n*Math.cos(it+ct),ht=n*Math.sin(it+ct),ni=Math.abs(it-rt+2*ct)<=f?0:1,ct&&kf(k,d,g,ht)===1-v^ni&&(ti=(it+rt)/2,k=n*Math.cos(ti),d=n*Math.sin(ti),g=ht=null)):k=d=0,pt>t&&(ut=Math.min(Math.abs(o-n)/2,+c.apply(this,arguments)))>.001){if(st=o>n^v?0:1,nt=ut,tt=ut,f>pt){var ot=null==g?[k,d]:null==w?[y,p]:ds([y,p],[g,ht],[w,ft],[k,d]),ii=y-ot[0],ri=p-ot[1],ui=w-ot[0],fi=ft-ot[1],ei=1/Math.sin(Math.acos((ii*ui+ri*fi)/(Math.sqrt(ii*ii+ri*ri)*Math.sqrt(ui*ui+fi*fi)))/2),oi=Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1]);tt=Math.min(ut,(n-oi)/(ei-1));nt=Math.min(ut,(o-oi)/(ei+1))}null!=w?(lt=df(null==g?[k,d]:[g,ht],[y,p],o,nt,v),at=df([w,ft],[k,d],o,nt,v),ut===nt?b.push("M",lt[0],"A",nt,",",nt," 0 0,",st," ",lt[1],"A",o,",",o," 0 ",1-v^kf(lt[1][0],lt[1][1],at[1][0],at[1][1]),",",v," ",at[1],"A",nt,",",nt," 0 0,",st," ",at[0]):b.push("M",lt[0],"A",nt,",",nt," 0 1,",st," ",at[0])):b.push("M",y,",",p);null!=g?(vt=df([y,p],[g,ht],n,-tt,v),yt=df([k,d],null==w?[y,p]:[w,ft],n,-tt,v),ut===tt?b.push("L",yt[0],"A",tt,",",tt," 0 0,",st," ",yt[1],"A",n,",",n," 0 ",v^kf(yt[1][0],yt[1][1],vt[1][0],vt[1][1]),",",1-v," ",vt[1],"A",tt,",",tt," 0 0,",st," ",vt[0]):b.push("L",yt[0],"A",tt,",",tt," 0 0,",st," ",vt[0])):b.push("L",k,",",d)}else b.push("M",y,",",p),null!=w&&b.push("A",o,",",o," 0 ",kt,",",v," ",w,",",ft),b.push("L",k,",",d),null!=g&&b.push("A",n,",",n," 0 ",ni,",",1-v," ",g,",",ht);return b.push("Z"),b.join("")}function a(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var i=kit,r=dit,c=bit,u=au,e=aw,s=vw,l=git;return n.innerRadius=function(t){return arguments.length?(i=o(t),n):i},n.outerRadius=function(t){return arguments.length?(r=o(t),n):r},n.cornerRadius=function(t){return arguments.length?(c=o(t),n):c},n.padRadius=function(t){return arguments.length?(u=t==au?au:o(t),n):u},n.startAngle=function(t){return arguments.length?(e=o(t),n):e},n.endAngle=function(t){return arguments.length?(s=o(t),n):s},n.padAngle=function(t){return arguments.length?(l=o(t),n):l},n.centroid=function(){var n=(+i.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+e.apply(this,arguments)+ +s.apply(this,arguments))/2-h;return[Math.cos(t)*n,Math.sin(t)*n]},n};au="auto";n.svg.line=function(){return yw(v)};uo=n.map({linear:it,"linear-closed":pw,step:nrt,"step-before":ah,"step-after":vh,basis:ww,"basis-open":urt,"basis-closed":frt,bundle:ert,cardinal:rrt,"cardinal-open":trt,"cardinal-closed":irt,monotone:hrt});uo.forEach(function(n,t){t.key=n;t.closed=/-closed$/.test(n)});var nk=[0,2/3,1/3,0],tk=[0,1/3,2/3,0],ei=[0,1/6,2/3,1/6];n.svg.line.radial=function(){var n=yw(bw);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n};ah.reverse=vh;vh.reverse=ah;n.svg.area=function(){return kw(v)};n.svg.area.radial=function(){var n=kw(bw);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n};n.svg.chord=function(){function n(n,u){var f=c(this,i,n,u),e=c(this,r,n,u);return"M"+f.p0+l(f.r,f.p1,f.a1-f.a0)+(a(f,e)?t(f.r,f.p1,f.r,f.p0):t(f.r,f.p1,e.r,e.p0)+l(e.r,e.p1,e.a1-e.a0)+t(e.r,e.p1,f.r,f.p0))+"Z"}function c(n,t,i,r){var o=t.call(n,i,r),f=u.call(n,o,r),c=e.call(n,o,r)-h,l=s.call(n,o,r)-h;return{r:f,a0:c,a1:l,p0:[f*Math.cos(c),f*Math.sin(c)],p1:[f*Math.cos(l),f*Math.sin(l)]}}function a(n,t){return n.a0==t.a0&&n.a1==t.a1}function l(n,t,i){return"A"+n+","+n+" 0 "+ +(i>f)+",1 "+t}function t(n,t,i,r){return"Q 0,0 "+r}var i=ps,r=ws,u=crt,e=aw,s=vw;return n.radius=function(t){return arguments.length?(u=o(t),n):u},n.source=function(t){return arguments.length?(i=o(t),n):i},n.target=function(t){return arguments.length?(r=o(t),n):r},n.startAngle=function(t){return arguments.length?(e=o(t),n):e},n.endAngle=function(t){return arguments.length?(s=o(t),n):s},n};n.svg.diagonal=function(){function n(n,u){var e=t.call(this,n,u),o=i.call(this,n,u),s=(e.y+o.y)/2,f=[e,{x:e.x,y:s},{x:o.x,y:s},o];return f=f.map(r),"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var t=ps,i=ws,r=dw;return n.source=function(i){return arguments.length?(t=o(i),n):t},n.target=function(t){return arguments.length?(i=o(t),n):i},n.projection=function(t){return arguments.length?(r=t,n):r},n};n.svg.diagonal.radial=function(){var t=n.svg.diagonal(),i=dw,r=t.projection;return t.projection=function(n){return arguments.length?r(lrt(i=n)):i},t};n.svg.symbol=function(){function n(n,r){return(fl.get(t.call(this,n,r))||gw)(i.call(this,n,r))}var t=vrt,i=art;return n.type=function(i){return arguments.length?(t=o(i),n):t},n.size=function(t){return arguments.length?(i=o(t),n):i},n};fl=n.map({circle:gw,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*el)),i=t*el;return"M0,"+-t+"L"+i+",0 0,"+t+" "+-i+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/vu),i=t*vu/2;return"M0,"+i+"L"+t+","+-i+" "+-t+","+-i+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/vu),i=t*vu/2;return"M0,"+-i+"L"+t+","+i+" "+-t+","+i+"Z"}});n.svg.symbolTypes=fl.keys();vu=Math.sqrt(3);el=Math.tan(30*u);e.transition=function(n){for(var r,t,u=di||++ik,f=kh(n),e=[],h=fo||{time:Date.now(),ease:an,delay:0,duration:250},o=-1,c=this.length;++o<c;){e.push(r=[]);for(var s=this[o],i=-1,l=s.length;++i<l;)(t=s[i])&&ne(t,i,f,u,h),r.push(t)}return ru(e,f,u)};e.interrupt=function(n){return this.each(null==n?eo:nb(kh(n)))};var di,fo,eo=nb(kh()),a=[],ik=0;a.call=e.call;a.empty=e.empty;a.node=e.node;a.size=e.size;n.transition=function(t,i){return t&&t.transition?di?t.transition(i):t:n.selection().transition(t)};n.transition.prototype=a;a.select=function(n){var f,i,t,e=this.id,o=this.namespace,s=[],r,h;for(n=vo(n),r=-1,h=this.length;++r<h;){s.push(f=[]);for(var c=this[r],u=-1,l=c.length;++u<l;)(t=c[u])&&(i=n.call(t,t.__data__,u,r))?("__data__"in t&&(i.__data__=t.__data__),ne(i,u,o,e,t[o][e]),f.push(i)):f.push(null)}return ru(s,o,e)};a.selectAll=function(n){var h,u,t,f,c,e=this.id,o=this.namespace,l=[],i,a,r,y;for(n=na(n),i=-1,a=this.length;++i<a;)for(var v=this[i],s=-1,p=v.length;++s<p;)if(t=v[s])for(c=t[o][e],u=n.call(t,t.__data__,s,i),l.push(h=[]),r=-1,y=u.length;++r<y;)(f=u[r])&&ne(f,r,o,e,c),h.push(f);return ru(l,o,e)};a.filter=function(n){var u,f,i,e=[],t,o;for("function"!=typeof n&&(n=ha(n)),t=0,o=this.length;o>t;t++){e.push(u=[]);for(var f=this[t],r=0,s=f.length;s>r;r++)(i=f[r])&&n.call(i,i.__data__,r,t)&&u.push(i)}return ru(e,this.namespace,this.id)};a.tween=function(n,t){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(n):vt(this,null==t?function(t){t[r][i].tween.remove(n)}:function(u){u[r][i].tween.set(n,t)})};a.attr=function(t,i){function f(){this.removeAttribute(r)}function e(){this.removeAttributeNS(r.space,r.local)}function o(n){return null==n?f:(n+="",function(){var t,i=this.getAttribute(r);return i!==n&&(t=u(i,n),function(n){this.setAttribute(r,t(n))})})}function s(n){return null==n?e:(n+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==n&&(t=u(i,n),function(n){this.setAttributeNS(r.space,r.local,t(n))})})}if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var u="transform"==t?cp:ai,r=n.ns.qualify(t);return bh(this,"attr."+t,i,r.local?s:o)};a.attrTween=function(t,i){function u(n,t){var u=i.call(this,n,t,this.getAttribute(r));return u&&function(n){this.setAttribute(r,u(n))}}function f(n,t){var u=i.call(this,n,t,this.getAttributeNS(r.space,r.local));return u&&function(n){this.setAttributeNS(r.space,r.local,u(n))}}var r=n.ns.qualify(t);return this.tween("attr."+t,r.local?f:u)};a.style=function(n,t,i){function u(){this.style.removeProperty(n)}function f(t){return null==t?u:(t+="",function(){var r,u=bt(this).getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=ai(u,t),function(t){this.style.setProperty(n,r(t),i)})})}var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(i in n)this.style(i,n[i],t);return this}i=""}return bh(this,"style."+n,t,f)};a.styleTween=function(n,t,i){function r(r,u){var f=t.call(this,r,u,bt(this).getComputedStyle(this,null).getPropertyValue(n));return f&&function(t){this.style.setProperty(n,f(t),i)}}return arguments.length<3&&(i=""),this.tween("style."+n,r)};a.text=function(n){return bh(this,"text",n,yrt)};a.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})};a.ease=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].ease:("function"!=typeof t&&(t=n.ease.apply(n,arguments)),vt(this,function(n){n[r][i].ease=t}))};a.delay=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].delay:vt(this,"function"==typeof n?function(r,u,f){r[i][t].delay=+n.call(r,r.__data__,u,f)}:(n=+n,function(r){r[i][t].delay=n}))};a.duration=function(n){var t=this.id,i=this.namespace;return arguments.length<1?this.node()[i][t].duration:vt(this,"function"==typeof n?function(r,u,f){r[i][t].duration=Math.max(1,n.call(r,r.__data__,u,f))}:(n=Math.max(1,n),function(r){r[i][t].duration=n}))};a.each=function(t,i){var r=this.id,u=this.namespace,f,e;if(arguments.length<2){f=fo;e=di;try{di=r;vt(this,function(n,i,f){fo=n[u][r];t.call(n,n.__data__,i,f)})}finally{fo=f;di=e}}else vt(this,function(f){var e=f[u][r];(e.event||(e.event=n.dispatch("start","end","interrupt"))).on(t,i)});return this};a.transition=function(){for(var f,e,t,n,h=this.id,o=++ik,r=this.namespace,s=[],u=0,c=this.length;c>u;u++){s.push(f=[]);for(var e=this[u],i=0,l=e.length;l>i;i++)(t=e[i])&&(n=t[r][h],ne(t,i,r,o,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),f.push(t)}return ru(s,r,o)};n.svg.axis=function(){function i(i){i.each(function(){var a,rt=n.select(this),y=this.__chart__||o,i=this.__chart__=o.copy(),ht=null==h?i.ticks?i.ticks.apply(i,s):i.domain():h,ct=null==e?i.tickFormat?i.tickFormat.apply(i,s):v:e,w=rt.selectAll(".tick").data(ht,i),p=w.enter().insert("g",".domain").attr("class","tick").style("opacity",t),lt=n.transition(w.exit()).style("opacity",t).remove(),g=n.transition(w.order()).style("opacity",1),ut=Math.max(r,0)+c,b=yf(i),ft=rt.selectAll(".domain").data([0]),et=(ft.enter().append("path").attr("class","domain"),n.transition(ft)),it,st;p.append("line");p.append("text");var nt,tt,k,d,at=p.select("line"),vt=g.select("line"),ot=w.select("text").text(ct),yt=p.select("text"),pt=g.select("text"),l="top"===f||"left"===f?-1:1;("bottom"===f||"top"===f?(a=prt,nt="x",k="y",tt="x2",d="y2",ot.attr("dy",0>l?"0em":".71em").style("text-anchor","middle"),et.attr("d","M"+b[0]+","+l*u+"V0H"+b[1]+"V"+l*u)):(a=wrt,nt="y",k="x",tt="y2",d="x2",ot.attr("dy",".32em").style("text-anchor",0>l?"end":"start"),et.attr("d","M"+l*u+","+b[0]+"H0V"+b[1]+"H"+l*u)),at.attr(d,l*r),yt.attr(k,l*ut),vt.attr(tt,0).attr(d,l*r),pt.attr(nt,0).attr(k,l*ut),i.rangeBand)?(it=i,st=it.rangeBand()/2,y=i=function(n){return it(n)+st}):y.rangeBand?y=i:lt.call(a,i,y);p.call(a,y,i);g.call(a,i,i)})}var e,o=n.scale.linear(),f=ol,r=6,u=6,c=3,s=[10],h=null;return i.scale=function(n){return arguments.length?(o=n,i):o},i.orient=function(n){return arguments.length?(f=n in rk?n+"":ol,i):f},i.ticks=function(){return arguments.length?(s=ot(arguments),i):s},i.tickValues=function(n){return arguments.length?(h=n,i):h},i.tickFormat=function(n){return arguments.length?(e=n,i):e},i.tickSize=function(n){var t=arguments.length;return t?(r=+n,u=+arguments[t-1],i):r},i.innerTickSize=function(n){return arguments.length?(r=+n,i):r},i.outerTickSize=function(n){return arguments.length?(u=+n,i):u},i.tickPadding=function(n){return arguments.length?(c=+n,i):c},i.tickSubdivide=function(){return arguments.length&&i},i};ol="bottom";rk={top:1,right:1,bottom:1,left:1};n.svg.brush=function(){function f(t){t.each(function(){var i=n.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",w).on("touchstart.brush",w),h=i.selectAll(".background").data([0]),e,t,o,s;h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");e=i.selectAll(".resize").data(l,v);e.exit().remove();e.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return yut[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");e.style("display",f.empty()?"none":null);o=n.transition(i);s=n.transition(h);r&&(t=yf(r),s.attr("x",t[0]).attr("width",t[1]-t[0]),y(o));u&&(t=yf(u),s.attr("y",t[0]).attr("height",t[1]-t[0]),p(o));a(o)})}function a(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+t[+/e$/.test(n)]+","+i[+/^s/.test(n)]+")"})}function y(n){n.select(".extent").attr("x",t[0]);n.selectAll(".extent,.n>rect,.s>rect").attr("width",t[1]-t[0])}function p(n){n.select(".extent").attr("y",i[0]);n.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function w(){function st(){32==n.event.keyCode&&(w||(v=null,l[0]-=t[1],l[1]-=i[1],w=2),kt())}function ht(){32==n.event.keyCode&&2==w&&(l[0]+=t[1],l[1]+=i[1],w=0,kt())}function g(){var f=n.mouse(b),e=!1;nt&&(f[0]+=nt[0],f[1]+=nt[1]);w||(n.event.altKey?(v||(v=[(t[0]+t[1])/2,(i[0]+i[1])/2]),l[0]=t[+(f[0]<v[0])],l[1]=i[+(f[1]<v[1])]):v=null);ct&&et(f,r,0)&&(y(k),e=!0);lt&&et(f,u,1)&&(p(k),e=!0);e&&(a(k),it({type:"brush",mode:w?"move":"resize"}))}function et(n,r,u){var f,y,k=yf(r),p=k[0],b=k[1],c=l[u],a=u?i:t,d=a[1]-a[0];return w&&(p-=c,b-=d+c),f=(u?h:s)?Math.max(p,Math.min(b,n[u])):n[u],w?y=(f+=c)+d:(v&&(c=Math.max(p,Math.min(b,2*v[u]-f))),f>c?(y=f,f=c):y=c),a[0]!=f||a[1]!=y?(u?o=null:e=null,a[0]=f,a[1]=y,!0):void 0}function ot(){g();k.style("pointer-events","all").selectAll(".resize").style("display",f.empty()?"none":null);n.select("body").style("cursor",null);rt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);at();it({type:"brushend"})}var v,nt,b=this,tt=n.select(n.event.target),it=c.of(b,arguments),k=n.select(b),d=tt.datum(),ct=!/^(n|s)$/.test(d)&&r,lt=!/^(e|w)$/.test(d)&&u,w=tt.classed("extent"),at=pu(b),l=n.mouse(b),rt=n.select(bt(b)).on("keydown.brush",st).on("keyup.brush",ht),ut,ft;(n.event.changedTouches?rt.on("touchmove.brush",g).on("touchend.brush",ot):rt.on("mousemove.brush",g).on("mouseup.brush",ot),k.interrupt().selectAll("*").interrupt(),w)?(l[0]=t[0]-l[0],l[1]=i[0]-l[1]):d?(ut=+/w$/.test(d),ft=+/^n/.test(d),nt=[t[1-ut]-l[0],i[1-ft]-l[1]],l[0]=t[ut],l[1]=i[ft]):n.event.altKey&&(v=l.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null);n.select("body").style("cursor",tt.style("cursor"));it({type:"brushstart"});g()}var e,o,c=ao(f,"brushstart","brush","brushend"),r=null,u=null,t=[0,0],i=[0,0],s=!0,h=!0,l=sl[0];return f.event=function(r){r.each(function(){var u=c.of(this,arguments),r={x:t,y:i,i:e,j:o},f=this.__chart__||r;this.__chart__=r;di?n.select(this).transition().each("start.brush",function(){e=f.i;o=f.j;t=f.x;i=f.y;u({type:"brushstart"})}).tween("brush:brush",function(){var n=vf(t,r.x),f=vf(i,r.y);return e=o=null,function(e){t=r.x=n(e);i=r.y=f(e);u({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=r.i;o=r.j;u({type:"brush",mode:"resize"});u({type:"brushend"})}):(u({type:"brushstart"}),u({type:"brush",mode:"resize"}),u({type:"brushend"}))})},f.x=function(n){return arguments.length?(r=n,l=sl[!r<<1|!u],f):r},f.y=function(n){return arguments.length?(u=n,l=sl[!r<<1|!u],f):u},f.clamp=function(n){return arguments.length?(r&&u?(s=!!n[0],h=!!n[1]):r?s=!!n:u&&(h=!!n),f):r&&u?[s,h]:r?s:u?h:null},f.extent=function(n){var s,h,c,l,a;return arguments.length?(r&&(s=n[0],h=n[1],u&&(s=s[0],h=h[0]),e=[s,h],r.invert&&(s=r(s),h=r(h)),s>h&&(a=s,s=h,h=a),(s!=t[0]||h!=t[1])&&(t=[s,h])),u&&(c=n[0],l=n[1],r&&(c=c[1],l=l[1]),o=[c,l],u.invert&&(c=u(c),l=u(l)),c>l&&(a=c,c=l,l=a),(c!=i[0]||l!=i[1])&&(i=[c,l])),f):(r&&(e?(s=e[0],h=e[1]):(s=t[0],h=t[1],r.invert&&(s=r.invert(s),h=r.invert(h)),s>h&&(a=s,s=h,h=a))),u&&(o?(c=o[0],l=o[1]):(c=i[0],l=i[1],u.invert&&(c=u.invert(c),l=u.invert(l)),c>l&&(a=c,c=l,l=a))),r&&u?[[s,c],[h,l]]:r?[s,h]:u&&[c,l])},f.clear=function(){return f.empty()||(t=[0,0],i=[0,0],e=o=null),f},f.empty=function(){return!!r&&t[0]==t[1]||!!u&&i[0]==i[1]},n.rebind(f,c,"on")};var yut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],hl=i.format=cc.timeFormat,uk=hl.utc,fk=uk("%Y-%m-%dT%H:%M:%S.%LZ");hl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dh:fk;dh.parse=function(n){var t=new Date(n);return isNaN(t)?null:t};dh.toString=fk.toString;i.second=hi(function(n){return new y(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()});i.seconds=i.second.range;i.seconds.utc=i.second.utc.range;i.minute=hi(function(n){return new y(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()});i.minutes=i.minute.range;i.minutes.utc=i.minute.utc.range;i.hour=hi(function(n){var t=n.getTimezoneOffset()/60;return new y(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()});i.hours=i.hour.range;i.hours.utc=i.hour.utc.range;i.month=hi(function(n){return n=i.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()});i.months=i.month.range;i.months.utc=i.month.utc.range;var oo=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],cl=[[i.second,1],[i.second,5],[i.second,15],[i.second,30],[i.minute,1],[i.minute,5],[i.minute,15],[i.minute,30],[i.hour,1],[i.hour,3],[i.hour,6],[i.hour,12],[i.day,1],[i.day,2],[i.week,1],[i.month,1],[i.month,3],[i.year,1]],put=hl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",yr]]),wut={range:function(t,i,r){return n.range(Math.ceil(t/r)*r,+i,r).map(vi)},floor:v,ceil:v};cl.year=i.year;i.scale=function(){return gh(n.scale.linear(),cl,put)};ll=cl.map(function(n){return[n[0].utc,n[1]]});ek=uk.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",yr]]);ll.year=i.year.utc;i.scale.utc=function(){return gh(n.scale.linear(),ll,ek)};n.text=us(function(n){return n.responseText});n.json=function(n,t){return bu(n,"application/json",brt,t)};n.html=function(n,t){return bu(n,"text/html",krt,t)};n.xml=us(function(n){return n.responseXML});"function"==typeof define&&define.amd?(this.d3=n,define(n)):"object"==typeof module&&module.exports?module.exports=n:this.d3=n}();!function(n){"use strict";function b(n){this.owner=n}function tt(n,t){if(Object.create)t.prototype=Object.create(n.prototype);else{var i=function(){};i.prototype=n.prototype;t.prototype=new i}return t.prototype.constructor=t,t}function k(n){var t=this.internal=new d(this);t.loadConfig(n);t.beforeInit(n);t.init();t.afterInit(n),function i(n,t,r){Object.keys(n).forEach(function(u){t[u]=n[u].bind(r);Object.keys(n[u]).length>0&&i(n[u],t[u],r)})}(r,this,this)}function d(t){var i=this;i.d3=n.d3?n.d3:"undefined"!=typeof require?require("d3"):void 0;i.api=t;i.config=i.getDefaultConfig();i.data={};i.cache={};i.axes={}}function u(n){b.call(this,n)}function g(n,t){function v(n,t){n.attr("transform",function(n){return"translate("+Math.ceil(t(n)+e)+", 0)"})}function y(n,t){n.attr("transform",function(n){return"translate(0,"+Math.ceil(t(n))+")"})}function k(n){var t=n[0],i=n[n.length-1];return i>t?[t,i]:[i,t]}function d(n){var i,r,t=[];if(n.ticks)return n.ticks.apply(n,a);for(r=n.domain(),i=Math.ceil(r[0]);i<r[1];i++)t.push(i);return t.length>0&&t[0]>0&&t.unshift(t[0]-(t[1]-t[0])),t}function g(){var n,i=u.copy();return t.isCategory&&(n=u.domain(),i.domain([n[0],n[1]-1])),i}function c(n){var t=l?l(n):n;return"undefined"!=typeof t?t:""}function nt(n){if(w)return w;var t={h:11.5,w:5.5};return n.select("text").text(c).each(function(n){var i=this.getBoundingClientRect(),r=c(n),u=i.height,f=r?i.width/r.length:void 0;u&&f&&(t.h=u,t.w=f)}).text(""),w=t,t}function p(i){return t.withoutTransition?i:n.transition(i)}function i(l){l.each(function(){function ri(n,i){function f(n,t){r=void 0;for(var u=1;u<t.length;u++)if(" "===t.charAt(u)&&(r=u),e=t.substr(0,u+1),o=dt.w*e.length,o>i)return f(n.concat(t.substr(0,r?r:u)),t.slice(r?r+1:u));return n.concat(t)}var e,r,o,u=c(n);return"[object Array]"===Object.prototype.toString.call(u)?u:((!i||0>=i)&&(i=ci?95:t.isCategory?Math.ceil(l(bt[1])-l(bt[0]))-12:110),f([],u+""))}function yt(n,t){var i=dt.h;return 0===t&&(i="left"===o||"right"===o?-((ti[n.index]-1)*(dt.h/2)-3):".71em"),i}function ui(n){var t=u(n)+(s?0:e);return a[0]<t&&t<a[1]?f:0}function fi(n){return n?n>0?"start":"end":"middle"}function ei(n){return n?"rotate("+n+")":""}function oi(n){return n?8*Math.sin(Math.PI*(n/180)):0}function si(n){return n?11.5-2.5*(n/15)*(n>0?1:-1):w}var it,et,pt,wt=i.g=n.select(this),ot=this.__chart__||u,l=this.__chart__=g(),bt=h?h:d(l),st=wt.selectAll(".tick").data(bt,l),rt=st.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),hi=st.exit().remove(),kt=p(st).style("opacity",1),a=u.rangeExtent?u.rangeExtent():k(u.range()),ni=wt.selectAll(".domain").data([0]),ht=(ni.enter().append("path").attr("class","domain"),p(ni)),ft,gt,ii;rt.append("line");rt.append("text");var ct=rt.select("line"),lt=kt.select("line"),at=rt.select("text"),vt=kt.select("text");t.isCategory?(e=Math.ceil((l(1)-l(0))/2),et=s?0:e,pt=s?e:0):e=et=0;var ut,b,dt=nt(wt.select(".tick")),ti=[],w=Math.max(f,0)+tt,ci="left"===o||"right"===o;ut=st.select("text");b=ut.selectAll("tspan").data(function(n,i){var r=t.tickMultiline?ri(n,t.tickWidth):[].concat(c(n));return ti[i]=r.length,r.map(function(n){return{index:i,splitted:n}})});b.enter().append("tspan");b.exit().remove();b.text(function(n){return n.splitted});ft=t.tickTextRotate;switch(o){case"bottom":it=v;ct.attr("y2",f);at.attr("y",w);lt.attr("x1",et).attr("x2",et).attr("y2",ui);vt.attr("x",0).attr("y",si(ft)).style("text-anchor",fi(ft)).attr("transform",ei(ft));b.attr("x",0).attr("dy",yt).attr("dx",oi(ft));ht.attr("d","M"+a[0]+","+r+"V0H"+a[1]+"V"+r);break;case"top":it=v;ct.attr("y2",-f);at.attr("y",-w);lt.attr("x2",0).attr("y2",-f);vt.attr("x",0).attr("y",-w);ut.style("text-anchor","middle");b.attr("x",0).attr("dy","0em");ht.attr("d","M"+a[0]+","+-r+"V0H"+a[1]+"V"+-r);break;case"left":it=y;ct.attr("x2",-f);at.attr("x",-w);lt.attr("x2",-f).attr("y1",pt).attr("y2",pt);vt.attr("x",-w).attr("y",e);ut.style("text-anchor","end");b.attr("x",-w).attr("dy",yt);ht.attr("d","M"+-r+","+a[0]+"H0V"+a[1]+"H"+-r);break;case"right":it=y;ct.attr("x2",f);at.attr("x",w);lt.attr("x2",f).attr("y2",0);vt.attr("x",w).attr("y",0);ut.style("text-anchor","start");b.attr("x",w).attr("dy",yt);ht.attr("d","M"+r+","+a[0]+"H0V"+a[1]+"H"+r)}l.rangeBand?(gt=l,ii=gt.rangeBand()/2,ot=l=function(n){return gt(n)+ii}):ot.rangeBand?ot=l:hi.call(it,l);rt.call(it,ot);kt.call(it,l)})}var r,l,a,s,u=n.scale.linear(),o="bottom",f=6,tt=3,h=null,e=0,b=!0;return t=t||{},r=t.withOuterTick?6:0,i.scale=function(n){return arguments.length?(u=n,i):u},i.orient=function(n){return arguments.length?(o=n in{top:1,right:1,bottom:1,left:1}?n+"":"bottom",i):o},i.tickFormat=function(n){return arguments.length?(l=n,i):l},i.tickCentered=function(n){return arguments.length?(s=n,i):s},i.tickOffset=function(){return e},i.tickInterval=function(){var n,u;return t.isCategory?n=2*e:(u=i.g.select("path.domain").node().getTotalLength()-2*r,n=u/i.g.selectAll("line").size()),n===1/0?0:n},i.ticks=function(){return arguments.length?(a=arguments,i):a},i.tickCulling=function(n){return arguments.length?(b=n,i):b},i.tickValues=function(n){if("function"==typeof n)h=function(){return n(u.domain())};else{if(!arguments.length)return h;h=n}return i},i}var r,t,it,l={version:"0.4.11-rc4"},i,w;l.generate=function(n){return new k(n)};l.chart={fn:k.prototype,internal:{fn:d.prototype,axis:{fn:u.prototype}}};r=l.chart.fn;t=l.chart.internal.fn;it=l.chart.internal.axis.fn;t.beforeInit=function(){};t.afterInit=function(){};t.init=function(){var t=this,n=t.config;if(t.initParams(),n.data_url)t.convertUrlToData(n.data_url,n.data_mimeType,n.data_keys,t.initWithData);else if(n.data_json)t.initWithData(t.convertJsonToData(n.data_json,n.data_keys));else if(n.data_rows)t.initWithData(t.convertRowsToData(n.data_rows));else{if(!n.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(n.data_columns))}};t.initParams=function(){var n=this,i=n.d3,t=n.config;n.clipId="c3-"+ +new Date+"-clip";n.clipIdForXAxis=n.clipId+"-xaxis";n.clipIdForYAxis=n.clipId+"-yaxis";n.clipIdForGrid=n.clipId+"-grid";n.clipIdForSubchart=n.clipId+"-subchart";n.clipPath=n.getClipPath(n.clipId);n.clipPathForXAxis=n.getClipPath(n.clipIdForXAxis);n.clipPathForYAxis=n.getClipPath(n.clipIdForYAxis);n.clipPathForGrid=n.getClipPath(n.clipIdForGrid);n.clipPathForSubchart=n.getClipPath(n.clipIdForSubchart);n.dragStart=null;n.dragging=!1;n.flowing=!1;n.cancelClick=!1;n.mouseover=!1;n.transiting=!1;n.color=n.generateColor();n.levelColor=n.generateLevelColor();n.dataTimeFormat=t.data_xLocaltime?i.time.format:i.time.format.utc;n.axisTimeFormat=t.axis_x_localtime?i.time.format:i.time.format.utc;n.defaultAxisTimeFormat=n.axisTimeFormat.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%-m/%-d",function(n){return n.getDay()&&1!==n.getDate()}],["%-m/%-d",function(n){return 1!==n.getDate()}],["%-m/%-d",function(n){return n.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);n.hiddenTargetIds=[];n.hiddenLegendIds=[];n.focusedTargetIds=[];n.defocusedTargetIds=[];n.xOrient=t.axis_rotated?"left":"bottom";n.yOrient=t.axis_rotated?t.axis_y_inner?"top":"bottom":t.axis_y_inner?"right":"left";n.y2Orient=t.axis_rotated?t.axis_y2_inner?"bottom":"top":t.axis_y2_inner?"left":"right";n.subXOrient=t.axis_rotated?"left":"bottom";n.isLegendRight="right"===t.legend_position;n.isLegendInset="inset"===t.legend_position;n.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor;n.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor;n.legendStep=0;n.legendItemWidth=0;n.legendItemHeight=0;n.currentMaxTickWidths={x:0,y:0,y2:0};n.rotated_padding_left=30;n.rotated_padding_right=t.axis_rotated&&!t.axis_x_show?0:30;n.rotated_padding_top=5;n.withoutFadeIn={};n.intervalForObserveInserted=void 0;n.axes.subx=i.selectAll([])};t.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};t.initWithData=function(n){var f,e,t=this,o=t.d3,r=t.config,s=!0;t.axis=new u(t);t.initPie&&t.initPie();t.initBrush&&t.initBrush();t.initZoom&&t.initZoom();t.selectChart=r.bindto?"function"==typeof r.bindto.node?r.bindto:o.select(r.bindto):o.selectAll([]);t.selectChart.empty()&&(t.selectChart=o.select(document.createElement("div")).style("opacity",0),t.observeInserted(t.selectChart),s=!1);t.selectChart.html("").classed("c3",!0);t.data.xs={};t.data.targets=t.convertDataToTargets(n);r.data_filter&&(t.data.targets=t.data.targets.filter(r.data_filter));r.data_hide&&t.addHiddenTargetIds(r.data_hide===!0?t.mapToIds(t.data.targets):r.data_hide);r.legend_hide&&t.addHiddenLegendIds(r.legend_hide===!0?t.mapToIds(t.data.targets):r.legend_hide);t.hasType("gauge")&&(r.legend_show=!1);t.updateSizes();t.updateScales();t.x.domain(o.extent(t.getXDomain(t.data.targets)));t.y.domain(t.getYDomain(t.data.targets,"y"));t.y2.domain(t.getYDomain(t.data.targets,"y2"));t.subX.domain(t.x.domain());t.subY.domain(t.y.domain());t.subY2.domain(t.y2.domain());t.orgXDomain=t.x.domain();t.brush&&t.brush.scale(t.subX);r.zoom_enabled&&t.zoom.scale(t.x);t.svg=t.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return r.onmouseover.call(t)}).on("mouseleave",function(){return r.onmouseout.call(t)});t.config.svg_classname&&t.svg.attr("class",t.config.svg_classname);f=t.svg.append("defs");t.clipChart=t.appendClip(f,t.clipId);t.clipXAxis=t.appendClip(f,t.clipIdForXAxis);t.clipYAxis=t.appendClip(f,t.clipIdForYAxis);t.clipGrid=t.appendClip(f,t.clipIdForGrid);t.clipSubchart=t.appendClip(f,t.clipIdForSubchart);t.updateSvgSize();e=t.main=t.svg.append("g").attr("transform",t.getTranslate("main"));t.initSubchart&&t.initSubchart();t.initTooltip&&t.initTooltip();t.initLegend&&t.initLegend();t.initTitle&&t.initTitle();e.append("text").attr("class",i.text+" "+i.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");t.initRegion();t.initGrid();e.append("g").attr("clip-path",t.clipPath).attr("class",i.chart);r.grid_lines_front&&t.initGridLines();t.initEventRect();t.initChartElements();e.insert("rect",r.zoom_privileged?null:"g."+i.regions).attr("class",i.zoomRect).attr("width",t.width).attr("height",t.height).style("opacity",0).on("dblclick.zoom",null);r.axis_x_extent&&t.brush.extent(t.getDefaultExtent());t.axis.init();t.updateTargets(t.data.targets);s&&(t.updateDimension(),t.config.oninit.call(t),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));t.bindResize();t.api.element=t.selectChart.node()};t.smoothLines=function(n,t){var i=this;"grid"===t&&n.each(function(){var n=i.d3.select(this),t=n.attr("x1"),r=n.attr("x2"),u=n.attr("y1"),f=n.attr("y2");n.attr({x1:Math.ceil(t),x2:Math.ceil(r),y1:Math.ceil(u),y2:Math.ceil(f)})})};t.updateSizes=function(){var n=this,t=n.config,e=n.legend?n.getLegendHeight():0,o=n.legend?n.getLegendWidth():0,r=n.isLegendRight||n.isLegendInset?0:e,i=n.hasArcType(),u=t.axis_rotated||i?0:n.getHorizontalAxisHeight("x"),f=t.subchart_show&&!i?t.subchart_size_height+u:0;n.currentWidth=n.getCurrentWidth();n.currentHeight=n.getCurrentHeight();n.margin=t.axis_rotated?{top:n.getHorizontalAxisHeight("y2")+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:n.getHorizontalAxisHeight("y")+r+n.getCurrentPaddingBottom(),left:f+(i?0:n.getCurrentPaddingLeft())}:{top:4+n.getCurrentPaddingTop(),right:i?0:n.getCurrentPaddingRight(),bottom:u+f+r+n.getCurrentPaddingBottom(),left:i?0:n.getCurrentPaddingLeft()};n.margin2=t.axis_rotated?{top:n.margin.top,right:NaN,bottom:20+r,left:n.rotated_padding_left}:{top:n.currentHeight-f-r,right:NaN,bottom:u+r,left:n.margin.left};n.margin3={top:0,right:NaN,bottom:0,left:0};n.updateSizeForLegend&&n.updateSizeForLegend(e,o);n.width=n.currentWidth-n.margin.left-n.margin.right;n.height=n.currentHeight-n.margin.top-n.margin.bottom;n.width<0&&(n.width=0);n.height<0&&(n.height=0);n.width2=t.axis_rotated?n.margin.left-n.rotated_padding_left-n.rotated_padding_right:n.width;n.height2=t.axis_rotated?n.height:n.currentHeight-n.margin2.top-n.margin2.bottom;n.width2<0&&(n.width2=0);n.height2<0&&(n.height2=0);n.arcWidth=n.width-(n.isLegendRight?o+10:0);n.arcHeight=n.height-(n.isLegendRight?0:10);n.hasType("gauge")&&(n.arcHeight+=n.height-n.getGaugeLabelHeight());n.updateRadius&&n.updateRadius();n.isLegendRight&&i&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)};t.updateTargets=function(n){var t=this;t.updateTargetsForText(n);t.updateTargetsForBar(n);t.updateTargetsForLine(n);t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(n);t.updateTargetsForSubchart&&t.updateTargetsForSubchart(n);t.showTargets()};t.showTargets=function(){var n=this;n.svg.selectAll("."+i.target).filter(function(t){return n.isTargetToShow(t.id)}).transition().duration(n.config.transition_duration).style("opacity",1)};t.redraw=function(n,t){var ft,et,h,ot,st,ht,a,ct,lt,at,vt,yt,pt,v,y,p,w,b,o,s,wt,rt,k,c,l,bt,ut,d,g,r=this,kt=r.main,dt=r.d3,u=r.config,nt=r.getShapeIndices(r.isAreaType),tt=r.getShapeIndices(r.isBarType),it=r.getShapeIndices(r.isLineType),gt=r.hasArcType(),f=r.filterTargetsToShow(r.data.targets),ni=r.xv.bind(r);if(n=n||{},ft=e(n,"withY",!0),et=e(n,"withSubchart",!0),h=e(n,"withTransition",!0),ht=e(n,"withTransform",!1),a=e(n,"withUpdateXDomain",!1),ct=e(n,"withUpdateOrgXDomain",!1),lt=e(n,"withTrimXDomain",!0),pt=e(n,"withUpdateXAxis",a),at=e(n,"withLegend",!1),vt=e(n,"withEventRect",!0),yt=e(n,"withDimension",!0),ot=e(n,"withTransitionForExit",h),st=e(n,"withTransitionForAxis",h),o=h?u.transition_duration:0,s=ot?o:0,wt=st?o:0,t=t||r.axis.generateTransitions(wt),at&&u.legend_show?r.updateLegend(r.mapToIds(r.data.targets),n,t):yt&&r.updateDimension(!0),r.isCategorized()&&0===f.length&&r.x.domain([0,r.axes.x.selectAll(".tick").size()]),f.length?(r.updateXDomain(f,a,ct,lt),u.axis_x_tick_values||(c=r.axis.updateXAxisTickValues(f))):(r.xAxis.tickValues([]),r.subXAxis.tickValues([])),u.zoom_rescale&&!n.flow&&(ut=r.x.orgDomain()),r.y.domain(r.getYDomain(f,"y",ut)),r.y2.domain(r.getYDomain(f,"y2",ut)),!u.axis_y_tick_values&&u.axis_y_tick_count&&r.yAxis.tickValues(r.axis.generateTickValues(r.y.domain(),u.axis_y_tick_count)),!u.axis_y2_tick_values&&u.axis_y2_tick_count&&r.y2Axis.tickValues(r.axis.generateTickValues(r.y2.domain(),u.axis_y2_tick_count)),r.axis.redraw(t,gt),r.axis.updateLabels(h),(a||pt)&&f.length)if(u.axis_x_tick_culling&&c){for(l=1;l<c.length;l++)if(c.length/l<u.axis_x_tick_culling_max){bt=l;break}r.svg.selectAll("."+i.axisX+" .tick text").each(function(n){var t=c.indexOf(n);t>=0&&dt.select(this).style("display",t%bt?"none":"block")})}else r.svg.selectAll("."+i.axisX+" .tick text").style("display","block");v=r.generateDrawArea?r.generateDrawArea(nt,!1):void 0;y=r.generateDrawBar?r.generateDrawBar(tt):void 0;p=r.generateDrawLine?r.generateDrawLine(it,!1):void 0;w=r.generateXYForText(nt,tt,it,!0);b=r.generateXYForText(nt,tt,it,!1);ft&&(r.subY.domain(r.getYDomain(f,"y")),r.subY2.domain(r.getYDomain(f,"y2")));r.updateXgridFocus();kt.select("text."+i.text+"."+i.empty).attr("x",r.width/2).attr("y",r.height/2).text(u.data_empty_label_text).transition().style("opacity",f.length?0:1);r.updateGrid(o);r.updateRegion(o);r.updateBar(s);r.updateLine(s);r.updateArea(s);r.updateCircle();r.hasDataLabel()&&r.updateText(s);r.redrawTitle&&r.redrawTitle();r.redrawArc&&r.redrawArc(o,s,ht);r.redrawSubchart&&r.redrawSubchart(et,t,o,s,nt,tt,it);kt.selectAll("."+i.selectedCircles).filter(r.isBarType.bind(r)).selectAll("circle").remove();u.interaction_enabled&&!n.flow&&vt&&(r.redrawEventRect(),r.updateZoom&&r.updateZoom());r.updateCircleY();d=(r.config.axis_rotated?r.circleY:r.circleX).bind(r);g=(r.config.axis_rotated?r.circleX:r.circleY).bind(r);n.flow&&(k=r.generateFlow({targets:f,flow:n.flow,duration:n.flow.duration,drawBar:y,drawLine:p,drawArea:v,cx:d,cy:g,xv:ni,xForText:w,yForText:b}));(o||k)&&r.isTabVisible()?dt.transition().duration(o).each(function(){var t=[];[r.redrawBar(y,!0),r.redrawLine(p,!0),r.redrawArea(v,!0),r.redrawCircle(d,g,!0),r.redrawText(w,b,n.flow,!0),r.redrawRegion(!0),r.redrawGrid(!0)].forEach(function(n){n.forEach(function(n){t.push(n)})});rt=r.generateWait();t.forEach(function(n){rt.add(n)})}).call(rt,function(){k&&k();u.onrendered&&u.onrendered.call(r)}):(r.redrawBar(y),r.redrawLine(p),r.redrawArea(v),r.redrawCircle(d,g),r.redrawText(w,b,n.flow),r.redrawRegion(),r.redrawGrid(),u.onrendered&&u.onrendered.call(r));r.mapToIds(r.data.targets).forEach(function(n){r.withoutFadeIn[n]=!0})};t.updateAndRedraw=function(n){var i,t=this,r=t.config;n=n||{};n.withTransition=e(n,"withTransition",!0);n.withTransform=e(n,"withTransform",!1);n.withLegend=e(n,"withLegend",!1);n.withUpdateXDomain=!0;n.withUpdateOrgXDomain=!0;n.withTransitionForExit=!1;n.withTransitionForTransform=e(n,"withTransitionForTransform",n.withTransition);t.updateSizes();n.withLegend&&r.legend_show||(i=t.axis.generateTransitions(n.withTransitionForAxis?r.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(n.withTransitionForTransform,i));t.redraw(n,i)};t.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};t.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};t.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};t.isCustomX=function(){var n=this,t=n.config;return!n.isTimeSeries()&&(t.data_x||h(t.data_xs))};t.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};t.getTranslate=function(n){var i,r,t=this,u=t.config;return"main"===n?(i=y(t.margin.left),r=y(t.margin.top)):"context"===n?(i=y(t.margin2.left),r=y(t.margin2.top)):"legend"===n?(i=t.margin3.left,r=t.margin3.top):"x"===n?(i=0,r=u.axis_rotated?0:t.height):"y"===n?(i=0,r=u.axis_rotated?t.height:0):"y2"===n?(i=u.axis_rotated?0:t.width,r=u.axis_rotated?1:0):"subx"===n?(i=0,r=u.axis_rotated?0:t.height2):"arc"===n&&(i=t.arcWidth/2,r=t.arcHeight/2),"translate("+i+","+r+")"};t.initialOpacity=function(n){return null!==n.value&&this.withoutFadeIn[n.id]?1:0};t.initialOpacityForCircle=function(n){return null!==n.value&&this.withoutFadeIn[n.id]?this.opacityForCircle(n):0};t.opacityForCircle=function(n){var t=this.config.point_show?1:0;return f(n.value)?this.isScatterType(n)?.5:t:0};t.opacityForText=function(){return this.hasDataLabel()?1:0};t.xx=function(n){return n?this.x(n.x):null};t.xv=function(n){var t=this,i=n.value;return t.isTimeSeries()?i=t.parseDate(n.value):t.isCategorized()&&"string"==typeof n.value&&(i=t.config.axis_x_categories.indexOf(n.value)),Math.ceil(t.x(i))};t.yv=function(n){var t=this,i=n.axis&&"y2"===n.axis?t.y2:t.y;return Math.ceil(i(n.value))};t.subxx=function(n){return n?this.subX(n.x):null};t.transformMain=function(n,t){var u,f,e,r=this;t&&t.axisX?u=t.axisX:(u=r.main.select("."+i.axisX),n&&(u=u.transition()));t&&t.axisY?f=t.axisY:(f=r.main.select("."+i.axisY),n&&(f=f.transition()));t&&t.axisY2?e=t.axisY2:(e=r.main.select("."+i.axisY2),n&&(e=e.transition()));(n?r.main.transition():r.main).attr("transform",r.getTranslate("main"));u.attr("transform",r.getTranslate("x"));f.attr("transform",r.getTranslate("y"));e.attr("transform",r.getTranslate("y2"));r.main.select("."+i.chartArcs).attr("transform",r.getTranslate("arc"))};t.transformAll=function(n,t){var i=this;i.transformMain(n,t);i.config.subchart_show&&i.transformContext(n,t);i.legend&&i.transformLegend(n)};t.updateSvgSize=function(){var n=this,t=n.svg.select(".c3-brush .background");n.svg.attr("width",n.currentWidth).attr("height",n.currentHeight);n.svg.selectAll(["#"+n.clipId,"#"+n.clipIdForGrid]).select("rect").attr("width",n.width).attr("height",n.height);n.svg.select("#"+n.clipIdForXAxis).select("rect").attr("x",n.getXAxisClipX.bind(n)).attr("y",n.getXAxisClipY.bind(n)).attr("width",n.getXAxisClipWidth.bind(n)).attr("height",n.getXAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForYAxis).select("rect").attr("x",n.getYAxisClipX.bind(n)).attr("y",n.getYAxisClipY.bind(n)).attr("width",n.getYAxisClipWidth.bind(n)).attr("height",n.getYAxisClipHeight.bind(n));n.svg.select("#"+n.clipIdForSubchart).select("rect").attr("width",n.width).attr("height",t.size()?t.attr("height"):0);n.svg.select("."+i.zoomRect).attr("width",n.width).attr("height",n.height);n.selectChart.style("max-height",n.currentHeight+"px")};t.updateDimension=function(n){var t=this;n||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis)));t.updateSizes();t.updateScales();t.updateSvgSize();t.transformAll(!1)};t.observeInserted=function(t){var r,i=this;return"undefined"==typeof MutationObserver?void n.console.error("MutationObserver not defined."):(r=new MutationObserver(function(u){u.forEach(function(u){"childList"===u.type&&u.previousSibling&&(r.disconnect(),i.intervalForObserveInserted=n.setInterval(function(){t.node().parentNode&&(n.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})}),void r.observe(t.node(),{attributes:!0,childList:!0,characterData:!0}))};t.bindResize=function(){var t=this,r=t.config,i;(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){r.onresize.call(t)}),r.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&n.clearTimeout(t.resizeTimeout);t.resizeTimeout=n.setTimeout(function(){delete t.resizeTimeout;t.api.flush()},100)}),t.resizeFunction.add(function(){r.onresized.call(t)}),n.attachEvent)?n.attachEvent("onresize",t.resizeFunction):n.addEventListener?n.addEventListener("resize",t.resizeFunction,!1):(i=n.onresize,i?i.add&&i.remove||(i=t.generateResize(),i.add(n.onresize)):i=t.generateResize(),i.add(t.resizeFunction),n.onresize=i)};t.generateResize=function(){function t(){n.forEach(function(n){n()})}var n=[];return t.add=function(t){n.push(t)},t.remove=function(t){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},t};t.endall=function(n,t){var i=0;n.each(function(){++i}).each("end",function(){--i||t.apply(this,arguments)})};t.generateWait=function(){var n=[],t=function(t,i){var r=setInterval(function(){var t=0;n.forEach(function(n){if(n.empty())return void(t+=1);try{n.transition()}catch(i){t+=1}});t===n.length&&(clearInterval(r),i&&i())},10)};return t.add=function(t){n.push(t)},t};t.parseDate=function(t){var i,r=this;return t instanceof Date?i=t:"string"==typeof t?i=r.dataTimeFormat(r.config.data_xFormat).parse(t):"number"!=typeof t||isNaN(t)||(i=new Date(+t)),(!i||isNaN(+i))&&n.console.error("Failed to parse x '"+t+"' to Date object"),i};t.isTabVisible=function(){var n;return"undefined"!=typeof document.hidden?n="hidden":"undefined"!=typeof document.mozHidden?n="mozHidden":"undefined"!=typeof document.msHidden?n="msHidden":"undefined"!=typeof document.webkitHidden&&(n="webkitHidden"),document[n]?!1:!0};t.getDefaultConfig=function(){var n={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(n){return n},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(n,t,i,r){return this.getTooltipContent?this.getTooltipContent(n,t,i,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){n[t]=this.additionalConfig[t]},this),n};t.additionalConfig={};t.loadConfig=function(n){function r(){var n=u.shift();return n&&t&&"object"==typeof t&&n in t?(t=t[n],r()):n?void 0:t}var t,u,i,f=this.config;Object.keys(f).forEach(function(e){t=n;u=e.split("_");i=r();o(i)&&(f[e]=i)})};t.getScale=function(n,t,i){return(i?this.d3.time.scale():this.d3.scale.linear()).range([n,t])};t.getX=function(n,t,i,r){var o,e=this,u=e.getScale(n,t,e.isTimeSeries()),f=i?u.domain(i):u;e.isCategorized()?(r=r||function(){return 0},u=function(n,t){var i=f(n)+r(n);return t?i:Math.ceil(i)}):u=function(n,t){var i=f(n);return t?i:Math.ceil(i)};for(o in f)u[o]=f[o];return u.orgDomain=function(){return f.domain()},e.isCategorized()&&(u.domain=function(n){return arguments.length?(f.domain(n),u):(n=this.orgDomain(),[n[0],n[1]+1])}),u};t.getY=function(n,t,i){var r=this.getScale(n,t,this.isTimeSeriesY());return i&&r.domain(i),r};t.getYScale=function(n){return"y2"===this.axis.getId(n)?this.y2:this.y};t.getSubYScale=function(n){return"y2"===this.axis.getId(n)?this.subY2:this.subY};t.updateScales=function(){var n=this,t=n.config,i=!n.x;n.xMin=t.axis_rotated?1:0;n.xMax=t.axis_rotated?n.height:n.width;n.yMin=t.axis_rotated?0:n.height;n.yMax=t.axis_rotated?n.width:1;n.subXMin=n.xMin;n.subXMax=n.xMax;n.subYMin=t.axis_rotated?0:n.height2;n.subYMax=t.axis_rotated?n.width2:1;n.x=n.getX(n.xMin,n.xMax,i?void 0:n.x.orgDomain(),function(){return n.xAxis.tickOffset()});n.y=n.getY(n.yMin,n.yMax,i?t.axis_y_default:n.y.domain());n.y2=n.getY(n.yMin,n.yMax,i?t.axis_y2_default:n.y2.domain());n.subX=n.getX(n.xMin,n.xMax,n.orgXDomain,function(t){return t%1?0:n.subXAxis.tickOffset()});n.subY=n.getY(n.subYMin,n.subYMax,i?t.axis_y_default:n.subY.domain());n.subY2=n.getY(n.subYMin,n.subYMax,i?t.axis_y2_default:n.subY2.domain());n.xAxisTickFormat=n.axis.getXAxisTickFormat();n.xAxisTickValues=n.axis.getXAxisTickValues();n.yAxisTickValues=n.axis.getYAxisTickValues();n.y2AxisTickValues=n.axis.getY2AxisTickValues();n.xAxis=n.axis.getXAxis(n.x,n.xOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.subXAxis=n.axis.getXAxis(n.subX,n.subXOrient,n.xAxisTickFormat,n.xAxisTickValues,t.axis_x_tick_outer);n.yAxis=n.axis.getYAxis(n.y,n.yOrient,t.axis_y_tick_format,n.yAxisTickValues,t.axis_y_tick_outer);n.y2Axis=n.axis.getYAxis(n.y2,n.y2Orient,t.axis_y2_tick_format,n.y2AxisTickValues,t.axis_y2_tick_outer);i||(n.brush&&n.brush.scale(n.subX),t.zoom_enabled&&n.zoom.scale(n.x));n.updateArc&&n.updateArc()};t.getYDomainMin=function(n){var f,e,r,u,o,s,i=this,h=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n);if(h.data_groups.length>0)for(s=i.hasNegativeValueInTargets(n),f=0;f<h.data_groups.length;f++)if(u=h.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),0!==u.length)for(r=u[0],s&&t[r]&&t[r].forEach(function(n,i){t[r][i]=0>n?n:0}),e=1;e<u.length;e++)o=u[e],t[o]&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||s&&+n>0||(t[r][u]+=+n)});return i.d3.min(Object.keys(t).map(function(n){return i.d3.min(t[n])}))};t.getYDomainMax=function(n){var f,e,r,u,o,s,i=this,h=i.config,c=i.mapToIds(n),t=i.getValuesAsIdKeyed(n);if(h.data_groups.length>0)for(s=i.hasPositiveValueInTargets(n),f=0;f<h.data_groups.length;f++)if(u=h.data_groups[f].filter(function(n){return c.indexOf(n)>=0}),0!==u.length)for(r=u[0],s&&t[r]&&t[r].forEach(function(n,i){t[r][i]=n>0?n:0}),e=1;e<u.length;e++)o=u[e],t[o]&&t[o].forEach(function(n,u){i.axis.getId(o)!==i.axis.getId(r)||!t[r]||s&&0>+n||(t[r][u]+=+n)});return i.d3.max(Object.keys(t).map(function(n){return i.d3.max(t[n])}))};t.getYDomain=function(n,t,i){var g,s,ft,c,l,nt,y,tt,a,k,d,r=this,e=r.config,ut=n.filter(function(n){return r.axis.getId(n.id)===t}),b=i?r.filterByXDomain(ut,i):ut,p="y2"===t?e.axis_y2_min:e.axis_y_min,w="y2"===t?e.axis_y2_max:e.axis_y_max,u=r.getYDomainMin(b),o=r.getYDomainMax(b),it="y2"===t?e.axis_y2_center:e.axis_y_center,rt=r.hasType("bar",b)&&e.bar_zerobased||r.hasType("area",b)&&e.area_zerobased,et="y2"===t?e.axis_y2_inverted:e.axis_y_inverted,ot=r.hasDataLabel()&&e.axis_rotated,st=r.hasDataLabel()&&!e.axis_rotated;return u=f(p)?p:f(w)?w>u?u:w-10:u,o=f(w)?w:f(p)?o>p?o:p+10:o,0===b.length?"y2"===t?r.y2.domain():r.y.domain():(isNaN(u)&&(u=0),isNaN(o)&&(o=u),u===o&&(0>u?o=0:u=0),k=u>=0&&o>=0,d=0>=u&&0>=o,(f(p)&&k||f(w)&&d)&&(rt=!1),rt&&(k&&(u=0),d&&(o=0)),s=Math.abs(o-u),ft=c=l=.1*s,"undefined"!=typeof it&&(nt=Math.max(Math.abs(u),Math.abs(o)),o=it+nt,u=it-nt),ot?(y=r.getDataLabelLength(u,o,"width"),tt=v(r.y.range()),a=[y[0]/tt,y[1]/tt],c+=s*(a[1]/(1-a[0]-a[1])),l+=s*(a[0]/(1-a[0]-a[1]))):st&&(y=r.getDataLabelLength(u,o,"height"),c+=r.axis.convertPixelsToAxisPadding(y[1],s),l+=r.axis.convertPixelsToAxisPadding(y[0],s)),"y"===t&&h(e.axis_y_padding)&&(c=r.axis.getPadding(e.axis_y_padding,"top",c,s),l=r.axis.getPadding(e.axis_y_padding,"bottom",l,s)),"y2"===t&&h(e.axis_y2_padding)&&(c=r.axis.getPadding(e.axis_y2_padding,"top",c,s),l=r.axis.getPadding(e.axis_y2_padding,"bottom",l,s)),rt&&(k&&(l=u),d&&(c=-o)),g=[u-l,o+c],et?g.reverse():g)};t.getXDomainMin=function(n){var t=this,i=t.config;return o(i.axis_x_min)?t.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:t.d3.min(n,function(n){return t.d3.min(n.values,function(n){return n.x})})};t.getXDomainMax=function(n){var t=this,i=t.config;return o(i.axis_x_max)?t.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:t.d3.max(n,function(n){return t.d3.max(n.values,function(n){return n.x})})};t.getXDomainPadding=function(n){var u,i,e,o,r=this,t=r.config,s=n[1]-n[0];return r.isCategorized()?i=0:r.hasType("bar")?(u=r.getMaxDataCount(),i=u>1?s/(u-1)/2:.5):i=.01*s,"object"==typeof t.axis_x_padding&&h(t.axis_x_padding)?(e=f(t.axis_x_padding.left)?t.axis_x_padding.left:i,o=f(t.axis_x_padding.right)?t.axis_x_padding.right:i):e=o="number"==typeof t.axis_x_padding?t.axis_x_padding:i,{left:e,right:o}};t.getXDomain=function(n){var r=this,f=[r.getXDomainMin(n),r.getXDomainMax(n)],t=f[0],i=f[1],u=r.getXDomainPadding(f),e=0,o=0;return t-i!=0||r.isCategorized()||(r.isTimeSeries()?(t=new Date(.5*t.getTime()),i=new Date(1.5*i.getTime())):(t=0===t?1:.5*t,i=0===i?-1:1.5*i)),(t||0===t)&&(e=r.isTimeSeries()?new Date(t.getTime()-u.left):t-u.left),(i||0===i)&&(o=r.isTimeSeries()?new Date(i.getTime()+u.right):i+u.right),[e,o]};t.updateXDomain=function(n,t,i,r,u){var f=this,e=f.config;return i&&(f.x.domain(u?u:f.d3.extent(f.getXDomain(n))),f.orgXDomain=f.x.domain(),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),t&&(f.x.domain(u?u:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),e.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),r&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()};t.trimXDomain=function(n){var r=this.getZoomDomain(),t=r[0],i=r[1];return n[0]<=t&&(n[1]=+n[1]+(t-n[0]),n[0]=t),i<=n[1]&&(n[0]=+n[0]-(n[1]-i),n[1]=i),n};t.isX=function(n){var i=this,t=i.config;return t.data_x&&n===t.data_x||h(t.data_xs)&&rt(t.data_xs,n)};t.isNotX=function(n){return!this.isX(n)};t.getXKey=function(n){var i=this,t=i.config;return t.data_x?t.data_x:h(t.data_xs)?t.data_xs[n]:null};t.getXValuesOfXKey=function(n,t){var r,i=this,u=t&&h(t)?i.mapToIds(t):[];return u.forEach(function(t){i.getXKey(t)===n&&(r=i.data.xs[t])}),r};t.getIndexByX=function(n){var t=this,i=t.filterByX(t.data.targets,n);return i.length?i[0].index:null};t.getXValue=function(n,t){var i=this;return n in i.data.xs&&i.data.xs[n]&&f(i.data.xs[n][t])?i.data.xs[n][t]:t};t.getOtherTargetXs=function(){var n=this,t=Object.keys(n.data.xs);return t.length?n.data.xs[t[0]]:null};t.getOtherTargetX=function(n){var t=this.getOtherTargetXs();return t&&n<t.length?t[n]:null};t.addXs=function(n){var t=this;Object.keys(n).forEach(function(i){t.config.data_xs[i]=n[i]})};t.hasMultipleX=function(n){return this.d3.set(Object.keys(n).map(function(t){return n[t]})).size()>1};t.isMultipleX=function(){return h(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};t.addName=function(n){var t,i=this;return n&&(t=i.config.data_names[n.id],n.name=void 0!==t?t:n.id),n};t.getValueOnIndex=function(n,t){var i=n.filter(function(n){return n.index===t});return i.length?i[0]:null};t.updateTargetX=function(n,t){var i=this;n.forEach(function(n){n.values.forEach(function(r,u){r.x=i.generateTargetX(t[u],n.id,u)});i.data.xs[n.id]=t})};t.updateTargetXs=function(n,t){var i=this;n.forEach(function(n){t[n.id]&&i.updateTargetX([n],t[n.id])})};t.generateTargetX=function(n,t,i){var r=this;return r.isTimeSeries()?n?r.parseDate(n):r.parseDate(r.getXValue(t,i)):r.isCustomX()&&!r.isCategorized()?f(n)?+n:r.getXValue(t,i):i};t.cloneTarget=function(n){return{id:n.id,id_org:n.id_org,values:n.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}};t.updateXs=function(){var n=this;n.data.targets.length&&(n.xs=[],n.data.targets[0].values.forEach(function(t){n.xs[t.index]=t.x}))};t.getPrevX=function(n){var t=this.xs[n-1];return"undefined"!=typeof t?t:null};t.getNextX=function(n){var t=this.xs[n+1];return"undefined"!=typeof t?t:null};t.getMaxDataCount=function(){var n=this;return n.d3.max(n.data.targets,function(n){return n.values.length})};t.getMaxDataCountTarget=function(n){var t,i=n.length,r=0;return i>1?n.forEach(function(n){n.values.length>r&&(t=n,r=n.values.length)}):t=i?n[0]:null,t};t.getEdgeX=function(n){var t=this;return n.length?[t.d3.min(n,function(n){return n.values[0].x}),t.d3.max(n,function(n){return n.values[n.values.length-1].x})]:[0,0]};t.mapToIds=function(n){return n.map(function(n){return n.id})};t.mapToTargetIds=function(n){var t=this;return n?[].concat(n):t.mapToIds(t.data.targets)};t.hasTarget=function(n,t){for(var r=this.mapToIds(n),i=0;i<r.length;i++)if(r[i]===t)return!0;return!1};t.isTargetToShow=function(n){return this.hiddenTargetIds.indexOf(n)<0};t.isLegendToShow=function(n){return this.hiddenLegendIds.indexOf(n)<0};t.filterTargetsToShow=function(n){var t=this;return n.filter(function(n){return t.isTargetToShow(n.id)})};t.mapTargetsToUniqueXs=function(n){var i=this,t=i.d3.set(i.d3.merge(n.map(function(n){return n.values.map(function(n){return+n.x})}))).values();return t=i.isTimeSeries()?t.map(function(n){return new Date(+n)}):t.map(function(n){return+n}),t.sort(function(n,t){return t>n?-1:n>t?1:n>=t?0:NaN})};t.addHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.concat(n)};t.removeHiddenTargetIds=function(n){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return n.indexOf(t)<0})};t.addHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.concat(n)};t.removeHiddenLegendIds=function(n){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return n.indexOf(t)<0})};t.getValuesAsIdKeyed=function(n){var t={};return n.forEach(function(n){t[n.id]=[];n.values.forEach(function(i){t[n.id].push(i.value)})}),t};t.checkValueInTargets=function(n,t){for(var r,u,f=Object.keys(n),i=0;i<f.length;i++)for(u=n[f[i]].values,r=0;r<u.length;r++)if(t(u[r].value))return!0;return!1};t.hasNegativeValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return 0>n})};t.hasPositiveValueInTargets=function(n){return this.checkValueInTargets(n,function(n){return n>0})};t.isOrderDesc=function(){var n=this.config;return"string"==typeof n.data_order&&"desc"===n.data_order.toLowerCase()};t.isOrderAsc=function(){var n=this.config;return"string"==typeof n.data_order&&"asc"===n.data_order.toLowerCase()};t.orderTargets=function(n){var t=this,i=t.config,r=t.isOrderAsc(),u=t.isOrderDesc();return r||u?n.sort(function(n,t){var i=function(n,t){return n+Math.abs(t.value)},u=n.values.reduce(i,0),f=t.values.reduce(i,0);return r?f-u:u-f}):a(i.data_order)&&n.sort(i.data_order),n};t.filterByX=function(n,t){return this.d3.merge(n.map(function(n){return n.values})).filter(function(n){return n.x-t==0})};t.filterRemoveNull=function(n){return n.filter(function(n){return f(n.value)})};t.filterByXDomain=function(n,t){return n.map(function(n){return{id:n.id,id_org:n.id_org,values:n.values.filter(function(n){return t[0]<=n.x&&n.x<=t[1]})}})};t.hasDataLabel=function(){var n=this.config;return"boolean"==typeof n.data_labels&&n.data_labels?!0:"object"==typeof n.data_labels&&h(n.data_labels)?!0:!1};t.getDataLabelLength=function(n,t,i){var r=this,u=[0,0],f=1.3;return r.selectChart.select("svg").selectAll(".dummy").data([n,t]).enter().append("text").text(function(n){return r.dataLabelFormat(n.id)(n)}).each(function(n,t){u[t]=this.getBoundingClientRect()[i]*f}).remove(),u};t.isNoneArc=function(n){return this.hasTarget(this.data.targets,n.id)};t.isArc=function(n){return"data"in n&&this.hasTarget(this.data.targets,n.data.id)};t.findSameXOfValues=function(n,t){for(var u=n[t].x,r=[],i=t-1;i>=0&&u===n[i].x;i--)r.push(n[i]);for(i=t;i<n.length&&u===n[i].x;i++)r.push(n[i]);return r};t.findClosestFromTargets=function(n,t){var i,r=this;return i=n.map(function(n){return r.findClosest(n.values,t)}),r.findClosest(i,t)};t.findClosest=function(n,t){var u,r=this,f=r.config.point_sensitivity;return n.filter(function(n){return n&&r.isBarType(n.id)}).forEach(function(n){var t=r.main.select("."+i.bars+r.getTargetSelectorSuffix(n.id)+" ."+i.bar+"-"+n.index).node();!u&&r.isWithinBar(t)&&(u=n)}),n.filter(function(n){return n&&!r.isBarType(n.id)}).forEach(function(n){var i=r.dist(n,t);f>i&&(f=i,u=n)}),u};t.dist=function(n,t){var i=this,r=i.config,u=r.axis_rotated?1:0,f=r.axis_rotated?0:1,e=i.circleY(n,n.index),o=i.x(n.x);return Math.sqrt(Math.pow(o-t[u],2)+Math.pow(e-t[f],2))};t.convertValuesToStep=function(n){var i,t=[].concat(n);if(!this.isCategorized())return n;for(i=n.length+1;i>0;i--)t[i]=t[i-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[n.length+1]={x:t[n.length].x+1,value:t[n.length].value,id:t[n.length].id},t};t.updateDataAttributes=function(n,t){var r=this,u=r.config,i=u["data_"+n];return"undefined"==typeof t?i:(Object.keys(t).forEach(function(n){i[n]=t[n]}),r.redraw({withLegend:!0}),i)};t.convertUrlToData=function(n,t,i,r){var u=this,f=t?t:"csv";u.d3.xhr(n,function(n,t){var e;if(!t)throw new Error(n.responseURL+" "+n.status+" ("+n.statusText+")");e="json"===f?u.convertJsonToData(JSON.parse(t.response),i):"tsv"===f?u.convertTsvToData(t.response):u.convertCsvToData(t.response);r.call(u,e)})};t.convertXsvToData=function(n,t){var i,r=t.parseRows(n);return 1===r.length?(i=[{}],r[0].forEach(function(n){i[0][n]=null})):i=t.parse(n),i};t.convertCsvToData=function(n){return this.convertXsvToData(n,this.d3.csv)};t.convertTsvToData=function(n){return this.convertXsvToData(n,this.d3.tsv)};t.convertJsonToData=function(n,t){var r,u,f=this,i=[];return t?(t.x?(r=t.value.concat(t.x),f.config.data_x=t.x):r=t.value,i.push(r),n.forEach(function(n){var t=[];r.forEach(function(i){var r=c(n[i])?null:n[i];t.push(r)});i.push(t)}),u=f.convertRowsToData(i)):(Object.keys(n).forEach(function(t){i.push([t].concat(n[t]))}),u=f.convertColumnsToData(i)),u};t.convertRowsToData=function(n){for(var i,f=n[0],r={},u=[],t=1;t<n.length;t++){for(r={},i=0;i<n[t].length;i++){if(c(n[t][i]))throw new Error("Source data is missing a component at ("+t+","+i+")!");r[f[i]]=n[t][i]}u.push(r)}return u};t.convertColumnsToData=function(n){for(var t,u,r=[],i=0;i<n.length;i++)for(u=n[i][0],t=1;t<n[i].length;t++){if(c(r[t-1])&&(r[t-1]={}),c(n[i][t]))throw new Error("Source data is missing a component at ("+i+","+t+")!");r[t-1][u]=n[i][t]}return r};t.convertDataToTargets=function(n,t){var u,i=this,r=i.config,e=i.d3.keys(n[0]).filter(i.isNotX,i),s=i.d3.keys(n[0]).filter(i.isX,i);return e.forEach(function(u){var e=i.getXKey(u);i.isCustomX()||i.isTimeSeries()?s.indexOf(e)>=0?i.data.xs[u]=(t&&i.data.xs[u]?i.data.xs[u]:[]).concat(n.map(function(n){return n[e]}).filter(f).map(function(n,t){return i.generateTargetX(n,u,t)})):r.data_x?i.data.xs[u]=i.getOtherTargetXs():h(r.data_xs)&&(i.data.xs[u]=i.getXValuesOfXKey(e,i.data.targets)):i.data.xs[u]=n.map(function(n,t){return t})}),e.forEach(function(n){if(!i.data.xs[n])throw new Error('x is not defined for id = "'+n+'".');}),u=e.map(function(t,u){var f=r.data_idConverter(t);return{id:f,id_org:t,values:n.map(function(n,e){var h=i.getXKey(t),o=n[h],s=i.generateTargetX(o,t,e),l=null===n[t]||isNaN(n[t])?null:+n[t];return i.isCustomX()&&i.isCategorized()&&0===u&&o&&(0===e&&(r.axis_x_categories=[]),r.axis_x_categories.push(o)),(c(n[t])||i.data.xs[t].length<=e)&&(s=void 0),{x:s,value:l,id:f}}).filter(function(n){return o(n.x)})}}),u.forEach(function(n){var t;r.data_xSort&&(n.values=n.values.sort(function(n,t){var i=n.x||0===n.x?n.x:1/0,r=t.x||0===t.x?t.x:1/0;return i-r}));t=0;n.values.forEach(function(n){n.index=t++});i.data.xs[n.id].sort(function(n,t){return n-t})}),i.hasNegativeValue=i.hasNegativeValueInTargets(u),i.hasPositiveValue=i.hasPositiveValueInTargets(u),r.data_type&&i.setTargetType(i.mapToIds(u).filter(function(n){return!(n in r.data_types)}),r.data_type),u.forEach(function(n){i.addCache(n.id_org,n)}),u};t.load=function(n,t){var i=this;n&&(t.filter&&(n=n.filter(t.filter)),(t.type||t.types)&&n.forEach(function(n){var r=t.types&&t.types[n.id]?t.types[n.id]:t.type;i.setTargetType(n.id,r)}),i.data.targets.forEach(function(t){for(var i=0;i<n.length;i++)if(t.id===n[i].id){t.values=n[i].values;n.splice(i,1);break}}),i.data.targets=i.data.targets.concat(n));i.updateTargets(i.data.targets);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});t.done&&t.done()};t.loadFromArgs=function(n){var t=this;n.data?t.load(t.convertDataToTargets(n.data),n):n.url?t.convertUrlToData(n.url,n.mimeType,n.keys,function(i){t.load(t.convertDataToTargets(i),n)}):n.json?t.load(t.convertDataToTargets(t.convertJsonToData(n.json,n.keys)),n):n.rows?t.load(t.convertDataToTargets(t.convertRowsToData(n.rows)),n):n.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(n.columns)),n):t.load(null,n)};t.unload=function(n,t){var r=this;return t||(t=function(){}),n=n.filter(function(n){return r.hasTarget(r.data.targets,n)}),n&&0!==n.length?(r.svg.selectAll(n.map(function(n){return r.selectorTarget(n)})).transition().style("opacity",0).remove().call(r.endall,t),void n.forEach(function(n){r.withoutFadeIn[n]=!1;r.legend&&r.legend.selectAll("."+i.legendItem+r.getTargetSelectorSuffix(n)).remove();r.data.targets=r.data.targets.filter(function(t){return t.id!==n})})):void t()};t.categoryName=function(n){var t=this.config;return n<t.axis_x_categories.length?t.axis_x_categories[n]:n};t.initEventRect=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.eventRects).style("fill-opacity",0)};t.redrawEventRect=function(){var t,u,n=this,e=n.config,f=n.isMultipleX(),r=n.main.select("."+i.eventRects).style("cursor",e.zoom_enabled?e.axis_rotated?"ns-resize":"ew-resize":null).classed(i.eventRectsMultiple,f).classed(i.eventRectsSingle,!f);r.selectAll("."+i.eventRect).remove();n.eventRect=r.selectAll("."+i.eventRect);f?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(u=n.getMaxDataCountTarget(n.data.targets),r.datum(u?u.values:[]),n.eventRect=r.selectAll("."+i.eventRect),t=n.eventRect.data(function(n){return n}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())};t.updateEventRect=function(n){var f,e,o,s,i,u,t=this,r=t.config;n=n||t.eventRect.data(function(n){return n});t.isMultipleX()?(f=0,e=0,o=t.width,s=t.height):(!t.isCustomX()&&!t.isTimeSeries()||t.isCategorized()?(i=t.getEventRectWidth(),u=function(n){return t.x(n.x)-i/2}):(t.updateXs(),i=function(n){var i=t.getPrevX(n.index),u=t.getNextX(n.index);return null===i&&null===u?r.axis_rotated?t.height:t.width:(null===i&&(i=t.x.domain()[0]),null===u&&(u=t.x.domain()[1]),Math.max(0,(t.x(u)-t.x(i))/2))},u=function(n){var i=t.getPrevX(n.index),r=t.getNextX(n.index),u=t.data.xs[n.id][n.index];return null===i&&null===r?0:(null===i&&(i=t.x.domain()[0]),(t.x(u)+t.x(i))/2)}),f=r.axis_rotated?0:u,e=r.axis_rotated?u:0,o=r.axis_rotated?t.width:i,s=r.axis_rotated?i:t.height);n.attr("class",t.classEvent.bind(t)).attr("x",f).attr("y",e).attr("width",o).attr("height",s)};t.generateEventRectsForSingleX=function(n){var t=this,u=t.d3,r=t.config;n.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",function(n){var u=n.index;t.dragging||t.flowing||t.hasArcType()||(r.point_focus_expand_enabled&&t.expandCircles(u,null,!0),t.expandBars(u,null,!0),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseover.call(t.api,n)}))}).on("mouseout",function(n){var u=n.index;t.config&&(t.hasArcType()||(t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+i.shape+"-"+u).each(function(n){r.data_onmouseout.call(t.api,n)})))}).on("mousemove",function(n){var e,f=n.index,o=t.svg.select("."+i.eventRect+"-"+f);t.dragging||t.flowing||t.hasArcType()||(t.isStepType(n)&&"step-after"===t.config.line_step_type&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1),e=t.filterTargetsToShow(t.data.targets).map(function(n){return t.addName(t.getValueOnIndex(n.values,f))}),r.tooltip_grouped&&(t.showTooltip(e,this),t.showXGridFocus(e)),(!r.tooltip_grouped||r.data_selection_enabled&&!r.data_selection_grouped)&&t.main.selectAll("."+i.shape+"-"+f).each(function(){u.select(this).classed(i.EXPANDED,!0);r.data_selection_enabled&&o.style("cursor",r.data_selection_grouped?"pointer":null);r.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),r.data_selection_grouped||(t.unexpandCircles(f),t.unexpandBars(f)))}).filter(function(n){return t.isWithinShape(this,n)}).each(function(n){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(n))&&o.style("cursor","pointer");r.tooltip_grouped||(t.showTooltip([n],this),t.showXGridFocus([n]),r.point_focus_expand_enabled&&t.expandCircles(f,n.id,!0),t.expandBars(f,n.id,!0))}))}).on("click",function(n){var f=n.index;if(!t.hasArcType()&&t.toggleShape){if(t.cancelClick)return void(t.cancelClick=!1);t.isStepType(n)&&"step-after"===r.line_step_type&&u.mouse(this)[0]<t.x(t.getXValue(n.id,f))&&(f-=1);t.main.selectAll("."+i.shape+"-"+f).each(function(n){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,f),t.config.data_onclick.call(t.api,n,this))})}}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.generateEventRectsForMultipleXs=function(n){function f(){t.svg.select("."+i.eventRect).style("cursor",null);t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars()}var t=this,u=t.d3,r=t.config;n.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",i.eventRect).on("mouseout",function(){t.config&&(t.hasArcType()||f())}).on("mousemove",function(){var e,n,h,o,s=t.filterTargetsToShow(t.data.targets);if(!t.dragging&&!t.hasArcType(s)){if(e=u.mouse(this),n=t.findClosestFromTargets(s,e),!t.mouseover||n&&n.id===t.mouseover.id||(r.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),!n)return void f();h=t.isScatterType(n)||!r.tooltip_grouped?[n]:t.filterByX(s,n.x);o=h.map(function(n){return t.addName(n)});t.showTooltip(o,this);r.point_focus_expand_enabled&&t.expandCircles(n.index,n.id,!0);t.expandBars(n.index,n.id,!0);t.showXGridFocus(o);(t.isBarType(n.id)||t.dist(n,e)<r.point_sensitivity)&&(t.svg.select("."+i.eventRect).style("cursor","pointer"),t.mouseover||(r.data_onmouseover.call(t.api,n),t.mouseover=n))}}).on("click",function(){var f,n,e=t.filterTargetsToShow(t.data.targets);t.hasArcType(e)||(f=u.mouse(this),n=t.findClosestFromTargets(e,f),n&&(t.isBarType(n.id)||t.dist(n,f)<r.point_sensitivity)&&t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.shape+"-"+n.index).each(function(){(r.data_selection_grouped||t.isWithinShape(this,n))&&(t.toggleShape(this,n,n.index),t.config.data_onclick.call(t.api,n,this))}))}).call(r.data_selection_draggable&&t.drag?u.behavior.drag().origin(Object).on("drag",function(){t.drag(u.mouse(this))}).on("dragstart",function(){t.dragstart(u.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})};t.dispatchEvent=function(t,r,u){var f=this,l="."+i.eventRect+(f.isMultipleX()?"":"-"+r),e=f.main.select(l).node(),o=e.getBoundingClientRect(),s=o.left+(u?u[0]:0),h=o.top+(u?u[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(t,!0,!0,n,0,s,h,s,h,!1,!1,!1,!1,0,null);e.dispatchEvent(c)};t.getCurrentWidth=function(){var n=this,t=n.config;return t.size_width?t.size_width:n.getParentWidth()};t.getCurrentHeight=function(){var n=this,t=n.config,i=t.size_height?t.size_height:n.getParentHeight();return i>0?i:320/(n.hasType("gauge")?2:1)};t.getCurrentPaddingTop=function(){var n=this,t=n.config,i=f(t.padding_top)?t.padding_top:0;return n.title&&n.title.node()&&(i+=n.getTitlePadding()),i};t.getCurrentPaddingBottom=function(){var n=this.config;return f(n.padding_bottom)?n.padding_bottom:0};t.getCurrentPaddingLeft=function(n){var i=this,t=i.config;return f(t.padding_left)?t.padding_left:t.axis_rotated?t.axis_x_show?Math.max(p(i.getAxisWidthByAxisId("x",n)),40):1:!t.axis_y_show||t.axis_y_inner?i.axis.getYAxisLabelPosition().isOuter?30:1:p(i.getAxisWidthByAxisId("y",n))};t.getCurrentPaddingRight=function(){var n=this,t=n.config,i=n.isLegendRight?n.getLegendWidth()+20:0;return f(t.padding_right)?t.padding_right+1:t.axis_rotated?10+i:!t.axis_y2_show||t.axis_y2_inner?2+i+(n.axis.getY2AxisLabelPosition().isOuter?20:0):p(n.getAxisWidthByAxisId("y2"))+i};t.getParentRectValue=function(n){for(var i,t=this.selectChart.node();t&&"BODY"!==t.tagName;){try{i=t.getBoundingClientRect()[n]}catch(r){"width"===n&&(i=t.offsetWidth)}if(i)break;t=t.parentNode}return i};t.getParentWidth=function(){return this.getParentRectValue("width")};t.getParentHeight=function(){var n=this.selectChart.style("height");return n.indexOf("px")>0?+n.replace("px",""):0};t.getSvgLeft=function(n){var t=this,r=t.config,e=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,o=r.axis_rotated?i.axisX:i.axisY,u=t.main.select("."+o).node(),s=u&&e?u.getBoundingClientRect():{right:0},h=t.selectChart.node().getBoundingClientRect(),c=t.hasArcType(),f=s.right-h.left-(c?0:t.getCurrentPaddingLeft(n));return f>0?f:0};t.getAxisWidthByAxisId=function(n,t){var i=this,r=i.axis.getLabelPositionById(n);return i.axis.getMaxTickWidth(n,t)+(r.isInner?20:40)};t.getHorizontalAxisHeight=function(n){var i=this,t=i.config,r=30;return"x"!==n||t.axis_x_show?"x"===n&&t.axis_x_height?t.axis_x_height:"y"!==n||t.axis_y_show?"y2"!==n||t.axis_y2_show?("x"===n&&!t.axis_rotated&&t.axis_x_tick_rotate&&(r=30+i.axis.getMaxTickWidth(n)*Math.cos(Math.PI*(90-t.axis_x_tick_rotate)/180)),r+(i.axis.getLabelPositionById(n).isInner?0:10)+("y2"===n?-10:0)):i.rotated_padding_top:!t.legend_show||i.isLegendRight||i.isLegendInset?1:10:8};t.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};t.getShapeIndices=function(n){var t,r,f=this,u=f.config,i={},e=0;return f.filterTargetsToShow(f.data.targets.filter(n,f)).forEach(function(n){for(t=0;t<u.data_groups.length;t++)if(!(u.data_groups[t].indexOf(n.id)<0))for(r=0;r<u.data_groups[t].length;r++)if(u.data_groups[t][r]in i){i[n.id]=i[u.data_groups[t][r]];break}c(i[n.id])&&(i[n.id]=e++)}),i.__max__=e-1,i};t.getShapeX=function(n,t,i,r){var u=this,f=r?u.subX:u.x;return function(r){var u=r.id in i?i[r.id]:0;return r.x||0===r.x?f(r.x)-n*(t/2-u):0}};t.getShapeY=function(n){var t=this;return function(i){var r=n?t.getSubYScale(i.id):t.getYScale(i.id);return r(i.value)}};t.getShapeOffset=function(n,t,i){var r=this,u=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(n,r))),f=u.map(function(n){return n.id});return function(n,e){var o=i?r.getSubYScale(n.id):r.getYScale(n.id),s=o(0),h=s;return u.forEach(function(i){var u=r.isStepType(n)?r.convertValuesToStep(i.values):i.values;i.id!==n.id&&t[i.id]===t[n.id]&&f.indexOf(i.id)<f.indexOf(n.id)&&(("undefined"==typeof u[e]||+u[e].x!=+n.x)&&(e=-1,u.forEach(function(t,i){t.x===n.x&&(e=i)})),e in u&&u[e].value*n.value>=0&&(h+=o(u[e].value)-s))}),h}};t.isWithinShape=function(n,t){var u,r=this,f=r.d3.select(n);return r.isTargetToShow(t.id)?"circle"===n.nodeName?u=r.isStepType(t)?r.isWithinStep(n,r.getYScale(t.id)(t.value)):r.isWithinCircle(n,1.5*r.pointSelectR(t)):"path"===n.nodeName&&(u=f.classed(i.bar)?r.isWithinBar(n):!0):u=!1,u};t.getInterpolate=function(n){var t=this,i=t.isInterpolationType(t.config.spline_interpolation_type)?t.config.spline_interpolation_type:"cardinal";return t.isSplineType(n)?i:t.isStepType(n)?t.config.line_step_type:"linear"};t.initLine=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartLines)};t.updateTargetsForLine=function(n){var u,r,t=this,e=t.config,f=t.classChartLine.bind(t),o=t.classLines.bind(t),s=t.classAreas.bind(t),h=t.classCircles.bind(t),c=t.classFocus.bind(t);u=t.main.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",function(n){return f(n)+c(n)});r=u.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");r.append("g").attr("class",o);r.append("g").attr("class",s);r.append("g").attr("class",function(n){return t.generateClass(i.selectedCircles,n.id)});r.append("g").attr("class",h).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null});n.forEach(function(n){t.main.selectAll("."+i.selectedCircles+t.getTargetSelectorSuffix(n.id)).selectAll("."+i.selectedCircle).each(function(t){t.value=n.values[t.index].value})})};t.updateLine=function(n){var t=this;t.mainLine=t.main.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(n){return t.isStepType(n)?"crispEdges":""}).attr("transform",null);t.mainLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLine=function(n,t){return[(t?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",n).style("stroke",this.color).style("opacity",1)]};t.generateDrawLine=function(n,t){var i=this,r=i.config,u=i.d3.svg.line(),s=i.generateGetLinePoints(n,t),f=t?i.getSubYScale:i.getYScale,e=function(n){return(t?i.subxx:i.xx).call(i,n)},o=function(n,t){return r.data_groups.length>0?s(n,t)[0][1]:f.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x(o).y(e):u.x(e).y(o),r.line_connectNull||(u=u.defined(function(n){return null!=n.value})),function(n){var o,e=r.line_connectNull?i.filterRemoveNull(n.values):n.values,c=t?i.x:i.subX,l=f.call(i,n.id),s=0,h=0;return i.isLineType(n)?r.data_regions[n.id]?o=i.lineWithRegions(e,c,l,r.data_regions[n.id]):(i.isStepType(n)&&(e=i.convertValuesToStep(e)),o=u.interpolate(i.getInterpolate(n))(e)):(e[0]&&(s=c(e[0].x),h=l(e[0].value)),o=r.axis_rotated?"M "+h+" "+s:"M "+s+" "+h),o?o:"M 0 0"}};t.generateGetLinePoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isLineType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&u>h||n.value<0&&h>u)&&(h=u),[[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)],[l,h-(u-c)]]}};t.lineWithRegions=function(n,t,i,r){function rt(n,t){for(var i=0;i<t.length;i++)if(t[i].start<n&&n<=t[i].end)return!0;return!1}function p(n){return"M"+n[0][0]+" "+n[0][1]+" "+n[1][0]+" "+n[1][1]}var u,l,w,s,e,b,k,d,a,g,nt,tt,f=this,v=f.config,ut=-1,y="M",it=f.isCategorized()?.5:0,h=[];if(o(r))for(u=0;u<r.length;u++)h[u]={},h[u].start=c(r[u].start)?n[0].x:f.isTimeSeries()?f.parseDate(r[u].start):r[u].start,h[u].end=c(r[u].end)?n[n.length-1].x:f.isTimeSeries()?f.parseDate(r[u].end):r[u].end;for(nt=v.axis_rotated?function(n){return i(n.value)}:function(n){return t(n.x)},tt=v.axis_rotated?function(n){return t(n.x)}:function(n){return i(n.value)},w=f.isTimeSeries()?function(n,r,u,f){var o,s=n.x.getTime(),h=r.x-n.x,c=new Date(s+h*u),l=new Date(s+h*(u+f));return o=v.axis_rotated?[[i(e(u)),t(c)],[i(e(u+f)),t(l)]]:[[t(c),i(e(u))],[t(l),i(e(u+f))]],p(o)}:function(n,r,u,f){var o;return o=v.axis_rotated?[[i(e(u),!0),t(s(u))],[i(e(u+f),!0),t(s(u+f))]]:[[t(s(u),!0),i(e(u))],[t(s(u+f),!0),i(e(u+f))]],p(o)},u=0;u<n.length;u++){if(c(h)||!rt(n[u].x,h))y+=" "+nt(n[u])+" "+tt(n[u]);else for(s=f.getScale(n[u-1].x+it,n[u].x+it,f.isTimeSeries()),e=f.getScale(n[u-1].value,n[u].value),b=t(n[u].x)-t(n[u-1].x),k=i(n[u].value)-i(n[u-1].value),d=Math.sqrt(Math.pow(b,2)+Math.pow(k,2)),a=2/d,g=2*a,l=a;1>=l;l+=g)y+=w(n[u-1],n[u],l,a);ut=n[u].x}return y};t.updateArea=function(n){var t=this,r=t.d3;t.mainArea=t.main.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.mainArea.style("opacity",t.orgAreaOpacity);t.mainArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawArea=function(n,t){return[(t?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};t.generateDrawArea=function(n,t){var i=this,r=i.config,u=i.d3.svg.area(),f=i.generateGetAreaPoints(n,t),e=t?i.getSubYScale:i.getYScale,o=function(n){return(t?i.subxx:i.xx).call(i,n)},s=function(n,t){return r.data_groups.length>0?f(n,t)[0][1]:e.call(i,n.id)(i.getAreaBaseValue(n.id))},h=function(n,t){return r.data_groups.length>0?f(n,t)[1][1]:e.call(i,n.id)(n.value)};return u=r.axis_rotated?u.x0(s).x1(h).y(o):u.x(o).y0(s).y1(h),r.line_connectNull||(u=u.defined(function(n){return null!==n.value})),function(n){var f,t=r.line_connectNull?i.filterRemoveNull(n.values):n.values,e=0,o=0;return i.isAreaType(n)?(i.isStepType(n)&&(t=i.convertValuesToStep(t)),f=u.interpolate(i.getInterpolate(n))(t)):(t[0]&&(e=i.x(t[0].x),o=i.getYScale(n.id)(t[0].value)),f=r.axis_rotated?"M "+o+" "+e:"M "+e+" "+o),f?f:"M 0 0"}};t.getAreaBaseValue=function(){return 0};t.generateGetAreaPoints=function(n,t){var i=this,r=i.config,u=n.__max__+1,f=i.getShapeX(0,u,n,!!t),e=i.getShapeY(!!t),o=i.getShapeOffset(i.isAreaType,n,!!t),s=t?i.getSubYScale:i.getYScale;return function(n,t){var u=s.call(i,n.id)(0),c=o(n,t)||u,l=f(n),h=e(n);return r.axis_rotated&&(0<n.value&&u>h||n.value<0&&h>u)&&(h=u),[[l,c],[l,h-(u-c)],[l,h-(u-c)],[l,c]]}};t.updateCircle=function(){var n=this;n.mainCircle=n.main.selectAll("."+i.circles).selectAll("."+i.circle).data(n.lineOrScatterData.bind(n));n.mainCircle.enter().append("circle").attr("class",n.classCircle.bind(n)).attr("r",n.pointR.bind(n)).style("fill",n.color);n.mainCircle.style("opacity",n.initialOpacityForCircle.bind(n));n.mainCircle.exit().remove()};t.redrawCircle=function(n,t,r){var u=this.main.selectAll("."+i.selectedCircle);return[(r?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",n).attr("cy",t),(r?u.transition(Math.random().toString()):u).attr("cx",n).attr("cy",t)]};t.circleX=function(n){return n.x||0===n.x?this.x(n.x):null};t.updateCircleY=function(){var t,i,n=this;n.config.data_groups.length>0?(t=n.getShapeIndices(n.isLineType),i=n.generateGetLinePoints(t),n.circleY=function(n,t){return i(n,t)[0][1]}):n.circleY=function(t){return n.getYScale(t.id)(t.value)}};t.getCircles=function(n,t){var r=this;return(t?r.main.selectAll("."+i.circles+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.circle+(f(n)?"-"+n:""))};t.expandCircles=function(n,t,r){var u=this,f=u.pointExpandedR.bind(u);r&&u.unexpandCircles();u.getCircles(n,t).classed(i.EXPANDED,!0).attr("r",f)};t.unexpandCircles=function(n){var t=this,r=t.pointR.bind(t);t.getCircles(n).filter(function(){return t.d3.select(this).classed(i.EXPANDED)}).classed(i.EXPANDED,!1).attr("r",r)};t.pointR=function(n){var i=this,t=i.config;return i.isStepType(n)?0:a(t.point_r)?t.point_r(n):t.point_r};t.pointExpandedR=function(n){var t=this,i=t.config;return i.point_focus_expand_enabled?i.point_focus_expand_r?i.point_focus_expand_r:1.75*t.pointR(n):t.pointR(n)};t.pointSelectR=function(n){var t=this,i=t.config;return i.point_select_r?i.point_select_r:4*t.pointR(n)};t.isWithinCircle=function(n,t){var i=this.d3,r=i.mouse(n),u=i.select(n),f=+u.attr("cx"),e=+u.attr("cy");return Math.sqrt(Math.pow(f-r[0],2)+Math.pow(e-r[1],2))<t};t.isWithinStep=function(n,t){return Math.abs(t-this.d3.mouse(n)[1])<30};t.initBar=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartBars)};t.updateTargetsForBar=function(n){var r,u,t=this,e=t.config,f=t.classChartBar.bind(t),o=t.classBars.bind(t),s=t.classFocus.bind(t);r=t.main.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",function(n){return f(n)+s(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",o).style("cursor",function(n){return e.data_selection_isselectable(n)?"pointer":null})};t.updateBar=function(n){var t=this,u=t.barData.bind(t),f=t.classBar.bind(t),e=t.initialOpacity.bind(t),r=function(n){return t.color(n.id)};t.mainBar=t.main.selectAll("."+i.bars).selectAll("."+i.bar).data(u);t.mainBar.enter().append("path").attr("class",f).style("stroke",r).style("fill",r);t.mainBar.style("opacity",e);t.mainBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBar=function(n,t){return[(t?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",n).style("fill",this.color).style("opacity",1)]};t.getBarW=function(n,t){var u=this,i=u.config,r="number"==typeof i.bar_width?i.bar_width:t?n.tickInterval()*i.bar_width_ratio/t:0;return i.bar_width_max&&r>i.bar_width_max?i.bar_width_max:r};t.getBars=function(n,t){var r=this;return(t?r.main.selectAll("."+i.bars+r.getTargetSelectorSuffix(t)):r.main).selectAll("."+i.bar+(f(n)?"-"+n:""))};t.expandBars=function(n,t,r){var u=this;r&&u.unexpandBars();u.getBars(n,t).classed(i.EXPANDED,!0)};t.unexpandBars=function(n){var t=this;t.getBars(n).classed(i.EXPANDED,!1)};t.generateDrawBar=function(n,t){var i=this,r=i.config,u=i.generateGetBarPoints(n,t);return function(n,t){var i=u(n,t),f=r.axis_rotated?1:0,e=r.axis_rotated?0:1;return"M "+i[0][f]+","+i[0][e]+" L"+i[1][f]+","+i[1][e]+" L"+i[2][f]+","+i[2][e]+" L"+i[3][f]+","+i[3][e]+" z"}};t.generateGetBarPoints=function(n,t){var i=this,f=t?i.subXAxis:i.xAxis,u=n.__max__+1,r=i.getBarW(f,u),e=i.getShapeX(r,u,n,!!t),o=i.getShapeY(!!t),s=i.getShapeOffset(i.isBarType,n,!!t),h=t?i.getSubYScale:i.getYScale;return function(n,t){var u=h.call(i,n.id)(0),c=s(n,t)||u,l=e(n),f=o(n);return i.config.axis_rotated&&(0<n.value&&u>f||n.value<0&&f>u)&&(f=u),[[l,c],[l,f-(u-c)],[l+r,f-(u-c)],[l+r,c]]}};t.isWithinBar=function(n){var t=this.d3.mouse(n),r=n.getBoundingClientRect(),u=n.pathSegList.getItem(0),f=n.pathSegList.getItem(1),e=Math.min(u.x,f.x),o=Math.min(u.y,f.y),s=r.width,h=r.height,i=2,c=e-i,l=e+s+i,a=o+h+i,v=o-i;return c<t[0]&&t[0]<l&&v<t[1]&&t[1]<a};t.initText=function(){var n=this;n.main.select("."+i.chart).append("g").attr("class",i.chartTexts);n.mainText=n.d3.selectAll([])};t.updateTargetsForText=function(n){var r,u,t=this,f=t.classChartText.bind(t),e=t.classTexts.bind(t),o=t.classFocus.bind(t);r=t.main.select("."+i.chartTexts).selectAll("."+i.chartText).data(n).attr("class",function(n){return f(n)+o(n)});u=r.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none");u.append("g").attr("class",e)};t.updateText=function(n){var t=this,r=t.config,u=t.barOrLineData.bind(t),f=t.classText.bind(t);t.mainText=t.main.selectAll("."+i.texts).selectAll("."+i.text).data(u);t.mainText.enter().append("text").attr("class",f).attr("text-anchor",function(n){return r.axis_rotated?n.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(n){return t.color(n)}).style("fill-opacity",0);t.mainText.text(function(n,i,r){return t.dataLabelFormat(n.id)(n.value,n.id,i,r)});t.mainText.exit().transition().duration(n).style("fill-opacity",0).remove()};t.redrawText=function(n,t,i,r){return[(r?this.mainText.transition():this.mainText).attr("x",n).attr("y",t).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]};t.getTextRect=function(n,t,i){var r,u=this.d3.select("body").append("div").classed("c3",!0),f=u.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),e=this.d3.select(i).style("font");return f.selectAll(".dummy").data([n]).enter().append("text").classed(t?t:"",!0).style("font",e).text(n).each(function(){r=this.getBoundingClientRect()}),u.remove(),r};t.generateXYForText=function(n,t,i,r){var u=this,f=u.generateGetAreaPoints(n,!1),e=u.generateGetBarPoints(t,!1),o=u.generateGetLinePoints(i,!1),s=r?u.getXForText:u.getYForText;return function(n,t){var i=u.isAreaType(n)?f:u.isBarType(n)?e:o;return s.call(u,i(n,t),n,this)}};t.getXForText=function(n,t,i){var r,f,u=this,e=i.getBoundingClientRect();return u.config.axis_rotated?(f=u.isBarType(t)?4:6,r=n[2][1]+f*(t.value<0?-1:1)):r=u.hasType("bar")?(n[2][0]+n[0][0])/2:n[0][0],null===t.value&&(r>u.width?r=u.width-e.width:0>r&&(r=4)),r};t.getYForText=function(n,t,i){var r,u=this,f=i.getBoundingClientRect();return u.config.axis_rotated?r=(n[0][0]+n[2][0]+.6*f.height)/2:(r=n[2][1],t.value<0||0===t.value&&!u.hasPositiveValue?(r+=f.height,u.isBarType(t)&&u.isSafari()?r-=3:!u.isBarType(t)&&u.isChrome()&&(r+=3)):r+=u.isBarType(t)?-3:-6),null!==t.value||u.config.axis_rotated||(r<f.height?r=f.height:r>this.height&&(r=this.height-4)),r};t.setTargetType=function(n,t){var i=this,r=i.config;i.mapToTargetIds(n).forEach(function(n){i.withoutFadeIn[n]=t===r.data_types[n];r.data_types[n]=t});n||(r.data_type=t)};t.hasType=function(n,t){var u=this,i=u.config.data_types,r=!1;return t=t||u.data.targets,t&&t.length?t.forEach(function(t){var u=i[t.id];(u&&u.indexOf(n)>=0||!u&&"line"===n)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(r=!0)}):r=u.config.data_type===n,r};t.hasArcType=function(n){return this.hasType("pie",n)||this.hasType("donut",n)||this.hasType("gauge",n)};t.isLineType=function(n){var t=this.config,i=s(n)?n:n.id;return!t.data_types[i]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[i])>=0};t.isStepType=function(n){var t=s(n)?n:n.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0};t.isSplineType=function(n){var t=s(n)?n:n.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0};t.isAreaType=function(n){var t=s(n)?n:n.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0};t.isBarType=function(n){var t=s(n)?n:n.id;return"bar"===this.config.data_types[t]};t.isScatterType=function(n){var t=s(n)?n:n.id;return"scatter"===this.config.data_types[t]};t.isPieType=function(n){var t=s(n)?n:n.id;return"pie"===this.config.data_types[t]};t.isGaugeType=function(n){var t=s(n)?n:n.id;return"gauge"===this.config.data_types[t]};t.isDonutType=function(n){var t=s(n)?n:n.id;return"donut"===this.config.data_types[t]};t.isArcType=function(n){return this.isPieType(n)||this.isDonutType(n)||this.isGaugeType(n)};t.lineData=function(n){return this.isLineType(n)?[n]:[]};t.arcData=function(n){return this.isArcType(n.data)?[n]:[]};t.barData=function(n){return this.isBarType(n)?n.values:[]};t.lineOrScatterData=function(n){return this.isLineType(n)||this.isScatterType(n)?n.values:[]};t.barOrLineData=function(n){return this.isBarType(n)||this.isLineType(n)?n.values:[]};t.isInterpolationType=function(n){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(n)>=0};t.initGrid=function(){var n=this,t=n.config,r=n.d3;n.grid=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid);t.grid_x_show&&n.grid.append("g").attr("class",i.xgrids);t.grid_y_show&&n.grid.append("g").attr("class",i.ygrids);t.grid_focus_show&&n.grid.append("g").attr("class",i.xgridFocus).append("line").attr("class",i.xgridFocus);n.xgrid=r.selectAll([]);t.grid_lines_front||n.initGridLines()};t.initGridLines=function(){var n=this,t=n.d3;n.gridLines=n.main.append("g").attr("clip-path",n.clipPathForGrid).attr("class",i.grid+" "+i.gridLines);n.gridLines.append("g").attr("class",i.xgridLines);n.gridLines.append("g").attr("class",i.ygridLines);n.xgridLines=t.selectAll([])};t.updateXGrid=function(n){var t=this,r=t.config,f=t.d3,e=t.generateGridData(r.grid_x_type,t.x),u=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=r.axis_rotated?{x1:0,x2:t.width,y1:function(n){return t.x(n)-u},y2:function(n){return t.x(n)-u}}:{x1:function(n){return t.x(n)+u},x2:function(n){return t.x(n)+u},y1:0,y2:t.height};t.xgrid=t.main.select("."+i.xgrids).selectAll("."+i.xgrid).data(e);t.xgrid.enter().append("line").attr("class",i.xgrid);n||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+f.select(this).attr(r.axis_rotated?"y1":"x1")===(r.axis_rotated?t.height:0)?0:1});t.xgrid.exit().remove()};t.updateYGrid=function(){var n=this,t=n.config,r=n.yAxis.tickValues()||n.y.ticks(t.grid_y_ticks);n.ygrid=n.main.select("."+i.ygrids).selectAll("."+i.ygrid).data(r);n.ygrid.enter().append("line").attr("class",i.ygrid);n.ygrid.attr("x1",t.axis_rotated?n.y:0).attr("x2",t.axis_rotated?n.y:n.width).attr("y1",t.axis_rotated?0:n.y).attr("y2",t.axis_rotated?n.height:n.y);n.ygrid.exit().remove();n.smoothLines(n.ygrid,"grid")};t.gridTextAnchor=function(n){return n.position?n.position:"end"};t.gridTextDx=function(n){return"start"===n.position?4:"middle"===n.position?0:-4};t.xGridTextX=function(n){return"start"===n.position?-this.height:"middle"===n.position?-this.height/2:0};t.yGridTextX=function(n){return"start"===n.position?0:"middle"===n.position?this.width/2:this.width};t.updateGrid=function(n){var f,e,u,t=this,o=t.main,r=t.config;t.grid.style("visibility",t.hasArcType()?"hidden":"visible");o.select("line."+i.xgridFocus).style("visibility","hidden");r.grid_x_show&&t.updateXGrid();t.xgridLines=o.select("."+i.xgridLines).selectAll("."+i.xgridLine).data(r.grid_x_lines);f=t.xgridLines.enter().append("g").attr("class",function(n){return i.xgridLine+(n["class"]?" "+n["class"]:"")});f.append("line").style("opacity",0);f.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"":"rotate(-90)").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);t.xgridLines.exit().transition().duration(n).style("opacity",0).remove();r.grid_y_show&&t.updateYGrid();t.ygridLines=o.select("."+i.ygridLines).selectAll("."+i.ygridLine).data(r.grid_y_lines);e=t.ygridLines.enter().append("g").attr("class",function(n){return i.ygridLine+(n["class"]?" "+n["class"]:"")});e.append("line").style("opacity",0);e.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"rotate(-90)":"").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0);u=t.yv.bind(t);t.ygridLines.select("line").transition().duration(n).attr("x1",r.axis_rotated?u:0).attr("x2",r.axis_rotated?u:t.width).attr("y1",r.axis_rotated?0:u).attr("y2",r.axis_rotated?t.height:u).style("opacity",1);t.ygridLines.select("text").transition().duration(n).attr("x",r.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",u).text(function(n){return n.text}).style("opacity",1);t.ygridLines.exit().transition().duration(n).style("opacity",0).remove()};t.redrawGrid=function(n){var t=this,i=t.config,r=t.xv.bind(t),u=t.xgridLines.select("line"),f=t.xgridLines.select("text");return[(n?u.transition():u).attr("x1",i.axis_rotated?0:r).attr("x2",i.axis_rotated?t.width:r).attr("y1",i.axis_rotated?r:0).attr("y2",i.axis_rotated?r:t.height).style("opacity",1),(n?f.transition():f).attr("x",i.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",r).text(function(n){return n.text}).style("opacity",1)]};t.showXGridFocus=function(n){var t=this,r=t.config,o=n.filter(function(n){return n&&f(n.value)}),u=t.main.selectAll("line."+i.xgridFocus),e=t.xx.bind(t);r.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(u.style("visibility","visible").data([o[0]]).attr(r.axis_rotated?"y1":"x1",e).attr(r.axis_rotated?"y2":"x2",e),t.smoothLines(u,"grid")))};t.hideXGridFocus=function(){this.main.select("line."+i.xgridFocus).style("visibility","hidden")};t.updateXgridFocus=function(){var n=this,t=n.config;n.main.select("line."+i.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?n.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:n.height)};t.generateGridData=function(n,t){var f,e,o,u,s=this,r=[],h=s.main.select("."+i.axisX).selectAll(".tick").size();if("year"===n)for(f=s.getXDomain(),e=f[0].getFullYear(),o=f[1].getFullYear(),u=e;o>=u;u++)r.push(new Date(u+"-01-01 00:00:00"));else r=t.ticks(10),r.length>h&&(r=r.filter(function(n){return(""+n).indexOf(".")<0}));return r};t.getGridFilterToRemove=function(n){return n?function(t){var i=!1;return[].concat(n).forEach(function(n){("value"in n&&t.value===n.value||"class"in n&&t["class"]===n["class"])&&(i=!0)}),i}:function(){return!0}};t.removeGridLines=function(n,t){var u=this,r=u.config,f=u.getGridFilterToRemove(n),e=function(n){return!f(n)},o=t?i.xgridLines:i.ygridLines,s=t?i.xgridLine:i.ygridLine;u.main.select("."+o).selectAll("."+s).filter(f).transition().duration(r.transition_duration).style("opacity",0).remove();t?r.grid_x_lines=r.grid_x_lines.filter(e):r.grid_y_lines=r.grid_y_lines.filter(e)};t.initTooltip=function(){var r,n=this,t=n.config;if(n.tooltip=n.selectChart.style("position","relative").append("div").attr("class",i.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),t.tooltip_init_show){if(n.isTimeSeries()&&s(t.tooltip_init_x)){for(t.tooltip_init_x=n.parseDate(t.tooltip_init_x),r=0;r<n.data.targets[0].values.length&&n.data.targets[0].values[r].x-t.tooltip_init_x!=0;r++);t.tooltip_init_x=r}n.tooltip.html(t.tooltip_contents.call(n,n.data.targets.map(function(i){return n.addName(i.values[t.tooltip_init_x])}),n.axis.getXAxisTickFormat(),n.getYFormat(n.hasArcType()),n.color));n.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}};t.getTooltipContent=function(n,t,i,r){var e,u,s,c,a,v,f=this,h=f.config,y=h.tooltip_format_title||t,p=h.tooltip_format_name||function(n){return n},w=h.tooltip_format_value||i,l=f.isOrderAsc(),o;for(0===h.data_groups.length?n.sort(function(n,t){return l?n.value-t.value:t.value-n.value}):(o=f.orderTargets(f.data.targets).map(function(n){return n.id}),n.sort(function(n,t){return n.value>0&&t.value>0?l?o.indexOf(n.id)-o.indexOf(t.id):o.indexOf(t.id)-o.indexOf(n.id):l?n.value-t.value:t.value-n.value})),u=0;u<n.length;u++)if(n[u]&&(n[u].value||0===n[u].value)&&(e||(s=y?y(n[u].x):n[u].x,e="<table class='"+f.CLASS.tooltip+"'>"+(s||0===s?"<tr><th colspan='2'>"+s+"<\/th><\/tr>":"")),c=w(n[u].value,n[u].ratio,n[u].id,n[u].index),void 0!==c)){if(null===n[u].name)continue;a=p(n[u].name,n[u].ratio,n[u].id,n[u].index);v=f.levelColor?f.levelColor(n[u].value):r(n[u].id);e+="<tr class='"+f.CLASS.tooltipName+"-"+f.getTargetSelectorSuffix(n[u].id)+"'>";e+="<td class='name'><span style='background-color:"+v+"'><\/span>"+a+"<\/td>";e+="<td class='value'>"+c+"<\/td>";e+="<\/tr>"}return e+"<\/table>"};t.tooltipPosition=function(n,t,i,r){var o,e,s,f,h,u=this,l=u.config,a=u.d3,v=u.hasArcType(),c=a.mouse(r);return v?(e=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+c[0],f=u.height/2+c[1]+20):(o=u.getSvgLeft(!0),l.axis_rotated?(e=o+c[0]+100,s=e+t,h=u.currentWidth-u.getCurrentPaddingRight(),f=u.x(n[0].x)+20):(e=o+u.getCurrentPaddingLeft(!0)+u.x(n[0].x)+20,s=e+t,h=o+u.currentWidth-u.getCurrentPaddingRight(),f=c[1]+15),s>h&&(e-=s-h+20),f+i>u.currentHeight&&(f-=i+30)),0>f&&(f=0),{top:f,left:e}};t.showTooltip=function(n,i){var o,s,u,r=this,e=r.config,c=r.hasArcType(),h=n.filter(function(n){return n&&f(n.value)}),l=e.tooltip_position||t.tooltipPosition;0!==h.length&&e.tooltip_show&&(r.tooltip.html(e.tooltip_contents.call(r,n,r.axis.getXAxisTickFormat(),r.getYFormat(c),r.color)).style("display","block"),o=r.tooltip.property("offsetWidth"),s=r.tooltip.property("offsetHeight"),u=l.call(this,h,o,s,i),r.tooltip.style("top",u.top+"px").style("left",u.left+"px"))};t.hideTooltip=function(){this.tooltip.style("display","none")};t.initLegend=function(){var n=this;return n.legendItemTextBox={},n.legendHasRendered=!1,n.legend=n.svg.append("g").attr("transform",n.getTranslate("legend")),n.config.legend_show?void n.updateLegendWithDefaults():(n.legend.style("visibility","hidden"),void(n.hiddenLegendIds=n.mapToIds(n.data.targets)))};t.updateLegendWithDefaults=function(){var n=this;n.updateLegend(n.mapToIds(n.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};t.updateSizeForLegend=function(n,t){var i=this,r=i.config,u={top:i.isLegendTop?i.getCurrentPaddingTop()+r.legend_inset_y+5.5:i.currentHeight-n-i.getCurrentPaddingBottom()-r.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+r.legend_inset_x+.5:i.currentWidth-t-i.getCurrentPaddingRight()-r.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?u.top:i.currentHeight-n,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-t:i.isLegendInset?u.left:0}};t.transformLegend=function(n){var t=this;(n?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))};t.updateLegendStep=function(n){this.legendStep=n};t.updateLegendItemWidth=function(n){this.legendItemWidth=n};t.updateLegendItemHeight=function(n){this.legendItemHeight=n};t.getLegendWidth=function(){var n=this;return n.config.legend_show?n.isLegendRight||n.isLegendInset?n.legendItemWidth*(n.legendStep+1):n.currentWidth:0};t.getLegendHeight=function(){var n=this,t=0;return n.config.legend_show&&(t=n.isLegendRight?n.currentHeight:Math.max(20,n.legendItemHeight)*(n.legendStep+1)),t};t.opacityForLegend=function(n){return n.classed(i.legendItemHidden)?null:1};t.opacityForUnfocusedLegend=function(n){return n.classed(i.legendItemHidden)?null:.3};t.toggleFocusLegend=function(n,t){var r=this;n=r.mapToTargetIds(n);r.legend.selectAll("."+i.legendItem).filter(function(t){return n.indexOf(t)>=0}).classed(i.legendItemFocused,t).transition().duration(100).style("opacity",function(){var n=t?r.opacityForLegend:r.opacityForUnfocusedLegend;return n.call(r,r.d3.select(this))})};t.revertLegend=function(){var n=this,t=n.d3;n.legend.selectAll("."+i.legendItem).classed(i.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return n.opacityForLegend(t.select(this))})};t.showLegend=function(n){var t=this,i=t.config;i.legend_show||(i.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults());t.removeHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})};t.hideLegend=function(n){var t=this,i=t.config;i.legend_show&&nt(n)&&(i.legend_show=!1,t.legend.style("visibility","hidden"));t.addHiddenLegendIds(n);t.legend.selectAll(t.selectorLegends(n)).style("opacity",0).style("visibility","hidden")};t.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};t.updateLegend=function(n,t,r){function yt(n,t){return u.legendItemTextBox[t]||(u.legendItemTextBox[t]=u.getTextRect(n.textContent,i.legendItem,n)),u.legendItemTextBox[t]}function lt(t,i,r){function v(n,t){t||(e=(w-p-y)/2,vt>e&&(e=(w-y)/2,p=0,h++));l[n]=h;tt[h]=u.isLegendInset?10:e;k[n]=p;p+=y}var e,b,it=0===r,rt=r===n.length-1,nt=yt(t,i),o=nt.width+bt+(!rt||u.isLegendRight||u.isLegendInset?wt:0)+f.legend_padding,a=nt.height+pt,y=u.isLegendRight||u.isLegendInset?a:o,w=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth();return it&&(p=0,h=0,s=0,c=0),f.legend_show&&!u.isLegendToShow(i)?void(d[i]=g[i]=l[i]=k[i]=0):(d[i]=o,g[i]=a,(!s||o>=s)&&(s=o),(!c||a>=c)&&(c=a),b=u.isLegendRight||u.isLegendInset?c:s,void(f.legend_equally?(Object.keys(d).forEach(function(n){d[n]=s}),Object.keys(g).forEach(function(n){g[n]=c}),e=(w-b*n.length)/2,vt>e?(p=0,h=0,n.forEach(function(n){v(n)})):v(i,!0)):v(i)))}var a,it,rt,v,ut,ft,et,ot,w,nt,b,at,st,ht,ct,y,u=this,f=u.config,pt=4,wt=10,s=0,c=0,vt=10,bt=f.legend_item_tile_width+5,p=0,k={},d={},g={},tt=[0],l={},h=0;n=n.filter(function(n){return!o(f.data_names[n])||null!==f.data_names[n]});t=t||{};b=e(t,"withTransition",!0);at=e(t,"withTransitionForTransform",!0);u.isLegendInset&&(h=f.legend_inset_step?f.legend_inset_step:n.length,u.updateLegendStep(h));u.isLegendRight?(a=function(n){return s*l[n]},v=function(n){return tt[l[n]]+k[n]}):u.isLegendInset?(a=function(n){return s*l[n]+10},v=function(n){return tt[l[n]]+k[n]}):(a=function(n){return tt[l[n]]+k[n]},v=function(n){return c*l[n]});it=function(n,t){return a(n,t)+4+f.legend_item_tile_width};ut=function(n,t){return v(n,t)+9};rt=function(n,t){return a(n,t)};ft=function(n,t){return v(n,t)-5};et=function(n,t){return a(n,t)-2};ot=function(n,t){return a(n,t)-2+f.legend_item_tile_width};w=function(n,t){return v(n,t)+4};nt=u.legend.selectAll("."+i.legendItem).data(n).enter().append("g").attr("class",function(n){return u.generateClass(i.legendItem,n)}).style("visibility",function(n){return u.isLegendToShow(n)?"visible":"hidden"}).style("cursor","pointer").on("click",function(n){f.legend_item_onclick?f.legend_item_onclick.call(u,n):u.d3.event.altKey?(u.api.hide(),u.api.show(n)):(u.api.toggle(n),u.isTargetToShow(n)?u.api.focus(n):u.api.revert())}).on("mouseover",function(n){f.legend_item_onmouseover?f.legend_item_onmouseover.call(u,n):(u.d3.select(this).classed(i.legendItemFocused,!0),!u.transiting&&u.isTargetToShow(n)&&u.api.focus(n))}).on("mouseout",function(n){f.legend_item_onmouseout?f.legend_item_onmouseout.call(u,n):(u.d3.select(this).classed(i.legendItemFocused,!1),u.api.revert())});nt.append("text").text(function(n){return o(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){lt(this,n,t)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?it:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:ut);nt.append("rect").attr("class",i.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?rt:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:ft);nt.append("line").attr("class",i.legendItemTile).style("stroke",u.color).style("pointer-events","none").attr("x1",u.isLegendRight||u.isLegendInset?et:-200).attr("y1",u.isLegendRight||u.isLegendInset?-200:w).attr("x2",u.isLegendRight||u.isLegendInset?ot:-200).attr("y2",u.isLegendRight||u.isLegendInset?-200:w).attr("stroke-width",f.legend_item_tile_height);y=u.legend.select("."+i.legendBackground+" rect");u.isLegendInset&&s>0&&0===y.size()&&(y=u.legend.insert("g","."+i.legendItem).attr("class",i.legendBackground).append("rect"));st=u.legend.selectAll("text").data(n).text(function(n){return o(f.data_names[n])?f.data_names[n]:n}).each(function(n,t){lt(this,n,t)});(b?st.transition():st).attr("x",it).attr("y",ut);ht=u.legend.selectAll("rect."+i.legendItemEvent).data(n);(b?ht.transition():ht).attr("width",function(n){return d[n]}).attr("height",function(n){return g[n]}).attr("x",rt).attr("y",ft);ct=u.legend.selectAll("line."+i.legendItemTile).data(n);(b?ct.transition():ct).style("stroke",u.color).attr("x1",et).attr("y1",w).attr("x2",ot).attr("y2",w);y&&(b?y.transition():y).attr("height",u.getLegendHeight()-12).attr("width",s*(h+1)+10);u.legend.selectAll("."+i.legendItem).classed(i.legendItemHidden,function(n){return!u.isTargetToShow(n)});u.updateLegendItemWidth(s);u.updateLegendItemHeight(c);u.updateLegendStep(h);u.updateSizes();u.updateScales();u.updateSvgSize();u.transformAll(at,r);u.legendHasRendered=!0};t.initTitle=function(){var n=this;n.title=n.svg.append("text").text(n.config.title_text).attr("class",n.CLASS.title)};t.redrawTitle=function(){var n=this;n.title.attr("x",n.xForTitle.bind(n)).attr("y",n.yForTitle.bind(n))};t.xForTitle=function(){var n=this,t=n.config,i=t.title_position||"left";return i.indexOf("right")>=0?n.currentWidth-n.getTextRect(n.title.node().textContent,n.CLASS.title,n.title.node()).width-t.title_padding.right:i.indexOf("center")>=0?(n.currentWidth-n.getTextRect(n.title.node().textContent,n.CLASS.title,n.title.node()).width)/2:t.title_padding.left};t.yForTitle=function(){var n=this;return n.config.title_padding.top+n.getTextRect(n.title.node().textContent,n.CLASS.title,n.title.node()).height};t.getTitlePadding=function(){var n=this;return n.yForTitle()+n.config.title_padding.bottom};tt(b,u);u.prototype.init=function(){var n=this.owner,t=n.config,r=n.main;n.axes.x=r.append("g").attr("class",i.axis+" "+i.axisX).attr("clip-path",n.clipPathForXAxis).attr("transform",n.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden");n.axes.x.append("text").attr("class",i.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));n.axes.y=r.append("g").attr("class",i.axis+" "+i.axisY).attr("clip-path",t.axis_y_inner?"":n.clipPathForYAxis).attr("transform",n.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden");n.axes.y.append("text").attr("class",i.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));n.axes.y2=r.append("g").attr("class",i.axis+" "+i.axisY2).attr("transform",n.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden");n.axes.y2.append("text").attr("class",i.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};u.prototype.getXAxis=function(n,t,i,r,u,f,e){var o=this.owner,s=o.config,c={isCategory:o.isCategorized(),withOuterTick:u,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTextRotate:e?0:s.axis_x_tick_rotate,withoutTransition:f},h=g(o.d3,c).scale(n).orient(t);return o.isTimeSeries()&&r&&"function"!=typeof r&&(r=r.map(function(n){return o.parseDate(n)})),h.tickFormat(i).tickValues(r),o.isCategorized()&&(h.tickCentered(s.axis_x_tick_centered),nt(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1)),h};u.prototype.updateXAxisTickValues=function(n,t){var i,r=this.owner,u=r.config;return(u.axis_x_tick_fit||u.axis_x_tick_count)&&(i=this.generateTickValues(r.mapTargetsToUniqueXs(n),u.axis_x_tick_count,r.isTimeSeries())),t?t.tickValues(i):(r.xAxis.tickValues(i),r.subXAxis.tickValues(i)),i};u.prototype.getYAxis=function(n,t,i,r,u,f){var c={withOuterTick:u,withoutTransition:f},e=this.owner,s=e.d3,h=e.config,o=g(s,c).scale(n).orient(t).tickFormat(i);return e.isTimeSeriesY()?o.ticks(s.time[h.axis_y_tick_time_value],h.axis_y_tick_time_interval):o.tickValues(r),o};u.prototype.getId=function(n){var t=this.owner.config;return n in t.data_axes?t.data_axes[n]:"y"};u.prototype.getXAxisTickFormat=function(){var n=this.owner,i=n.config,t=n.isTimeSeries()?n.defaultAxisTimeFormat:n.isCategorized()?n.categoryName:function(n){return 0>n?n.toFixed(0):n};return i.axis_x_tick_format&&(a(i.axis_x_tick_format)?t=i.axis_x_tick_format:n.isTimeSeries()&&(t=function(t){return t?n.axisTimeFormat(i.axis_x_tick_format)(t):""})),a(t)?function(i){return t.call(n,i)}:t};u.prototype.getTickValues=function(n,t){return n?n:t?t.tickValues():void 0};u.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};u.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};u.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};u.prototype.getLabelOptionByAxisId=function(n){var t,r=this.owner,i=r.config;return"y"===n?t=i.axis_y_label:"y2"===n?t=i.axis_y2_label:"x"===n&&(t=i.axis_x_label),t};u.prototype.getLabelText=function(n){var t=this.getLabelOptionByAxisId(n);return s(t)?t:t?t.text:null};u.prototype.setLabelText=function(n,t){var u=this.owner,i=u.config,r=this.getLabelOptionByAxisId(n);s(r)?"y"===n?i.axis_y_label=t:"y2"===n?i.axis_y2_label=t:"x"===n&&(i.axis_x_label=t):r&&(r.text=t)};u.prototype.getLabelPosition=function(n,t){var r=this.getLabelOptionByAxisId(n),i=r&&"object"==typeof r&&r.position?r.position:t;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}};u.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};u.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};u.prototype.getLabelPositionById=function(n){return"y2"===n?this.getY2AxisLabelPosition():"y"===n?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};u.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};u.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};u.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};u.prototype.xForAxisLabel=function(n,t){var i=this.owner;return n?t.isLeft?0:t.isCenter?i.width/2:i.width:t.isBottom?-i.height:t.isMiddle?-i.height/2:0};u.prototype.dxForAxisLabel=function(n,t){return n?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"};u.prototype.textAnchorForAxisLabel=function(n,t){return n?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"};u.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.dyForXAxisLabel=function(){var i=this.owner,n=i.config,t=this.getXAxisLabelPosition();return n.axis_rotated?t.isInner?"1.2em":-25-this.getMaxTickWidth("x"):t.isInner?"-0.5em":n.axis_x_height?n.axis_x_height-10:"3em"};u.prototype.dyForYAxisLabel=function(){var n=this.owner,t=this.getYAxisLabelPosition();return n.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(n.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};u.prototype.dyForY2AxisLabel=function(){var n=this.owner,t=this.getY2AxisLabelPosition();return n.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(n.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};u.prototype.textAnchorForXAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(!n.config.axis_rotated,this.getXAxisLabelPosition())};u.prototype.textAnchorForYAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getYAxisLabelPosition())};u.prototype.textAnchorForY2AxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getY2AxisLabelPosition())};u.prototype.getMaxTickWidth=function(n,t){var u,r,f,o,s,i=this.owner,h=i.config,e=0;return t&&i.currentMaxTickWidths[n]?i.currentMaxTickWidths[n]:(i.svg&&(u=i.filterTargetsToShow(i.data.targets),"y"===n?(r=i.y.copy().domain(i.getYDomain(u,"y")),f=this.getYAxis(r,i.yOrient,h.axis_y_tick_format,i.yAxisTickValues,!1,!0)):"y2"===n?(r=i.y2.copy().domain(i.getYDomain(u,"y2")),f=this.getYAxis(r,i.y2Orient,h.axis_y2_tick_format,i.y2AxisTickValues,!1,!0)):(r=i.x.copy().domain(i.getXDomain(u)),f=this.getXAxis(r,i.xOrient,i.xAxisTickFormat,i.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(u,f)),o=i.d3.select("body").append("div").classed("c3",!0),s=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s.append("g").call(f).each(function(){i.d3.select(this).selectAll("text").each(function(){var n=this.getBoundingClientRect();e<n.width&&(e=n.width)});o.remove()})),i.currentMaxTickWidths[n]=0>=e?i.currentMaxTickWidths[n]:e,i.currentMaxTickWidths[n])};u.prototype.updateLabels=function(n){var t=this.owner,r=t.main.select("."+i.axisX+" ."+i.axisXLabel),u=t.main.select("."+i.axisY+" ."+i.axisYLabel),f=t.main.select("."+i.axisY2+" ."+i.axisY2Label);(n?r.transition():r).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(n?u.transition():u).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(n?f.transition():f).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};u.prototype.getPadding=function(n,t,i,r){var u="number"==typeof n?n:n[t];return f(u)?"ratio"===n.unit?n[t]*r:this.convertPixelsToAxisPadding(u,r):i};u.prototype.convertPixelsToAxisPadding=function(n,t){var i=this.owner,r=i.config.axis_rotated?i.width:i.height;return t*(n/r)};u.prototype.generateTickValues=function(n,t,i){var u,f,o,s,c,e,h,r=n;if(t)if(u=a(t)?t():t,1===u)r=[n[0]];else if(2===u)r=[n[0],n[n.length-1]];else if(u>2){for(s=u-2,f=n[0],o=n[n.length-1],c=(o-f)/(s+1),r=[f],e=0;s>e;e++)h=+f+c*(e+1),r.push(i?new Date(h):h);r.push(o)}return i||(r=r.sort(function(n,t){return n-t})),r};u.prototype.generateTransitions=function(n){var i=this.owner,t=i.axes;return{axisX:n?t.x.transition().duration(n):t.x,axisY:n?t.y.transition().duration(n):t.y,axisY2:n?t.y2.transition().duration(n):t.y2,axisSubX:n?t.subx.transition().duration(n):t.subx}};u.prototype.redraw=function(n,t){var i=this.owner;i.axes.x.style("opacity",t?0:1);i.axes.y.style("opacity",t?0:1);i.axes.y2.style("opacity",t?0:1);i.axes.subx.style("opacity",t?0:1);n.axisX.call(i.xAxis);n.axisY.call(i.yAxis);n.axisY2.call(i.y2Axis);n.axisSubX.call(i.subXAxis)};t.getClipPath=function(t){var i=n.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(i?"":document.URL.split("#")[0])+"#"+t+")"};t.appendClip=function(n,t){return n.append("clipPath").attr("id",t).append("rect")};t.getAxisClipX=function(n){var t=Math.max(30,this.margin.left);return n?-(1+t):-(t-1)};t.getAxisClipY=function(n){return n?-20:-this.margin.top};t.getXAxisClipX=function(){var n=this;return n.getAxisClipX(!n.config.axis_rotated)};t.getXAxisClipY=function(){var n=this;return n.getAxisClipY(!n.config.axis_rotated)};t.getYAxisClipX=function(){var n=this;return n.config.axis_y_inner?-1:n.getAxisClipX(n.config.axis_rotated)};t.getYAxisClipY=function(){var n=this;return n.getAxisClipY(n.config.axis_rotated)};t.getAxisClipWidth=function(n){var t=this,i=Math.max(30,t.margin.left),r=Math.max(30,t.margin.right);return n?t.width+2+i+r:t.margin.left+20};t.getAxisClipHeight=function(n){return(n?this.margin.bottom:this.margin.top+this.height)+20};t.getXAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(!n.config.axis_rotated)};t.getXAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(!n.config.axis_rotated)};t.getYAxisClipWidth=function(){var n=this;return n.getAxisClipWidth(n.config.axis_rotated)+(n.config.axis_y_inner?20:0)};t.getYAxisClipHeight=function(){var n=this;return n.getAxisClipHeight(n.config.axis_rotated)};t.initPie=function(){var n=this,t=n.d3,i=n.config;n.pie=t.layout.pie().value(function(n){return n.values.reduce(function(n,t){return n+t.value},0)});i.data_order||n.pie.sort(null)};t.updateRadius=function(){var n=this,t=n.config,i=t.gauge_width||t.donut_width;n.radiusExpanded=Math.min(n.arcWidth,n.arcHeight)/2;n.radius=.95*n.radiusExpanded;n.innerRadiusRatio=i?(n.radius-i)/n.radius:.6;n.innerRadius=n.hasType("donut")||n.hasType("gauge")?n.radius*n.innerRadiusRatio:0};t.updateArc=function(){var n=this;n.svgArc=n.getSvgArc();n.svgArcExpanded=n.getSvgArcExpanded();n.svgArcExpandedSub=n.getSvgArcExpanded(.98)};t.updateAngle=function(n){var t,r,e,o,i=this,u=i.config,f=!1,s=0;return u?(i.pie(i.filterTargetsToShow(i.data.targets)).forEach(function(t){f||t.data.id!==n.data.id||(f=!0,n=t,n.index=s);s++}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),i.isGaugeType(n.data)&&(t=u.gauge_min,r=u.gauge_max,e=Math.PI/(r-t),o=n.value<t?0:n.value<r?n.value-t:r-t,n.startAngle=Math.PI/-2,n.endAngle=n.startAngle+e*o),f?n:null):null};t.getSvgArc=function(){var n=this,t=n.d3.svg.arc().outerRadius(n.radius).innerRadius(n.innerRadius),i=function(i,r){var u;return r?t(i):(u=n.updateAngle(i),u?t(u):"M 0 0")};return i.centroid=t.centroid,i};t.getSvgArcExpanded=function(n){var t=this,i=t.d3.svg.arc().outerRadius(t.radiusExpanded*(n?n:1)).innerRadius(t.innerRadius);return function(n){var r=t.updateAngle(n);return r?i(r):"M 0 0"}};t.getArc=function(n,t,i){return i||this.isArcType(n.data)?this.svgArc(n,t):"M 0 0"};t.transformForArcLabel=function(n){var i,r,u,f,e,t=this,o=t.updateAngle(n),s="";return o&&!t.hasType("gauge")&&(i=this.svgArc.centroid(o),r=isNaN(i[0])?0:i[0],u=isNaN(i[1])?0:i[1],f=Math.sqrt(r*r+u*u),e=t.radius&&f?(36/t.radius>.375?1.175-36/t.radius:.8)*t.radius/f:0,s="translate("+r*e+","+u*e+")"),s};t.getArcRatio=function(n){var t=this,i=t.hasType("gauge")?Math.PI:2*Math.PI;return n?(n.endAngle-n.startAngle)/i:null};t.convertToArcData=function(n){return this.addName({id:n.data.id,value:n.value,ratio:this.getArcRatio(n),index:n.index})};t.textForArcLabel=function(n){var i,u,r,e,f,t=this;return t.shouldShowArcLabel()?(i=t.updateAngle(n),u=i?i.value:null,r=t.getArcRatio(i),e=n.data.id,t.hasType("gauge")||t.meetsArcLabelThreshold(r)?(f=t.getArcLabelFormat(),f?f(u,r,e):t.defaultArcValueFormat(u,r)):""):""};t.expandArc=function(t){var u,r=this;return r.transiting?void(u=n.setInterval(function(){r.transiting||(n.clearInterval(u),r.legend.selectAll(".c3-legend-item-focused").size()>0&&r.expandArc(t))},10)):(t=r.mapToTargetIds(t),void r.svg.selectAll(r.selectorTargets(t,"."+i.chartArc)).each(function(n){r.shouldExpand(n.data.id)&&r.d3.select(this).selectAll("path").transition().duration(r.expandDuration(n.data.id)).attr("d",r.svgArcExpanded).transition().duration(2*r.expandDuration(n.data.id)).attr("d",r.svgArcExpandedSub).each(function(n){r.isDonutType(n.data)})}))};t.unexpandArc=function(n){var t=this;t.transiting||(n=t.mapToTargetIds(n),t.svg.selectAll(t.selectorTargets(n,"."+i.chartArc)).selectAll("path").transition().duration(function(n){return t.expandDuration(n.data.id)}).attr("d",t.svgArc),t.svg.selectAll("."+i.arc).style("opacity",1))};t.expandDuration=function(n){var t=this,i=t.config;return t.isDonutType(n)?i.donut_expand_duration:t.isGaugeType(n)?i.gauge_expand_duration:t.isPieType(n)?i.pie_expand_duration:50};t.shouldExpand=function(n){var t=this,i=t.config;return t.isDonutType(n)&&i.donut_expand||t.isGaugeType(n)&&i.gauge_expand||t.isPieType(n)&&i.pie_expand};t.shouldShowArcLabel=function(){var n=this,i=n.config,t=!0;return n.hasType("donut")?t=i.donut_label_show:n.hasType("pie")&&(t=i.pie_label_show),t};t.meetsArcLabelThreshold=function(n){var t=this,i=t.config,r=t.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold;return n>=r};t.getArcLabelFormat=function(){var n=this,t=n.config,i=t.pie_label_format;return n.hasType("gauge")?i=t.gauge_label_format:n.hasType("donut")&&(i=t.donut_label_format),i};t.getArcTitle=function(){var n=this;return n.hasType("donut")?n.config.donut_title:""};t.updateTargetsForArc=function(n){var u,r,t=this,e=t.main,f=t.classChartArc.bind(t),o=t.classArcs.bind(t),s=t.classFocus.bind(t);u=e.select("."+i.chartArcs).selectAll("."+i.chartArc).data(t.pie(n)).attr("class",function(n){return f(n)+s(n.data)});r=u.enter().append("g").attr("class",f);r.append("g").attr("class",o);r.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};t.initArc=function(){var n=this;n.arcs=n.main.select("."+i.chart).append("g").attr("class",i.chartArcs).attr("transform",n.getTranslate("arc"));n.arcs.append("text").attr("class",i.chartArcsTitle).style("text-anchor","middle").text(n.getArcTitle())};t.redrawArc=function(n,t,r){var e,u=this,s=u.d3,f=u.config,o=u.main;e=o.selectAll("."+i.arcs).selectAll("."+i.arc).data(u.arcData.bind(u));e.enter().append("path").attr("class",u.classArc.bind(u)).style("fill",function(n){return u.color(n.data)}).style("cursor",function(n){return f.interaction_enabled&&f.data_selection_isselectable(n)?"pointer":null}).style("opacity",0).each(function(n){u.isGaugeType(n.data)&&(n.startAngle=n.endAngle=Math.PI/-2);this._current=n});e.attr("transform",function(n){return!u.isGaugeType(n.data)&&r?"scale(0)":""}).style("opacity",function(n){return n===this._current?0:1}).on("mouseover",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),t&&(i=u.convertToArcData(t),u.expandArc(t.data.id),u.api.focus(t.data.id),u.toggleFocusLegend(t.data.id,!0),u.config.data_onmouseover(i,this)))}:null).on("mousemove",f.interaction_enabled?function(n){var t,i,r=u.updateAngle(n);r&&(t=u.convertToArcData(r),i=[t],u.showTooltip(i,this))}:null).on("mouseout",f.interaction_enabled?function(n){var t,i;u.transiting||(t=u.updateAngle(n),t&&(i=u.convertToArcData(t),u.unexpandArc(t.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(i,this)))}:null).on("click",f.interaction_enabled?function(n,t){var i,r=u.updateAngle(n);r&&(i=u.convertToArcData(r),u.toggleShape&&u.toggleShape(this,i,t),u.config.data_onclick.call(u.api,i,this))}:null).each(function(){u.transiting=!0}).transition().duration(n).attrTween("d",function(n){var t,i=u.updateAngle(n);return i?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=s.interpolate(this._current,i),this._current=t(0),function(i){var r=t(i);return r.data=n.data,u.getArc(r,!0)}):function(){return"M 0 0"}}).attr("transform",r?"scale(1)":"").style("fill",function(n){return u.levelColor?u.levelColor(n.data.values[0].value):u.color(n.data.id)}).style("opacity",1).call(u.endall,function(){u.transiting=!1});e.exit().transition().duration(t).style("opacity",0).remove();o.selectAll("."+i.chartArc).select("text").style("opacity",0).attr("class",function(n){return u.isGaugeType(n.data)?i.gaugeValue:""}).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",function(n){return u.isGaugeType(n.data)?Math.round(u.radius/5)+"px":""}).transition().duration(n).style("opacity",function(n){return u.isTargetToShow(n.data.id)&&u.isArcType(n.data)?1:0});o.select("."+i.chartArcsTitle).style("opacity",u.hasType("donut")||u.hasType("gauge")?1:0);u.hasType("gauge")&&(u.arcs.select("."+i.chartArcsBackground).attr("d",function(){var n={data:[{value:f.gauge_max}],startAngle:Math.PI/-2,endAngle:Math.PI/2};return u.getArc(n,!0,!0)}),u.arcs.select("."+i.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?f.gauge_units:""),u.arcs.select("."+i.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/2)+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_min:""),u.arcs.select("."+i.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/2+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_max:""))};t.initGauge=function(){var n=this.arcs;this.hasType("gauge")&&(n.append("path").attr("class",i.chartArcsBackground),n.append("text").attr("class",i.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),n.append("text").attr("class",i.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};t.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};t.initRegion=function(){var n=this;n.region=n.main.append("g").attr("clip-path",n.clipPath).attr("class",i.regions)};t.updateRegion=function(n){var t=this,r=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible");t.mainRegion=t.main.select("."+i.regions).selectAll("."+i.region).data(r.regions);t.mainRegion.enter().append("g").attr("class",t.classRegion.bind(t)).append("rect").style("fill-opacity",0);t.mainRegion.exit().transition().duration(n).style("opacity",0).remove()};t.redrawRegion=function(n){var t=this,i=t.mainRegion.selectAll("rect"),r=t.regionX.bind(t),u=t.regionY.bind(t),e=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(n?i.transition():i).attr("x",r).attr("y",u).attr("width",e).attr("height",o).style("fill-opacity",function(n){return f(n.opacity)?n.opacity:.1})]};t.regionX=function(n){var t=this,i=t.config,r="y"===n.axis?t.y:t.y2;return"y"===n.axis||"y2"===n.axis?i.axis_rotated&&"start"in n?r(n.start):0:i.axis_rotated?0:"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0};t.regionY=function(n){var t=this,i=t.config,r="y"===n.axis?t.y:t.y2;return"y"===n.axis||"y2"===n.axis?i.axis_rotated?0:"end"in n?r(n.end):0:i.axis_rotated&&"start"in n?t.x(t.isTimeSeries()?t.parseDate(n.start):n.start):0};t.regionWidth=function(n){var i,t=this,r=t.config,u=t.regionX(n),f="y"===n.axis?t.y:t.y2;return i="y"===n.axis||"y2"===n.axis?r.axis_rotated&&"end"in n?f(n.end):t.width:r.axis_rotated?t.width:"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.width,u>i?0:i-u};t.regionHeight=function(n){var i,t=this,r=t.config,u=this.regionY(n),f="y"===n.axis?t.y:t.y2;return i="y"===n.axis||"y2"===n.axis?r.axis_rotated?t.height:"start"in n?f(n.start):t.height:r.axis_rotated&&"end"in n?t.x(t.isTimeSeries()?t.parseDate(n.end):n.end):t.height,u>i?0:i-u};t.isRegionOnX=function(n){return!n.axis||"x"===n.axis};t.drag=function(n){var s,h,c,l,u,e,f,o,t=this,r=t.config,a=t.main,v=t.d3;t.hasArcType()||r.data_selection_enabled&&(!r.zoom_enabled||t.zoom.altDomain)&&r.data_selection_multiple&&(s=t.dragStart[0],h=t.dragStart[1],c=n[0],l=n[1],u=Math.min(s,c),e=Math.max(s,c),f=r.data_selection_grouped?t.margin.top:Math.min(h,l),o=r.data_selection_grouped?t.height:Math.max(h,l),a.select("."+i.dragarea).attr("x",u).attr("y",f).attr("width",e-u).attr("height",o-f),a.selectAll("."+i.shapes).selectAll("."+i.shape).filter(function(n){return r.data_selection_isselectable(n)}).each(function(n,r){var h,c,p,w,a,l,s=v.select(this),b=s.classed(i.SELECTED),k=s.classed(i.INCLUDED),y=!1;if(s.classed(i.circle))h=1*s.attr("cx"),c=1*s.attr("cy"),a=t.togglePoint,y=h>u&&e>h&&c>f&&o>c;else{if(!s.classed(i.bar))return;l=ut(this);h=l.x;c=l.y;p=l.width;w=l.height;a=t.togglePath;y=!(h>e||u>h+p||c>o||f>c+w)}y^k&&(s.classed(i.INCLUDED,!k),s.classed(i.SELECTED,!b),a.call(t,!b,s,n,r))}))};t.dragstart=function(n){var t=this,r=t.config;t.hasArcType()||r.data_selection_enabled&&(t.dragStart=n,t.main.select("."+i.chart).append("rect").attr("class",i.dragarea).style("opacity",.1),t.dragging=!0)};t.dragend=function(){var n=this,t=n.config;n.hasArcType()||t.data_selection_enabled&&(n.main.select("."+i.dragarea).transition().duration(100).style("opacity",0).remove(),n.main.selectAll("."+i.shape).classed(i.INCLUDED,!1),n.dragging=!1)};t.selectPoint=function(n,t,r){var u=this,f=u.config,e=(f.axis_rotated?u.circleY:u.circleX).bind(u),o=(f.axis_rotated?u.circleX:u.circleY).bind(u),s=u.pointSelectR.bind(u);f.data_onselected.call(u.api,t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).data([t]).enter().append("circle").attr("class",function(){return u.generateClass(i.selectedCircle,r)}).attr("cx",e).attr("cy",o).attr("stroke",function(){return u.color(t)}).attr("r",function(n){return 1.4*u.pointSelectR(n)}).transition().duration(100).attr("r",s)};t.unselectPoint=function(n,t,r){var u=this;u.config.data_onunselected.call(u.api,t,n.node());u.main.select("."+i.selectedCircles+u.getTargetSelectorSuffix(t.id)).selectAll("."+i.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()};t.togglePoint=function(n,t,i,r){n?this.selectPoint(t,i,r):this.unselectPoint(t,i,r)};t.selectPath=function(n,t){var i=this;i.config.data_onselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(t)).brighter(.75)})};t.unselectPath=function(n,t){var i=this;i.config.data_onunselected.call(i,t,n.node());n.transition().duration(100).style("fill",function(){return i.color(t)})};t.togglePath=function(n,t,i,r){n?this.selectPath(t,i,r):this.unselectPath(t,i,r)};t.getToggle=function(n,t){var i,r=this;return"circle"===n.nodeName?i=r.isStepType(t)?function(){}:r.togglePoint:"path"===n.nodeName&&(i=r.togglePath),i};t.toggleShape=function(n,t,r){var u=this,o=u.d3,f=u.config,e=o.select(n),s=e.classed(i.SELECTED),h=u.getToggle(n,t).bind(u);f.data_selection_enabled&&f.data_selection_isselectable(t)&&(f.data_selection_multiple||u.main.selectAll("."+i.shapes+(f.data_selection_grouped?u.getTargetSelectorSuffix(t.id):"")).selectAll("."+i.shape).each(function(n,t){var r=o.select(this);r.classed(i.SELECTED)&&h(!1,r.classed(i.SELECTED,!1),n,t)}),e.classed(i.SELECTED,!s),h(!s,e,t,r))};t.initBrush=function(){var n=this,t=n.d3;n.brush=t.svg.brush().on("brush",function(){n.redrawForBrush()});n.brush.update=function(){return n.context&&n.context.select("."+i.brush).call(this),this};n.brush.scale=function(t){return n.config.axis_rotated?this.y(t):this.x(t)}};t.initSubchart=function(){var n=this,r=n.config,t=n.context=n.svg.append("g").attr("transform",n.getTranslate("context")),u=r.subchart_show?"visible":"hidden";t.style("visibility",u);t.append("g").attr("clip-path",n.clipPathForSubchart).attr("class",i.chart);t.select("."+i.chart).append("g").attr("class",i.chartBars);t.select("."+i.chart).append("g").attr("class",i.chartLines);t.append("g").attr("clip-path",n.clipPath).attr("class",i.brush).call(n.brush);n.axes.subx=t.append("g").attr("class",i.axisX).attr("transform",n.getTranslate("subx")).attr("clip-path",r.axis_rotated?"":n.clipPathForXAxis).style("visibility",r.subchart_axis_x_show?u:"hidden")};t.updateTargetsForSubchart=function(n){var r,e,o,s,t=this,u=t.context,f=t.config,h=t.classChartBar.bind(t),l=t.classBars.bind(t),c=t.classChartLine.bind(t),a=t.classLines.bind(t),v=t.classAreas.bind(t);f.subchart_show&&(s=u.select("."+i.chartBars).selectAll("."+i.chartBar).data(n).attr("class",h),o=s.enter().append("g").style("opacity",0).attr("class",h),o.append("g").attr("class",l),e=u.select("."+i.chartLines).selectAll("."+i.chartLine).data(n).attr("class",c),r=e.enter().append("g").style("opacity",0).attr("class",c),r.append("g").attr("class",a),r.append("g").attr("class",v),u.selectAll("."+i.brush+" rect").attr(f.axis_rotated?"width":"height",f.axis_rotated?t.width2:t.height2))};t.updateBarForSubchart=function(n){var t=this;t.contextBar=t.context.selectAll("."+i.bars).selectAll("."+i.bar).data(t.barData.bind(t));t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color);t.contextBar.style("opacity",t.initialOpacity.bind(t));t.contextBar.exit().transition().duration(n).style("opacity",0).remove()};t.redrawBarForSubchart=function(n,t,i){(t?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",n).style("opacity",1)};t.updateLineForSubchart=function(n){var t=this;t.contextLine=t.context.selectAll("."+i.lines).selectAll("."+i.line).data(t.lineData.bind(t));t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color);t.contextLine.style("opacity",t.initialOpacity.bind(t));t.contextLine.exit().transition().duration(n).style("opacity",0).remove()};t.redrawLineForSubchart=function(n,t,i){(t?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",n).style("opacity",1)};t.updateAreaForSubchart=function(n){var t=this,r=t.d3;t.contextArea=t.context.selectAll("."+i.areas).selectAll("."+i.area).data(t.lineData.bind(t));t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+r.select(this).style("opacity"),0});t.contextArea.style("opacity",0);t.contextArea.exit().transition().duration(n).style("opacity",0).remove()};t.redrawAreaForSubchart=function(n,t,i){(t?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",n).style("fill",this.color).style("opacity",this.orgAreaOpacity)};t.redrawSubchart=function(n,t,i,r,u,f,e){var s,h,c,o=this,l=o.d3,a=o.config;o.context.style("visibility",a.subchart_show?"visible":"hidden");a.subchart_show&&(l.event&&"zoom"===l.event.type&&o.brush.extent(o.x.orgDomain()).update(),n&&(o.brush.empty()||o.brush.extent(o.x.orgDomain()).update(),s=o.generateDrawArea(u,!0),h=o.generateDrawBar(f,!0),c=o.generateDrawLine(e,!0),o.updateBarForSubchart(i),o.updateLineForSubchart(i),o.updateAreaForSubchart(i),o.redrawBarForSubchart(h,i,i),o.redrawLineForSubchart(c,i,i),o.redrawAreaForSubchart(s,i,i)))};t.redrawForBrush=function(){var n=this,t=n.x;n.redraw({withTransition:!1,withY:n.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});n.config.subchart_onbrush.call(n.api,t.orgDomain())};t.transformContext=function(n,t){var r,u=this;t&&t.axisSubX?r=t.axisSubX:(r=u.context.select("."+i.axisX),n&&(r=r.transition()));u.context.attr("transform",u.getTranslate("context"));r.attr("transform",u.getTranslate("subx"))};t.getDefaultExtent=function(){var n=this,i=n.config,t=a(i.axis_x_extent)?i.axis_x_extent(n.getXDomain(n.data.targets)):i.axis_x_extent;return n.isTimeSeries()&&(t=[n.parseDate(t[0]),n.parseDate(t[1])]),t};t.initZoom=function(){var r,n=this,t=n.d3,i=n.config;n.zoom=t.behavior.zoom().on("zoomstart",function(){r=t.event.sourceEvent;n.zoom.altDomain=t.event.sourceEvent.altKey?n.x.orgDomain():null;i.zoom_onzoomstart.call(n.api,t.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var u=t.event.sourceEvent;u&&r.clientX===u.clientX&&r.clientY===u.clientY||(n.redrawEventRect(),n.updateZoom(),i.zoom_onzoomend.call(n.api,n.x.orgDomain()))});n.zoom.scale=function(n){return i.axis_rotated?this.y(n):this.x(n)};n.zoom.orgScaleExtent=function(){var t=i.zoom_extent?i.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]};n.zoom.updateScaleExtent=function(){var t=v(n.x.orgDomain())/v(n.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*t,i[1]*t]),this}};t.getZoomDomain=function(){var n=this,t=n.config,i=n.d3,r=i.min([n.orgXDomain[0],t.zoom_x_min]),u=i.max([n.orgXDomain[1],t.zoom_x_max]);return[r,u]};t.updateZoom=function(){var n=this,t=n.config.zoom_enabled?n.zoom:function(){};n.main.select("."+i.zoomRect).call(t).on("dblclick.zoom",null);n.main.selectAll("."+i.eventRect).call(t).on("dblclick.zoom",null)};t.redrawForZoom=function(){var n=this,u=n.d3,i=n.config,r=n.zoom,t=n.x;if(i.zoom_enabled&&0!==n.filterTargetsToShow(n.data.targets).length){if("mousemove"===u.event.sourceEvent.type&&r.altDomain)return t.domain(r.altDomain),void r.scale(t).updateScaleExtent();n.isCategorized()&&t.orgDomain()[0]===n.orgXDomain[0]&&t.domain([n.orgXDomain[0]-1e-10,t.orgDomain()[1]]);n.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1});"mousemove"===u.event.sourceEvent.type&&(n.cancelClick=!0);i.zoom_onzoom.call(n.api,t.orgDomain())}};t.generateColor=function(){var r=this,t=r.config,e=r.d3,n=t.data_colors,u=h(t.color_pattern)?t.color_pattern:e.scale.category10().range(),f=t.data_color,i=[];return function(t){var e,r=t.id||t.data&&t.data.id||t;return n[r]instanceof Function?e=n[r](t):n[r]?e=n[r]:(i.indexOf(r)<0&&i.push(r),e=u[i.indexOf(r)%u.length],n[r]=e),f instanceof Function?f(e,t):e}};t.generateLevelColor=function(){var u=this,t=u.config,i=t.color_pattern,n=t.color_threshold,f="value"===n.unit,r=n.values&&n.values.length?n.values:[],e=n.max||100;return h(t.color_threshold)?function(n){for(var u,o=i[i.length-1],t=0;t<r.length;t++)if(u=f?n:100*n/e,u<r[t]){o=i[t];break}return o}:null};t.getYFormat=function(n){var t=this,i=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,r=n&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(n,u,f){var e="y2"===t.axis.getId(f)?r:i;return e.call(t,n,u)}};t.yFormat=function(n){var t=this,i=t.config,r=i.axis_y_tick_format?i.axis_y_tick_format:t.defaultValueFormat;return r(n)};t.y2Format=function(n){var t=this,i=t.config,r=i.axis_y2_tick_format?i.axis_y2_tick_format:t.defaultValueFormat;return r(n)};t.defaultValueFormat=function(n){return f(n)?+n:""};t.defaultArcValueFormat=function(n,t){return(100*t).toFixed(1)+"%"};t.dataLabelFormat=function(n){var r=this,t=r.config.data_labels,i=function(n){return f(n)?+n:""};return"function"==typeof t.format?t.format:"object"==typeof t.format?t.format[n]?t.format[n]===!0?i:t.format[n]:function(){return""}:i};t.hasCaches=function(n){for(var t=0;t<n.length;t++)if(!(n[t]in this.cache))return!1;return!0};t.addCache=function(n,t){this.cache[n]=this.cloneTarget(t)};t.getCaches=function(n){for(var i=[],t=0;t<n.length;t++)n[t]in this.cache&&i.push(this.cloneTarget(this.cache[n[t]]));return i};i=t.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};t.generateClass=function(n,t){return" "+n+" "+n+this.getTargetSelectorSuffix(t)};t.classText=function(n){return this.generateClass(i.text,n.index)};t.classTexts=function(n){return this.generateClass(i.texts,n.id)};t.classShape=function(n){return this.generateClass(i.shape,n.index)};t.classShapes=function(n){return this.generateClass(i.shapes,n.id)};t.classLine=function(n){return this.classShape(n)+this.generateClass(i.line,n.id)};t.classLines=function(n){return this.classShapes(n)+this.generateClass(i.lines,n.id)};t.classCircle=function(n){return this.classShape(n)+this.generateClass(i.circle,n.index)};t.classCircles=function(n){return this.classShapes(n)+this.generateClass(i.circles,n.id)};t.classBar=function(n){return this.classShape(n)+this.generateClass(i.bar,n.index)};t.classBars=function(n){return this.classShapes(n)+this.generateClass(i.bars,n.id)};t.classArc=function(n){return this.classShape(n.data)+this.generateClass(i.arc,n.data.id)};t.classArcs=function(n){return this.classShapes(n.data)+this.generateClass(i.arcs,n.data.id)};t.classArea=function(n){return this.classShape(n)+this.generateClass(i.area,n.id)};t.classAreas=function(n){return this.classShapes(n)+this.generateClass(i.areas,n.id)};t.classRegion=function(n,t){return this.generateClass(i.region,t)+" "+("class"in n?n["class"]:"")};t.classEvent=function(n){return this.generateClass(i.eventRect,n.index)};t.classTarget=function(n){var t=this,r=t.config.data_classes[n],u="";return r&&(u=" "+i.target+"-"+r),t.generateClass(i.target,n)+u};t.classFocus=function(n){return this.classFocused(n)+this.classDefocused(n)};t.classFocused=function(n){return" "+(this.focusedTargetIds.indexOf(n.id)>=0?i.focused:"")};t.classDefocused=function(n){return" "+(this.defocusedTargetIds.indexOf(n.id)>=0?i.defocused:"")};t.classChartText=function(n){return i.chartText+this.classTarget(n.id)};t.classChartLine=function(n){return i.chartLine+this.classTarget(n.id)};t.classChartBar=function(n){return i.chartBar+this.classTarget(n.id)};t.classChartArc=function(n){return i.chartArc+this.classTarget(n.data.id)};t.getTargetSelectorSuffix=function(n){return n||0===n?("-"+n).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};t.selectorTarget=function(n,t){return(t||"")+"."+i.target+this.getTargetSelectorSuffix(n)};t.selectorTargets=function(n,t){var i=this;return n=n||[],n.length?n.map(function(n){return i.selectorTarget(n,t)}):null};t.selectorLegend=function(n){return"."+i.legendItem+this.getTargetSelectorSuffix(n)};t.selectorLegends=function(n){var t=this;return n&&n.length?n.map(function(n){return t.selectorLegend(n)}):null};var f=t.isValue=function(n){return n||0===n},a=t.isFunction=function(n){return"function"==typeof n},s=t.isString=function(n){return"string"==typeof n},c=t.isUndefined=function(n){return"undefined"==typeof n},o=t.isDefined=function(n){return"undefined"!=typeof n},p=t.ceil10=function(n){return 10*Math.ceil(n/10)},y=t.asHalfPixel=function(n){return Math.ceil(n)+.5},v=t.diffDomain=function(n){return n[1]-n[0]},nt=t.isEmpty=function(n){return"undefined"==typeof n||null===n||s(n)&&0===n.length||"object"==typeof n&&0===Object.keys(n).length},h=t.notEmpty=function(n){return!t.isEmpty(n)},e=t.getOption=function(n,t,i){return o(n[t])?n[t]:i},rt=t.hasValue=function(n,t){var i=!1;return Object.keys(n).forEach(function(r){n[r]===t&&(i=!0)}),i},ut=t.getPathBox=function(n){var i=n.getBoundingClientRect(),t=[n.pathSegList.getItem(0),n.pathSegList.getItem(1)],r=t[0].x,u=Math.min(t[0].y,t[1].y);return{x:r,y:u,width:i.width,height:i.height}};r.focus=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));this.revert();this.defocus();r.classed(i.focused,!0).classed(i.defocused,!1);t.hasArcType()&&t.expandArc(n);t.toggleFocusLegend(n,!0);t.focusedTargetIds=n;t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return n.indexOf(t)<0})};r.defocus=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n.filter(t.isTargetToShow,t)));r.classed(i.focused,!1).classed(i.defocused,!0);t.hasArcType()&&t.unexpandArc(n);t.toggleFocusLegend(n,!1);t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return n.indexOf(t)<0});t.defocusedTargetIds=n};r.revert=function(n){var r,t=this.internal;n=t.mapToTargetIds(n);r=t.svg.selectAll(t.selectorTargets(n));r.classed(i.focused,!1).classed(i.defocused,!1);t.hasArcType()&&t.unexpandArc(n);t.config.legend_show&&(t.showLegend(n.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(n)).filter(function(){return t.d3.select(this).classed(i.legendItemFocused)}).classed(i.legendItemFocused,!1));t.focusedTargetIds=[];t.defocusedTargetIds=[]};r.show=function(n,t){var r,i=this.internal;n=i.mapToTargetIds(n);t=t||{};i.removeHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",1,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",1)});t.withLegend&&i.showLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.hide=function(n,t){var r,i=this.internal;n=i.mapToTargetIds(n);t=t||{};i.addHiddenTargetIds(n);r=i.svg.selectAll(i.selectorTargets(n));r.transition().style("opacity",0,"important").call(i.endall,function(){r.style("opacity",null).style("opacity",0)});t.withLegend&&i.hideLegend(n);i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};r.toggle=function(n,t){var i=this,r=this.internal;r.mapToTargetIds(n).forEach(function(n){r.isTargetToShow(n)?i.hide(n,t):i.show(n,t)})};r.zoom=function(n){var t=this.internal;return n&&(t.isTimeSeries()&&(n=n.map(function(n){return t.parseDate(n)})),t.brush.extent(n),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()};r.zoom.enable=function(n){var t=this.internal;t.config.zoom_enabled=n;t.updateAndRedraw()};r.unzoom=function(){var n=this.internal;n.brush.clear().update();n.redraw({withUpdateXDomain:!0})};r.zoom.max=function(n){var t=this.internal,i=t.config,r=t.d3;return 0===n||n?void(i.zoom_x_max=r.max([t.orgXDomain[1],n])):i.zoom_x_max};r.zoom.min=function(n){var t=this.internal,i=t.config,r=t.d3;return 0===n||n?void(i.zoom_x_min=r.min([t.orgXDomain[0],n])):i.zoom_x_min};r.zoom.range=function(n){return arguments.length?(o(n.max)&&this.domain.max(n.max),void(o(n.min)&&this.domain.min(n.min))):{max:this.domain.max(),min:this.domain.min()}};r.load=function(n){var t=this.internal,i=t.config;return n.xs&&t.addXs(n.xs),"classes"in n&&Object.keys(n.classes).forEach(function(t){i.data_classes[t]=n.classes[t]}),"categories"in n&&t.isCategorized()&&(i.axis_x_categories=n.categories),"axes"in n&&Object.keys(n.axes).forEach(function(t){i.data_axes[t]=n.axes[t]}),"colors"in n&&Object.keys(n.colors).forEach(function(t){i.data_colors[t]=n.colors[t]}),"cacheIds"in n&&t.hasCaches(n.cacheIds)?void t.load(t.getCaches(n.cacheIds),n.done):void("unload"in n?t.unload(t.mapToTargetIds("boolean"==typeof n.unload&&n.unload?null:n.unload),function(){t.loadFromArgs(n)}):t.loadFromArgs(n))};r.unload=function(n){var t=this.internal;n=n||{};n instanceof Array?n={ids:n}:"string"==typeof n&&(n={ids:[n]});t.unload(t.mapToTargetIds(n.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});n.done&&n.done()})};r.flow=function(n){var i,c,p,l,e,u,h,y,t=this.internal,v=[],a=t.getMaxDataCount(),s=0,r=0;if(n.json)c=t.convertJsonToData(n.json,n.keys);else if(n.rows)c=t.convertRowsToData(n.rows);else{if(!n.columns)return;c=t.convertColumnsToData(n.columns)}i=t.convertDataToTargets(c,!0);t.data.targets.forEach(function(n){for(var f,e=!1,u=0;u<i.length;u++)if(n.id===i[u].id){for(e=!0,n.values[n.values.length-1]&&(r=n.values[n.values.length-1].index+1),s=i[u].values.length,f=0;s>f;f++)i[u].values[f].index=r+f,t.isTimeSeries()||(i[u].values[f].x=r+f);n.values=n.values.concat(i[u].values);i.splice(u,1);break}e||v.push(n.id)});t.data.targets.forEach(function(n){for(var i,u=0;u<v.length;u++)if(n.id===v[u])for(r=n.values[n.values.length-1].index+1,i=0;s>i;i++)n.values.push({id:n.id,index:r+i,x:t.isTimeSeries()?t.getOtherTargetX(r+i):r+i,value:null})});t.data.targets.length&&i.forEach(function(n){for(var u=[],i=t.data.targets[0].values[0].index;r>i;i++)u.push({id:n.id,index:i,x:t.isTimeSeries()?t.getOtherTargetX(i):i,value:null});n.values.forEach(function(n){n.index+=r;t.isTimeSeries()||(n.x+=r)});n.values=u.concat(n.values)});t.data.targets=t.data.targets.concat(i);p=t.getMaxDataCount();e=t.data.targets[0];u=e.values[0];o(n.to)?(s=0,y=t.isTimeSeries()?t.parseDate(n.to):n.to,e.values.forEach(function(n){n.x<y&&s++})):o(n.length)&&(s=n.length);a?1===a&&t.isTimeSeries()&&(h=(e.values[e.values.length-1].x-u.x)/2,l=[new Date(+u.x-h),new Date(+u.x+h)],t.updateXDomain(null,!0,!0,!1,l)):(h=t.isTimeSeries()?e.values.length>1?e.values[e.values.length-1].x-u.x:u.x-t.getXDomain(t.data.targets)[0]:1,l=[u.x-h,u.x],t.updateXDomain(null,!0,!0,!1,l));t.updateTargets(t.data.targets);t.redraw({flow:{index:u.index,length:s,duration:f(n.duration)?n.duration:t.config.transition_duration,done:n.done,orgDataCount:a},withLegend:!0,withTransition:a>1,withTrimXDomain:!1,withUpdateXAxis:!0})};t.generateFlow=function(n){var t=this,u=t.config,r=t.d3;return function(){var h,e,o,ft=n.targets,s=n.flow,et=n.drawBar,ot=n.drawLine,st=n.drawArea,ht=n.cx,ct=n.cy,b=n.xv,lt=n.xForText,at=n.yForText,vt=n.duration,d=1,c=s.index,l=s.length,a=t.getValueOnIndex(t.data.targets[0].values,c),y=t.getValueOnIndex(t.data.targets[0].values,c+l),p=t.x.domain(),yt=s.duration||vt,pt=s.done||function(){},f=t.generateWait(),g=t.xgrid||r.selectAll([]),w=t.xgridLines||r.selectAll([]),k=t.mainRegion||r.selectAll([]),nt=t.mainText||r.selectAll([]),tt=t.mainBar||r.selectAll([]),it=t.mainLine||r.selectAll([]),rt=t.mainArea||r.selectAll([]),ut=t.mainCircle||r.selectAll([]);t.flowing=!0;t.data.targets.forEach(function(n){n.values.splice(0,l)});o=t.updateXDomain(ft,!0,!0);t.updateXGrid&&t.updateXGrid(!0);s.orgDataCount?h=1===s.orgDataCount||a.x===y.x?t.x(p[0])-t.x(o[0]):t.isTimeSeries()?t.x(p[0])-t.x(o[0]):t.x(a.x)-t.x(y.x):1!==t.data.targets[0].values.length?h=t.x(p[0])-t.x(o[0]):t.isTimeSeries()?(a=t.getValueOnIndex(t.data.targets[0].values,0),y=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),h=t.x(a.x)-t.x(y.x)):h=v(o)/2;d=v(p)/v(o);e="translate("+h+",0) scale("+d+",1)";t.hideXGridFocus();r.transition().ease("linear").duration(yt).each(function(){f.add(t.axes.x.transition().call(t.xAxis));f.add(tt.transition().attr("transform",e));f.add(it.transition().attr("transform",e));f.add(rt.transition().attr("transform",e));f.add(ut.transition().attr("transform",e));f.add(nt.transition().attr("transform",e));f.add(k.filter(t.isRegionOnX).transition().attr("transform",e));f.add(g.transition().attr("transform",e));f.add(w.transition().attr("transform",e))}).call(f,function(){var n,r=[],f=[],e=[];if(l){for(n=0;l>n;n++)r.push("."+i.shape+"-"+(c+n)),f.push("."+i.text+"-"+(c+n)),e.push("."+i.eventRect+"-"+(c+n));t.svg.selectAll("."+i.shapes).selectAll(r).remove();t.svg.selectAll("."+i.texts).selectAll(f).remove();t.svg.selectAll("."+i.eventRects).selectAll(e).remove();t.svg.select("."+i.xgrid).remove()}g.attr("transform",null).attr(t.xgridAttr);w.attr("transform",null);w.select("line").attr("x1",u.axis_rotated?0:b).attr("x2",u.axis_rotated?t.width:b);w.select("text").attr("x",u.axis_rotated?t.width:0).attr("y",b);tt.attr("transform",null).attr("d",et);it.attr("transform",null).attr("d",ot);rt.attr("transform",null).attr("d",st);ut.attr("transform",null).attr("cx",ht).attr("cy",ct);nt.attr("transform",null).attr("x",lt).attr("y",at).style("fill-opacity",t.opacityForText.bind(t));k.attr("transform",null);k.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t));u.interaction_enabled&&t.redrawEventRect();pt();t.flowing=!1})}};r.selected=function(n){var t=this.internal,r=t.d3;return r.merge(t.main.selectAll("."+i.shapes+t.getTargetSelectorSuffix(n)).selectAll("."+i.shape).filter(function(){return r.select(this).classed(i.SELECTED)}).map(function(n){return n.map(function(n){var t=n.__data__;return t.data?t.data:t})}))};r.select=function(n,t,r){var u=this.internal,e=u.d3,f=u.config;f.data_selection_enabled&&u.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(s,h){var c=e.select(this),v=s.data?s.data.id:s.id,l=u.getToggle(this,s).bind(u),y=f.data_selection_grouped||!n||n.indexOf(v)>=0,p=!t||t.indexOf(h)>=0,a=c.classed(i.SELECTED);c.classed(i.line)||c.classed(i.area)||(y&&p?f.data_selection_isselectable(s)&&!a&&l(!0,c.classed(i.SELECTED,!0),s,h):o(r)&&r&&a&&l(!1,c.classed(i.SELECTED,!1),s,h))})};r.unselect=function(n,t){var r=this.internal,f=r.d3,u=r.config;u.data_selection_enabled&&r.main.selectAll("."+i.shapes).selectAll("."+i.shape).each(function(e,o){var s=f.select(this),h=e.data?e.data.id:e.id,c=r.getToggle(this,e).bind(r),l=u.data_selection_grouped||!n||n.indexOf(h)>=0,a=!t||t.indexOf(o)>=0,v=s.classed(i.SELECTED);s.classed(i.line)||s.classed(i.area)||l&&a&&u.data_selection_isselectable(e)&&v&&c(!1,s.classed(i.SELECTED,!1),e,o)})};r.transform=function(n,t){var i=this.internal,r=["pie","donut"].indexOf(n)>=0?{withTransform:!0}:null;i.transformTo(t,n,r)};t.transformTo=function(n,t,i){var r=this,f=!r.hasArcType(),u=i||{withTransitionForAxis:f};u.withTransitionForTransform=!1;r.transiting=!1;r.setTargetType(n,t);r.updateTargets(r.data.targets);r.updateAndRedraw(u)};r.groups=function(n){var i=this.internal,t=i.config;return c(n)?t.data_groups:(t.data_groups=n,i.redraw(),t.data_groups)};r.xgrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_x_lines=n,i.redrawWithoutRescale(),t.grid_x_lines):t.grid_x_lines};r.xgrids.add=function(n){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(n?n:[]))};r.xgrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!0)};r.ygrids=function(n){var i=this.internal,t=i.config;return n?(t.grid_y_lines=n,i.redrawWithoutRescale(),t.grid_y_lines):t.grid_y_lines};r.ygrids.add=function(n){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(n?n:[]))};r.ygrids.remove=function(n){var t=this.internal;t.removeGridLines(n,!1)};r.regions=function(n){var i=this.internal,t=i.config;return n?(t.regions=n,i.redrawWithoutRescale(),t.regions):t.regions};r.regions.add=function(n){var i=this.internal,t=i.config;return n?(t.regions=t.regions.concat(n),i.redrawWithoutRescale(),t.regions):t.regions};r.regions.remove=function(n){var u,f,e,t=this.internal,r=t.config;return n=n||{},u=t.getOption(n,"duration",r.transition_duration),f=t.getOption(n,"classes",[i.region]),e=t.main.select("."+i.regions).selectAll(f.map(function(n){return"."+n})),(u?e.transition().duration(u):e).style("opacity",0).remove(),r.regions=r.regions.filter(function(n){var t=!1;return n["class"]?(n["class"].split(" ").forEach(function(n){f.indexOf(n)>=0&&(t=!0)}),!t):!0}),r.regions};r.data=function(n){var t=this.internal.data.targets;return"undefined"==typeof n?t:t.filter(function(t){return[].concat(n).indexOf(t.id)>=0})};r.data.shown=function(n){return this.internal.filterTargetsToShow(this.data(n))};r.data.values=function(n){var t,i=null;return n&&(t=this.data(n),i=t[0]?t[0].values.map(function(n){return n.value}):null),i};r.data.names=function(n){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",n)};r.data.colors=function(n){return this.internal.updateDataAttributes("colors",n)};r.data.axes=function(n){return this.internal.updateDataAttributes("axes",n)};r.category=function(n,t){var i=this.internal,r=i.config;return arguments.length>1&&(r.axis_x_categories[n]=t,i.redraw()),r.axis_x_categories[n]};r.categories=function(n){var i=this.internal,t=i.config;return arguments.length?(t.axis_x_categories=n,i.redraw(),t.axis_x_categories):t.axis_x_categories};r.color=function(n){var t=this.internal;return t.color(n)};r.x=function(n){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.xs=function(n){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs};r.axis=function(){};r.axis.labels=function(n){var t=this.internal;arguments.length&&(Object.keys(n).forEach(function(i){t.axis.setLabelText(i,n[i])}),t.axis.updateLabels())};r.axis.max=function(n){var i=this.internal,t=i.config;return arguments.length?("object"==typeof n?(f(n.x)&&(t.axis_x_max=n.x),f(n.y)&&(t.axis_y_max=n.y),f(n.y2)&&(t.axis_y2_max=n.y2)):t.axis_y_max=t.axis_y2_max=n,void i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:t.axis_x_max,y:t.axis_y_max,y2:t.axis_y2_max}};r.axis.min=function(n){var i=this.internal,t=i.config;return arguments.length?("object"==typeof n?(f(n.x)&&(t.axis_x_min=n.x),f(n.y)&&(t.axis_y_min=n.y),f(n.y2)&&(t.axis_y2_min=n.y2)):t.axis_y_min=t.axis_y2_min=n,void i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:t.axis_x_min,y:t.axis_y_min,y2:t.axis_y2_min}};r.axis.range=function(n){return arguments.length?(o(n.max)&&this.axis.max(n.max),void(o(n.min)&&this.axis.min(n.min))):{max:this.axis.max(),min:this.axis.min()}};r.legend=function(){};r.legend.show=function(n){var t=this.internal;t.showLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.legend.hide=function(n){var t=this.internal;t.hideLegend(t.mapToTargetIds(n));t.updateAndRedraw({withLegend:!0})};r.resize=function(n){var i=this.internal,t=i.config;t.size_width=n?n.width:null;t.size_height=n?n.height:null;this.flush()};r.flush=function(){var n=this.internal;n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};r.destroy=function(){var t=this.internal,i;return(n.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&n.clearTimeout(t.resizeTimeout),n.detachEvent)?n.detachEvent("onresize",t.resizeFunction):n.removeEventListener?n.removeEventListener("resize",t.resizeFunction):(i=n.onresize,i&&i.add&&i.remove&&i.remove(t.resizeFunction)),t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(n){t[n]=null}),null};r.tooltip=function(){};r.tooltip.show=function(n){var i,r,t=this.internal;n.mouse&&(r=n.mouse);n.data?t.isMultipleX()?(r=[t.x(n.data.x),t.getYScale(n.data.id)(n.data.value)],i=null):i=f(n.data.index)?n.data.index:t.getIndexByX(n.data.x):"undefined"!=typeof n.x?i=t.getIndexByX(n.x):"undefined"!=typeof n.index&&(i=n.index);t.dispatchEvent("mouseover",i,r);t.dispatchEvent("mousemove",i,r);t.config.tooltip_onshow.call(t,n.data)};r.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};t.isSafari=function(){var t=n.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};t.isChrome=function(){var t=n.navigator.userAgent;return t.indexOf("Chrome")>=0};Function.prototype.bind||(Function.prototype.bind=function(n){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});"function"==typeof define&&define.amd?define("c3",["d3"],function(){return l}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=l:n.c3=l}(window),function(){function n(t){var i=n.modules[t];if(!i)throw new Error('failed to require "'+t+'"');return"exports"in i||typeof i.definition!="function"||(i.client=i.component=!0,i.definition.call(this,i.exports={},i),delete i.definition),i.exports}n.loader="component";n.helper={};n.helper.semVerSort=function(n,t){for(var f,e,r,u,o=n.version.split("."),s=t.version.split("."),i=0;i<o.length;++i)if(f=parseInt(o[i],10),e=parseInt(s[i],10),f===e){if(r=o[i].substr((""+f).length),u=s[i].substr((""+e).length),r===""&&u!=="")return 1;if(r!==""&&u==="")return-1;if(r!==""&&u!=="")return r>u?1:-1;continue}else return f>e?1:-1;return 0};n.latest=function(t,i){function h(n){throw new Error('failed to find latest module of "'+n+'"');}var e,r,s,l,u;/(.*)~(.*)/.test(t)||h(t);var c=Object.keys(n.modules),f=[],o=[];for(e=0;e<c.length;e++)r=c[e],new RegExp(t+"@").test(r)&&(s=r.substr(t.length+1),l=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/.exec(r),l!=null?f.push({version:s,name:r}):o.push({version:s,name:r}));return(f.concat(o).length===0&&h(t),f.length>0)?(u=f.sort(n.helper.semVerSort).pop().name,i===!0)?u:n(u):(u=o.sort(function(n,t){return n.name>t.name})[0].name,i===!0)?u:n(u)};n.modules={};n.register=function(t,i){n.modules[t]={definition:i}};n.define=function(t,i){n.modules[t]={exports:i}};n.register("abpetkov~transitionize@0.0.3",function(n,t){function i(n,t){if(!(this instanceof i))return new i(n,t);this.element=n;this.props=t||{};this.init()}t.exports=i;i.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)};i.prototype.init=function(){var n=[];for(var t in this.props)n.push(t+" "+this.props[t]);this.element.style.transition=n.join(", ");this.isSafari()&&(this.element.style.webkitTransition=n.join(", "))}});n.register("ftlabs~fastclick@v0.6.11",function(n,t){
/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function i(n){"use strict";var r,t=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=n,!n||!n.nodeType)throw new TypeError("Layer must be a document node");(this.onClick=function(){return i.prototype.onClick.apply(t,arguments)},this.onMouse=function(){return i.prototype.onMouse.apply(t,arguments)},this.onTouchStart=function(){return i.prototype.onTouchStart.apply(t,arguments)},this.onTouchMove=function(){return i.prototype.onTouchMove.apply(t,arguments)},this.onTouchEnd=function(){return i.prototype.onTouchEnd.apply(t,arguments)},this.onTouchCancel=function(){return i.prototype.onTouchCancel.apply(t,arguments)},i.notNeeded(n))||(this.deviceIsAndroid&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(t,i,r){var u=Node.prototype.removeEventListener;t==="click"?u.call(n,t,i.hijacked||i,r):u.call(n,t,i,r)},n.addEventListener=function(t,i,r){var u=Node.prototype.addEventListener;t==="click"?u.call(n,t,i.hijacked||(i.hijacked=function(n){n.propagationStopped||i(n)}),r):u.call(n,t,i,r)}),typeof n.onclick=="function"&&(r=n.onclick,n.addEventListener("click",function(n){r(n)},!1),n.onclick=null))}i.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;i.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);i.prototype.deviceIsIOS4=i.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);i.prototype.deviceIsIOSWithBadTarget=i.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);i.prototype.needsClick=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(n.disabled)return!0;break;case"input":if(this.deviceIsIOS&&n.type==="file"||n.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(n.className)};i.prototype.needsFocus=function(n){"use strict";switch(n.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(n.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!n.disabled&&!n.readOnly;default:return/\bneedsfocus\b/.test(n.className)}};i.prototype.sendClick=function(n,t){"use strict";var r,i;document.activeElement&&document.activeElement!==n&&document.activeElement.blur();i=t.changedTouches[0];r=document.createEvent("MouseEvents");r.initMouseEvent(this.determineEventType(n),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);r.forwardedTouchEvent=!0;n.dispatchEvent(r)};i.prototype.determineEventType=function(n){"use strict";return this.deviceIsAndroid&&n.tagName.toLowerCase()==="select"?"mousedown":"click"};i.prototype.focus=function(n){"use strict";var t;this.deviceIsIOS&&n.setSelectionRange&&n.type.indexOf("date")!==0&&n.type!=="time"?(t=n.value.length,n.setSelectionRange(t,t)):n.focus()};i.prototype.updateScrollParent=function(n){"use strict";var i,t;if(i=n.fastClickScrollParent,!i||!i.contains(n)){t=n;do{if(t.scrollHeight>t.offsetHeight){i=t;n.fastClickScrollParent=t;break}t=t.parentElement}while(t)}i&&(i.fastClickLastScrollTop=i.scrollTop)};i.prototype.getTargetElementFromEventTarget=function(n){"use strict";return n.nodeType===Node.TEXT_NODE?n.parentNode:n};i.prototype.onTouchStart=function(n){"use strict";var i,t,r;if(n.targetTouches.length>1)return!0;if(i=this.getTargetElementFromEventTarget(n.target),t=n.targetTouches[0],this.deviceIsIOS){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(t.identifier===this.lastTouchIdentifier)return n.preventDefault(),!1;this.lastTouchIdentifier=t.identifier;this.updateScrollParent(i)}}return this.trackingClick=!0,this.trackingClickStart=n.timeStamp,this.targetElement=i,this.touchStartX=t.pageX,this.touchStartY=t.pageY,n.timeStamp-this.lastClickTime<200&&n.preventDefault(),!0};i.prototype.touchHasMoved=function(n){"use strict";var t=n.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i?!0:!1};i.prototype.onTouchMove=function(n){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(n.target)||this.touchHasMoved(n))&&(this.trackingClick=!1,this.targetElement=null),!0):!0};i.prototype.findControl=function(n){"use strict";return n.control!==undefined?n.control:n.htmlFor?document.getElementById(n.htmlFor):n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};i.prototype.onTouchEnd=function(n){"use strict";var u,e,i,r,f,t=this.targetElement;if(!this.trackingClick)return!0;if(n.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=n.timeStamp,e=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=n.changedTouches[0],t=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||t,t.fastClickScrollParent=this.targetElement.fastClickScrollParent),i=t.tagName.toLowerCase(),i==="label"){if(u=this.findControl(t),u){if(this.focus(t),this.deviceIsAndroid)return!1;t=u}}else if(this.needsFocus(t))return n.timeStamp-e>100||this.deviceIsIOS&&window.top!==window&&i==="input"?(this.targetElement=null,!1):(this.focus(t),this.deviceIsIOS4&&i==="select"||(this.targetElement=null,n.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(r=t.fastClickScrollParent,r&&r.fastClickLastScrollTop!==r.scrollTop)?!0:(this.needsClick(t)||(n.preventDefault(),this.sendClick(t,n)),!1)};i.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1;this.targetElement=null};i.prototype.onMouse=function(n){"use strict";return this.targetElement?n.forwardedTouchEvent?!0:n.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(n.stopImmediatePropagation?n.stopImmediatePropagation():n.propagationStopped=!0,n.stopPropagation(),n.preventDefault(),!1):!0:!0:!0};i.prototype.onClick=function(n){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):n.target.type==="submit"&&n.detail===0?!0:(t=this.onMouse(n),t||(this.targetElement=null),t)};i.prototype.destroy=function(){"use strict";var n=this.layer;this.deviceIsAndroid&&(n.removeEventListener("mouseover",this.onMouse,!0),n.removeEventListener("mousedown",this.onMouse,!0),n.removeEventListener("mouseup",this.onMouse,!0));n.removeEventListener("click",this.onClick,!0);n.removeEventListener("touchstart",this.onTouchStart,!1);n.removeEventListener("touchmove",this.onTouchMove,!1);n.removeEventListener("touchend",this.onTouchEnd,!1);n.removeEventListener("touchcancel",this.onTouchCancel,!1)};i.notNeeded=function(n){"use strict";var t,r;if(typeof ontouchstart=="undefined")return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r)if(i.prototype.deviceIsAndroid){if(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||r>31&&window.innerWidth<=window.screen.width))return!0}else return!0;return n.style.msTouchAction==="none"?!0:!1};i.attach=function(n){"use strict";return new i(n)};typeof define!="undefined"&&define.amd?define(function(){"use strict";return i}):typeof t!="undefined"&&t.exports?(t.exports=i.attach,t.exports.FastClick=i):window.FastClick=i});n.register("component~indexof@0.0.3",function(n,t){t.exports=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0;i<n.length;++i)if(n[i]===t)return i;return-1}});n.register("component~classes@1.2.1",function(t,i){function r(n){if(!n)throw new Error("A DOM element reference is required");this.el=n;this.list=n.classList}var u=n("component~indexof@0.0.3"),f=/\s+/,e=Object.prototype.toString;i.exports=function(n){return new r(n)};r.prototype.add=function(n){if(this.list)return this.list.add(n),this;var t=this.array(),i=u(t,n);return~i||t.push(n),this.el.className=t.join(" "),this};r.prototype.remove=function(n){if("[object RegExp]"==e.call(n))return this.removeMatching(n);if(this.list)return this.list.remove(n),this;var t=this.array(),i=u(t,n);return~i&&t.splice(i,1),this.el.className=t.join(" "),this};r.prototype.removeMatching=function(n){for(var i=this.array(),t=0;t<i.length;t++)n.test(i[t])&&this.remove(i[t]);return this};r.prototype.toggle=function(n,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(n,t)&&this.list.toggle(n):this.list.toggle(n),this):("undefined"!=typeof t?t?this.add(n):this.remove(n):this.has(n)?this.remove(n):this.add(n),this)};r.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,""),n=t.split(f);return""===n[0]&&n.shift(),n};r.prototype.has=r.prototype.contains=function(n){return this.list?this.list.contains(n):!!~u(this.array(),n)}});n.register("component~event@0.1.4",function(n){var t=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",i=t!=="addEventListener"?"on":"";n.bind=function(n,r,u,f){return n[t](i+r,u,f||!1),u};n.unbind=function(n,t,u,f){return n[r](i+t,u,f||!1),u}});n.register("component~query@0.0.3",function(n,t){function i(n,t){return t.querySelector(n)}n=t.exports=function(n,t){return t=t||document,i(n,t)};n.all=function(n,t){return t=t||document,t.querySelectorAll(n)};n.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return i=t.one,n.all=t.all,n}});n.register("component~matches-selector@0.1.5",function(t,i){function e(n,t){var r,i;if(!n||n.nodeType!==1)return!1;if(u)return u.call(n,t);for(r=f.all(t,n.parentNode),i=0;i<r.length;++i)if(r[i]==n)return!0;return!1}var f=n("component~query@0.0.3"),r=Element.prototype,u=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;i.exports=e});n.register("component~closest@0.1.4",function(t,i){var r=n("component~matches-selector@0.1.5");i.exports=function(n,t,i,u){for(n=i?{parentNode:n}:n,u=u||document;(n=n.parentNode)&&n!==document;){if(r(n,t))return n;if(n===u)return}}});n.register("component~delegate@0.2.3",function(t){var r=n("component~closest@0.1.4"),i=n("component~event@0.1.4");t.bind=function(n,t,u,f,e){return i.bind(n,u,function(i){var u=i.target||i.srcElement;i.delegateTarget=r(u,t,!0,n);i.delegateTarget&&f.call(n,i)},e)};t.unbind=function(n,t,r,u){i.unbind(n,t,r,u)}});n.register("component~events@1.0.9",function(t,i){function r(n,t){if(!(this instanceof r))return new r(n,t);if(!n)throw new Error("element required");if(!t)throw new Error("object required");this.el=n;this.obj=t;this._events={}}function e(n){var t=n.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}var u=n("component~event@0.1.4"),f=n("component~delegate@0.2.3");i.exports=r;r.prototype.sub=function(n,t,i){this._events[n]=this._events[n]||{};this._events[n][t]=i};r.prototype.bind=function(n,t){function i(){var n=[].slice.call(arguments).concat(c);h[t].apply(h,n)}var o=e(n),s=this.el,h=this.obj,r=o.name,t=t||"on"+r,c=[].slice.call(arguments,2);return o.selector?i=f.bind(s,o.selector,r,i):u.bind(s,r,i),this.sub(r,t,i),i};r.prototype.unbind=function(n,t){var i,r;if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(n);(i=this._events[n],i)&&(r=i[t],r)&&u.unbind(this.el,n,r)};r.prototype.unbindAll=function(){for(var n in this._events)this.unbindAllOf(n)};r.prototype.unbindAllOf=function(n){var t=this._events[n],i;if(t)for(i in t)this.unbind(n,i)}});n.register("switchery",function(t,i){function r(n,t){if(!(this instanceof r))return new r(n,t);this.element=n;this.options=t||{};for(var i in u)this.options[i]==null&&(this.options[i]=u[i]);this.element!=null&&this.element.type=="checkbox"&&this.init();this.isDisabled()===!0&&this.disable()}var e=n("abpetkov~transitionize@0.0.3"),o=n("ftlabs~fastclick@v0.6.11"),f=n("component~classes@1.2.1"),s=n("component~events@1.0.9"),u;i.exports=r;u={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:1,speed:"0.4s",size:"default"};r.prototype.hide=function(){this.element.style.display="none"};r.prototype.show=function(){var n=this.create();this.insertAfter(this.element,n)};r.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=s(this.switcher,this),this.switcher};r.prototype.insertAfter=function(n,t){n.parentNode.insertBefore(t,n.nextSibling)};r.prototype.setPosition=function(n){var t=this.isChecked(),r=this.switcher,i=this.jack;n&&t?t=!1:n&&!t&&(t=!0);t===!0?(this.element.checked=!0,i.style.left=window.getComputedStyle?parseInt(window.getComputedStyle(r).width)-parseInt(window.getComputedStyle(i).width)+"px":parseInt(r.currentStyle.width)-parseInt(i.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(i.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==u.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())};r.prototype.setSpeed=function(){var n={},t={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};n=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":this.options.speed.replace(/[a-z]/,"")*3+"s"}:{border:this.options.speed,"box-shadow":this.options.speed};e(this.switcher,n);e(this.jack,t)};r.prototype.setSize=function(){switch(this.options.size){case"small":f(this.switcher).add("switchery-small");break;case"large":f(this.switcher).add("switchery-large");break;default:f(this.switcher).add("switchery-default")}};r.prototype.colorize=function(){var n=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color;this.switcher.style.borderColor=this.options.color;this.switcher.style.boxShadow="inset 0 0 0 "+n+"px "+this.options.color;this.jack.style.backgroundColor=this.options.jackColor};r.prototype.handleOnchange=function(){if(document.dispatchEvent){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!0);this.element.dispatchEvent(n)}else this.element.fireEvent("onchange")};r.prototype.handleChange=function(){var t=this,n=this.element;n.addEventListener?n.addEventListener("change",function(){t.setPosition()}):n.attachEvent("onchange",function(){t.setPosition()})};r.prototype.handleClick=function(){var n=this.switcher;o(n);this.events.bind("click","bindClick")};r.prototype.bindClick=function(){var n=this.element.parentNode.tagName.toLowerCase(),t=n==="label"?!1:!0;this.setPosition(t);this.handleOnchange(this.element.checked)};r.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)};r.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")};r.prototype.init=function(){this.hide();this.show();this.setSize();this.setPosition();this.markAsSwitched();this.handleChange();this.handleClick()};r.prototype.isChecked=function(){return this.element.checked};r.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly};r.prototype.destroy=function(){this.events.unbind()};r.prototype.enable=function(){this.options.disabled&&(this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick"))};r.prototype.disable=function(){this.options.disabled||(this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy())}});typeof exports=="object"?module.exports=n("switchery"):typeof define=="function"&&define.amd?define("Switchery",[],function(){return n("switchery")}):(this||window).Switchery=n("switchery")}();
/*! Select2 4.0.0 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n){var t=function(){var t;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),function(){if(!t||!t.requirejs){t?i=t:t={};var n,i,r;!function(t){function e(n,t){return nt.call(n,t)}function c(n,t){var e,s,o,u,h,y,c,w,i,l,p,r=t&&t.split("/"),a=f.map,v=a&&a["*"]||{};if(n&&"."===n.charAt(0))if(t){for(r=r.slice(0,r.length-1),n=n.split("/"),h=n.length-1,f.nodeIdCompat&&b.test(n[h])&&(n[h]=n[h].replace(b,"")),n=r.concat(n),i=0;i<n.length;i+=1)if(p=n[i],"."===p)n.splice(i,1),i-=1;else if(".."===p){if(1===i&&(".."===n[2]||".."===n[0]))break;i>0&&(n.splice(i-1,2),i-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((r||v)&&a){for(e=n.split("/"),i=e.length;i>0;i-=1){if(s=e.slice(0,i).join("/"),r)for(l=r.length;l>0;l-=1)if(o=a[r.slice(0,l).join("/")],o&&(o=o[s])){u=o;y=i;break}if(u)break;!c&&v&&v[s]&&(c=v[s],w=i)}!u&&c&&(u=c,y=w);u&&(e.splice(0,y,u),n=e.join("/"))}return n}function p(n,i){return function(){return o.apply(t,tt.call(arguments,0).concat([n,i]))}}function k(n){return function(t){return c(t,n)}}function d(n){return function(t){u[n]=t}}function l(n){if(e(h,n)){var i=h[n];delete h[n];y[n]=!0;a.apply(t,i)}if(!e(u,n)&&!e(y,n))throw new Error("No "+n);return u[n]}function w(n){var i,t=n?n.indexOf("!"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function g(n){return function(){return f&&f.config&&f.config[n]||{}}}var a,o,v,s,u={},h={},f={},y={},nt=Object.prototype.hasOwnProperty,tt=[].slice,b=/\.js$/;v=function(n,t){var r,u=w(n),i=u[0];return n=u[1],i&&(i=c(i,t),r=l(i)),i?n=r&&r.normalize?r.normalize(n,k(t)):c(n,t):(n=c(n,t),u=w(n),i=u[0],n=u[1],i&&(r=l(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}};s={require:function(n){return p(n)},exports:function(n){var t=u[n];return"undefined"!=typeof t?t:u[n]={}},module:function(n){return{id:n,uri:"",exports:u[n],config:g(n)}}};a=function(n,i,r,f){var w,o,k,b,c,g,a=[],nt=typeof r;if(f=f||n,"undefined"===nt||"function"===nt){for(i=!i.length&&r.length?["require","exports","module"]:i,c=0;c<i.length;c+=1)if(b=v(i[c],f),o=b.f,"require"===o)a[c]=s.require(n);else if("exports"===o)a[c]=s.exports(n),g=!0;else if("module"===o)w=a[c]=s.module(n);else if(e(u,o)||e(h,o)||e(y,o))a[c]=l(o);else{if(!b.p)throw new Error(n+" missing "+o);b.p.load(b.n,p(f,!0),d(o),{});a[c]=u[o]}k=r?r.apply(u[n],a):void 0;n&&(w&&w.exports!==t&&w.exports!==u[n]?u[n]=w.exports:k===t&&g||(u[n]=k))}else n&&(u[n]=r)};n=i=o=function(n,i,r,u,e){if("string"==typeof n)return s[n]?s[n](i):l(v(n,i).f);if(!n.splice){if(f=n,f.deps&&o(f.deps,f.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},"function"==typeof r&&(r=u,u=e),u?a(t,n,i,r):setTimeout(function(){a(t,n,i,r)},4),o};o.config=function(n){return o(n)};n._defined=u;r=function(n,t,i){t.splice||(i=t,t=[]);e(u,n)||e(h,n)||(h[n]=[n,t,i])};r.amd={jQuery:!0}}();t.requirejs=n;t.require=i;t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[],t,u;for(t in i)u=i[t],"function"==typeof u&&"constructor"!==t&&r.push(t);return r}var t={},i;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;u>0&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function l(){this.constructor=i}var s=r(t),h=r(n),u,e,c,f,o;for(t.displayName=n.displayName,i.prototype=new l,u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(c=function(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){var n=Array.prototype.unshift;return n.call(arguments,r),u.apply(this,arguments)}},f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i=function(){this.listeners={}},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var t=Array.prototype.slice;this.listeners=this.listeners||{};n in this.listeners&&this.invoke(this.listeners[n],t.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;r>i;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var r,t="",i=0;n>i;i++)r=Math.floor(36*Math.random()),t+=r.toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,1!==r.length){for(u=0;u<r.length;u++)t=r[u],t=t.substring(0,1).toLowerCase()+t.substring(1),t in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return f!==r||"hidden"!==r&&"visible"!==r?"scroll"===f||"scroll"===r?!0:u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth:!1},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof n?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.appendMany=function(t,i){if("1.7"===n.fn.jquery.substr(0,3)){var r=n();n.map(i,function(n){r=r.add(n)});i=r}t.append(i)},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="tree"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="treeitem" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));this.$results.append(i)},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],null==n.results||0===n.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)},i.prototype.position=function(n,t){var i=t.find(".select2-results");i.append(n)},i.prototype.sort=function(n){var t=this.options.get("sorter");return t(n)},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var f=n.map(i,function(n){return n.id.toString()}),r=t.$results.find(".select2-results__option[aria-selected]"),u;r.each(function(){var i=n(this),t=n.data(this,"data"),r=""+t.id;null!=t.element&&t.element.selected||null==t.element&&n.inArray(r,f)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")});u=r.filter("[aria-selected=true]");u.length>0?u.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},i.prototype.showLoading=function(n){this.hideLoading();var i=this.options.get("translations").get("searching"),r={disabled:!0,loading:!0,text:i(n)},t=this.option(r);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var r=document.createElement("li"),i,e,c,o,u,s,f,l,a,h;r.className="select2-results__option";i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true");null==t.id&&delete i["aria-selected"];null!=t._resultId&&(r.id=t._resultId);t.title&&(r.title=t.title);t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(e in i)c=i[e],r.setAttribute(e,c);if(t.children){for(o=n(r),u=document.createElement("strong"),u.className="select2-results__group",n(u),this.template(t,u),s=[],f=0;f<t.children.length;f++)l=t.children[f],a=this.option(l),s.push(a);h=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(s);o.append(u);o.append(h)}else this.template(t,r);return n.data(r,"data",t),r},i.prototype.bind=function(t){var i=this,r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(n){i.clear();i.append(n.data);t.isOpen()&&i.setClasses()});t.on("results:append",function(n){i.append(n.data);t.isOpen()&&i.setClasses()});t.on("query",function(n){i.showLoading(n)});t.on("select",function(){t.isOpen()&&i.setClasses()});t.on("unselect",function(){t.isOpen()&&i.setClasses()});t.on("open",function(){i.$results.attr("aria-expanded","true");i.$results.attr("aria-hidden","false");i.setClasses();i.ensureHighlightVisible()});t.on("close",function(){i.$results.attr("aria-expanded","false");i.$results.attr("aria-hidden","true");i.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var n=i.getHighlightedResults();0!==n.length&&n.trigger("mouseup")});t.on("results:select",function(){var n=i.getHighlightedResults(),t;0!==n.length&&(t=n.data("data"),"true"==n.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:t}))});t.on("results:previous",function(){var r=i.getHighlightedResults(),u=i.$results.find("[aria-selected]"),f=u.index(r),n,t;if(0!==f){n=f-1;0===r.length&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=i.$results.offset().top,o=t.offset().top,s=i.$results.scrollTop()+(o-e);0===n?i.$results.scrollTop(0):0>o-e&&i.$results.scrollTop(s)}});t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),o=t.index(e),r=o+1,n;if(!(r>=t.length)){n=t.eq(r);n.trigger("mouseenter");var u=i.$results.offset().top+i.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),s=i.$results.scrollTop()+f-u;0===r?i.$results.scrollTop(0):f>u&&i.$results.scrollTop(s)}});t.on("results:focus",function(n){n.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(n){i.displayMessage(n)});n.fn.mousewheel&&this.$results.on("mousewheel",function(n){var t=i.$results.scrollTop(),r=i.$results.get(0).scrollHeight-i.$results.scrollTop()+n.deltaY,u=n.deltaY>0&&t-n.deltaY<=0,f=n.deltaY<0&&r<=i.$results.height();u?(i.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var r=n(this),u=r.data("data");return"true"===r.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:u}):i.trigger("close")):void i.trigger("select",{originalEvent:t,data:u})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=n(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted");i.trigger("results:focus",{data:t,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(0!==n.length){var f=this.$results.find("[aria-selected]"),e=f.index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=2*n.outerHeight(!1);2>=e?this.$results.scrollTop(0):(u>this.$results.outerHeight()||0>u)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=n('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(n){var t=this,r=(n.id+"-container",n.id+"-results");this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t.trigger("blur",n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.focus();t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)});n.on("disable",function(){t.$selection.attr("tabindex","-1")})},r.prototype._attachCloseHandler=function(t){n(document.body).on("mousedown.select2."+t.id,function(t){var i=n(t.target),r=i.closest(".select2"),u=n(".select2.select2-container--open");u.each(function(){var i=n(this),t;this!=r[0]&&(t=i.data("element"),t.select2("close"))})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){var i=t.find(".selection");i.append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t);this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){1===n.which&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("selection:update",function(n){i.update(n.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){if(0===n.length)return void this.clear();var t=n[0],r=this.display(t),i=this.$selection.find(".select2-selection__rendered");i.empty().append(r);i.prop("title",t.title||t.text)},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(){var t=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(n){t.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(i){var r=n(this),u=r.parent(),f=u.data("data");t.trigger("unselect",{originalEvent:i,data:f})})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},r.prototype.update=function(n){var f,t,e;if(this.clear(),0!==n.length){for(f=[],t=0;t<n.length;t++){var r=n[t],o=this.display(r),u=this.selectionContainer();u.append(o);u.prop("title",r.title||r.text);u.data("data",r);f.push(u)}e=this.$selection.find(".select2-selection__rendered");i.appendMany(e,f)}},r}),t.define("select2/selection/placeholder",["../utils"],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=1==t.length&&t[0].id!=this.placeholder.id,u=t.length>1,i;if(u||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys"],function(n,t){function i(){}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},i.prototype._handleClear=function(n,t){var r,u,i,f;if(!this.options.get("disabled")&&(r=this.$selection.find(".select2-selection__clear"),0!==r.length)){for(t.stopPropagation(),u=r.data("data"),i=0;i<u.length;i++)if(f={data:u[i]},this.trigger("unselect",f),f.prevented)return;this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle")}},i.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var r=n('<span class="select2-selection__clear">&times;<\/span>');r.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(r)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var i=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/li>');return this.$searchContainer=i,this.$search=i.find("input"),t.call(this)},r.prototype.bind=function(n,t,r){var u=this;n.call(this,t,r);t.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus()});t.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("");u.$search.focus()});t.on("enable",function(){u.$search.prop("disabled",!1)});t.on("disable",function(){u.$search.prop("disabled",!0)});this.$selection.on("focusin",".select2-search--inline",function(n){u.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){u.trigger("blur",n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,t,f;n.stopPropagation();u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented();r=n.which;r===i.BACKSPACE&&""===u.$search.val()&&(t=u.$searchContainer.prev(".select2-selection__choice"),t.length>0&&(f=t.data("data"),u.searchRemoveChoice(f),n.preventDefault()))});this.$selection.on("input",".select2-search--inline",function(){u.$selection.off("keyup.search")});this.$selection.on("keyup.search input",".select2-search--inline",function(n){u.handleSearch(n)})},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){this.$search.attr("placeholder","");n.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.trigger("open");this.$search.val(t.text+" ")},r.prototype.resizeSearch=function(){var n,t;this.$search.css("width","25px");n="";""!==this.$search.attr("placeholder")?n=this.$selection.find(".select2-selection__rendered").innerWidth():(t=this.$search.val().length+1,n=.75*t+"em");this.$search.css("width",n)},r}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],e=["opening","closing","selecting","unselecting"];t.call(this,i,r);i.on("*",function(t,i){if(-1!==n.inArray(t,f)){i=i||{};var r=n.Event("select2:"+t,{params:i});u.$element.trigger(r);-1!==n.inArray(t,e)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+(null!=i.id?"-"+i.id.toString():"-"+n.generateChars(4))},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=[],r=this;this.$element.find(":selected").each(function(){var n=i(this),u=r.item(n);t.push(u)});n(t)},r.prototype.select=function(n){var t=this,r;if(n.selected=!0,i(n.element).is("option"))return n.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(r){var f=[],u,e;for(n=[n],n.push.apply(n,r),u=0;u<n.length;u++)e=n[u].id,-1===i.inArray(e,f)&&f.push(e);t.$element.val(f);t.$element.trigger("change")}):(r=n.id,this.$element.val(r),this.$element.trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple"))return n.selected=!1,i(n.element).is("option")?(n.element.selected=!1,void this.$element.trigger("change")):void this.current(function(r){for(var e,u=[],f=0;f<r.length;f++)e=r[f].id,e!==n.id&&-1===i.inArray(e,u)&&u.push(e);t.$element.val(u);t.$element.trigger("change")})},r.prototype.bind=function(n){var t=this;this.container=n;n.on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},r.prototype.query=function(n,t){var r=[],u=this,f=this.$element.children();f.each(function(){var t=i(this),e,f;(t.is("option")||t.is("optgroup"))&&(e=u.item(t),f=u.matches(n,e),null!==f&&r.push(f))});t({results:r})},r.prototype.addOptions=function(n){t.appendMany(this.$element,n)},r.prototype.option=function(n){var t,u,r;return n.children?(t=document.createElement("optgroup"),t.label=n.text):(t=document.createElement("option"),void 0!==t.textContent?t.textContent=n.text:t.innerText=n.text),n.id&&(t.value=n.id),n.disabled&&(t.disabled=!0),n.selected&&(t.selected=!0),n.title&&(t.title=n.title),u=i(t),r=this._normalizeItem(n),r.element=t,i.data(t,"data",r),u},r.prototype.item=function(n){var t={},e,o;if(t=i.data(n[0],"data"),null!=t)return t;if(n.is("option"))t={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if(n.is("optgroup")){t={text:n.prop("label"),children:[],title:n.prop("title")};for(var u=n.children("option"),f=[],r=0;r<u.length;r++)e=i(u[r]),o=this.item(e),f.push(o);t.children=f}return t=this._normalizeItem(t),t.element=n[0],i.data(n[0],"data",t),t},r.prototype._normalizeItem=function(n){i.isPlainObject(n)||(n={id:n,text:n});n=i.extend({},{text:""},n);return null!=n.id&&(n.id=n.id.toString()),null!=n.text&&(n.text=n.text.toString()),null==n._resultId&&n.id&&null!=this.container&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){var i=this.options.get("matcher");return i(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){var i=t.get("data")||[];r.__super__.constructor.call(this,n,t);this.addOptions(this.convertToOptions(i))}return t.Extend(r,n),r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});0===t.length&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function l(n){return function(){return i(this).val()==n.id}}for(var r,f,c,a=this,e=this.$element.find("option"),v=e.map(function(){return a.item(i(this)).id}).get(),o=[],u=0;u<n.length;u++)if(r=this._normalizeItem(n[u]),i.inArray(r.id,v)>=0){var s=e.filter(l(r)),h=this.item(s),y=(i.extend(!0,{},h,r),this.option(h));s.replaceWith(y)}else f=this.option(r),r.children&&(c=this.convertToOptions(r.children),t.appendMany(f,c)),o.push(f);return o},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(t,i){this.ajaxOptions=this._applyDefaults(i.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);n.__super__.constructor.call(this,t,i)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return{q:n.term}},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var f=r.transport(r,function(r){var f=u.processResults(r,n);u.options.get("debug")&&window.console&&console.error&&(f&&f.results&&i.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(f)},function(){});u._request=f}var u=this,r;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url(n));"function"==typeof r.data&&(r.data=r.data(n));this.ajaxOptions.delay&&""!==n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(t,i,r){var f=r.get("tags"),e=r.get("createTag"),u;if(void 0!==e&&(this.createTag=e),t.call(this,i,r),n.isArray(f))for(u=0;u<f.length;u++){var o=f[u],s=this._normalizeItem(o),h=this.option(s);this.$element.append(h)}}return t.prototype.query=function(n,t,i){function u(n,f){for(var s,c,e=n.results,o=0;o<e.length;o++){var h=e[o],l=null!=h.children&&!u({results:h.children},!0),a=h.text===t.term;if(a||l)return f?!1:(n.data=e,void i(n))}if(f)return!0;s=r.createTag(t);null!=s&&(c=r.option(s),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,s));n.results=e;i(n)}var r=this;return this._removeOldTags(),null==t.term||null!=t.page?void n.call(this,t,i):void n.call(this,t,u)},t.prototype.createTag=function(t,i){var r=n.trim(i.term);return""===r?null:{id:r,text:r}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){var t=(this._lastTag,this.$element.find("option[data-select2-tag]"));t.each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(n,t,i){function u(n){f.select(n)}var f=this,r;t.term=t.term||"";r=this.tokenizer(t,this.options,u);r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),t.term=r.term);n.call(this,t,i)},t.prototype.tokenizer=function(t,i,r,u){for(var o,s=r.get("tokenSeparators")||[],f=i.term,e=0,h=this.createTag||function(n){return{id:n.term,text:n.term}};e<f.length;)if(o=f[e],-1!==n.inArray(o,s)){var c=f.substr(0,e),l=n.extend({},i,{term:c}),a=h(l);u(a);f=f.substr(e+1)||"";e=0}else e++;return{term:f}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){return t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){var r=this;this.current(function(u){var f=null!=u?u.length:0;return r.maximumSelectionLength>0&&f>=r.maximumSelectionLength?void r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):void n.call(r,t,i)})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus();window.setTimeout(function(){u.$search.focus()},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("")});i.on("results:all",function(n){if(null==n.query.term||""===n.query.term){var t=u.showSearch(n);t?u.$searchContainer.removeClass("select2-search--hide"):u.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;i>=0;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);i.on("query",function(n){u.lastParams=n;u.loading=!0});i.on("query:append",function(n){u.lastParams=n;u.loading=!0});this.$results.on("scroll",function(){var r=n.contains(document.documentElement,u.$loadingMore[0]),t,i;!u.loading&&r&&(t=u.$results.offset().top+u.$results.outerHeight(!1),i=u.$loadingMore.offset().top+u.$loadingMore.outerHeight(!1),t+50>=i&&u.loadMore())})},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="option load-more" role="treeitem"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(n,t,i){this.$dropdownParent=i.get("dropdownParent")||document.body;n.call(this,t,i)}return i.prototype.bind=function(n,t,i){var r=this,u=!1;n.call(this,t,i);t.on("open",function(){r._showDropdown();r._attachPositioningHandler(t);u||(u=!0,t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()}),t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()}))});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var r=this,u="scroll.select2."+i.id,e="resize.select2."+i.id,o="orientationchange.select2."+i.id,f=this.$container.parents().filter(t.hasScroll);f.each(function(){n(this).data("select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});f.on(u,function(){var t=n(this).data("select2-scroll-position");n(this).scrollTop(t.y)});n(window).on(u+" "+e+" "+o,function(){r._positionDropdown();r._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var r="scroll.select2."+i.id,u="resize.select2."+i.id,f="orientationchange.select2."+i.id,e=this.$container.parents().filter(t.hasScroll);e.off(r);n(window).off(r+" "+u+" "+f)},i.prototype._positionDropdown=function(){var f=n(window),u=this.$dropdown.hasClass("select2-dropdown--above"),l=this.$dropdown.hasClass("select2-dropdown--below"),t=null,i=(this.$container.position(),this.$container.offset()),r;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var e={height:this.$dropdown.outerHeight(!1)},o={top:f.scrollTop(),bottom:f.scrollTop()+f.height()},s=o.top<i.top-e.height,h=o.bottom>i.bottom+e.height,c={left:i.left,top:r.bottom};u||l||(t="below");h||!s||u?!s&&h&&u&&(t="below"):t="above";("above"==t||u&&"below"!==t)&&(c.top=r.top-e.height);null!=t&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+t),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+t));this.$dropdownContainer.css(c)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}function t(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);n.call(this,t,i,r)}return t.prototype.showSearch=function(t,i){return n(i.data.results)<this.minimumResultsForSearch?!1:t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(){r._handleSelectOnClose()})},n.prototype._handleSelectOnClose=function(){var n=this.getHighlightedResults();n.length<1||this.trigger("select",{data:n.data("data")})},n}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close")},n}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(n){var t=n.minimum-n.input.length;return"Please enter "+t+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return 1!=n.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}st.prototype.apply=function(l){var vt,yt,pt,wt,bt,kt,dt,ct,lt,st,ot,ht,gt,at;if((l=n.extend({},this.defaults,l),null==l.dataAdapter)&&((l.dataAdapter=null!=l.ajax?y:null!=l.data?v:a,l.minimumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,b)),l.maximumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,k)),l.maximumSelectionLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,d)),l.tags&&(l.dataAdapter=h.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=h.Decorate(l.dataAdapter,w)),null!=l.query)&&(vt=t(l.amdBase+"compat/query"),l.dataAdapter=h.Decorate(l.dataAdapter,vt)),null!=l.initSelection&&(yt=t(l.amdBase+"compat/initSelection"),l.dataAdapter=h.Decorate(l.dataAdapter,yt))),(null==l.resultsAdapter&&(l.resultsAdapter=i,null!=l.ajax&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,it)),null!=l.placeholder&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,tt)),l.selectOnClose&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,ft))),null==l.dropdownAdapter)&&(l.multiple?l.dropdownAdapter=g:(pt=h.Decorate(g,nt),l.dropdownAdapter=pt),(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,ut)),l.closeOnSelect&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,et)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass)&&(wt=t(l.amdBase+"compat/dropdownCss"),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,wt)),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,rt)),null==l.selectionAdapter&&((l.selectionAdapter=l.multiple?u:r,null!=l.placeholder&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,e)),l.multiple&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,o)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass)&&(bt=t(l.amdBase+"compat/containerCss"),l.selectionAdapter=h.Decorate(l.selectionAdapter,bt)),l.selectionAdapter=h.Decorate(l.selectionAdapter,s)),"string"==typeof l.language&&(l.language.indexOf("-")>0?(kt=l.language.split("-"),dt=kt[0],l.language=[l.language,dt]):l.language=[l.language]),n.isArray(l.language)){for(ct=new c,l.language.push("en"),lt=l.language,st=0;st<lt.length;st++){ot=lt[st];ht={};try{ht=c.loadPath(ot)}catch(ni){try{ot=this.defaults.amdLanguageBase+ot;ht=c.loadPath(ot)}catch(ti){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+ot+'" could not be automatically loaded. A fallback will be used instead.');continue}}ct.extend(ht)}l.translations=ct}else gt=c.loadPath(this.defaults.amdLanguageBase+"en"),at=new c(l.language),at.extend(gt),l.translations=at;return l};st.prototype.reset=function(){function i(n){function t(n){return l[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function t(r,u){var f,e,o,s,h,c;if(""===n.trim(r.term))return u;if(u.children&&u.children.length>0){for(f=n.extend(!0,{},u),e=u.children.length-1;e>=0;e--)o=u.children[e],s=t(r,o),null==s&&f.children.splice(e,1);return f.children.length>0?f:t(r,f)}return h=i(u.text).toUpperCase(),c=i(r.term).toUpperCase(),h.indexOf(c)>-1?u:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:ot,matcher:t,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}};st.prototype.set=function(t,i){var f=n.camelCase(t),r={},u;r[f]=i;u=h._convertData(r);n.extend(this.defaults,u)};return new st}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,t,i,r){function u(t,u){if(this.options=t,null!=u&&this.fromElement(u),this.options=i.apply(this.options),u&&u.is("input")){var f=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,f)}}return u.prototype.fromElement=function(n){var e=["select2"],f,u,i;null==this.options.multiple&&(this.options.multiple=n.prop("multiple"));null==this.options.disabled&&(this.options.disabled=n.prop("disabled"));null==this.options.language&&(n.prop("lang")?this.options.language=n.prop("lang").toLowerCase():n.closest("[lang]").prop("lang")&&(this.options.language=n.closest("[lang]").prop("lang")));null==this.options.dir&&(this.options.dir=n.prop("dir")?n.prop("dir"):n.closest("[dir]").prop("dir")?n.closest("[dir]").prop("dir"):"ltr");n.prop("disabled",this.options.disabled);n.prop("multiple",this.options.multiple);n.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.data("data",n.data("select2Tags")),n.data("tags",!0));n.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),n.attr("ajax--url",n.data("ajaxUrl")),n.data("ajax--url",n.data("ajaxUrl")));f={};f=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&n[0].dataset?t.extend(!0,{},n[0].dataset,n.data()):n.data();u=t.extend(!0,{},f);u=r._convertData(u);for(i in u)t.inArray(i,e)>-1||(t.isPlainObject(this.options[i])?t.extend(this.options[i],u[i]):this.options[i]=u[i]);return this},u.prototype.get=function(n){return this.options[n]},u.prototype.set=function(n,t){this.options[n]=t},u}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,i){var f,e,r,o,s,h,c;null!=n.data("select2")&&n.data("select2").destroy();this.$element=n;this.id=this._generateId(n);i=i||{};this.options=new t(i,n);u.__super__.constructor.call(this);f=n.attr("tabindex")||0;n.data("old-tabindex",f);n.attr("tabindex","-1");e=this.options.get("dataAdapter");this.dataAdapter=new e(n,this.options);r=this.render();this._placeContainer(r);o=this.options.get("selectionAdapter");this.selection=new o(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);s=this.options.get("dropdownAdapter");this.dropdown=new s(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);h=this.options.get("resultsAdapter");this.results=new h(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);c=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){c.trigger("selection:update",{data:n})});n.addClass("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){var t="";return t=null!=n.attr("id")?n.attr("id"):null!=n.attr("name")?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4),t="select2-"+t},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var r,u,f,s,i;if("resolve"==t)return r=this._resolveWidth(n,"style"),null!=r?r:this._resolveWidth(n,"element");if("element"==t)return u=n.outerWidth(!1),0>=u?"auto":u+"px";if("style"==t){if(f=n.attr("style"),"string"!=typeof f)return null;for(var o=f.split(";"),e=0,h=o.length;h>e;e+=1)if(s=o[e].replace(/\s/g,""),i=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return null}return t},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this,r;this.$element.on("change.select2",function(){t.dataAdapter.current(function(n){t.trigger("selection:update",{data:n})})});this._sync=i.bind(this._syncAttributes,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=r?(this._observer=new r(function(i){n.each(i,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var t=this,i=["toggle"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("*",function(r,u){-1===n.inArray(r,i)&&t.trigger(r,u)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")});this.on("close",function(){n.$container.removeClass("select2-container--open")});this.on("enable",function(){n.$container.removeClass("select2-container--disabled")});this.on("disable",function(){n.$container.addClass("select2-container--disabled")});this.on("focus",function(){n.$container.addClass("select2-container--focus")});this.on("blur",function(){n.$container.removeClass("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open");this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ENTER?(n.trigger("results:select"),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle"),t.preventDefault()):i===r.UP?(n.trigger("results:previous"),t.preventDefault()):i===r.DOWN?(n.trigger("results:next"),t.preventDefault()):(i===r.ESC||i===r.TAB)&&(n.close(),t.preventDefault()):(i===r.ENTER||i===r.SPACE||(i===r.DOWN||i===r.UP)&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"},e,i;if(n in f&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented))return void(t.prevented=!0);r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},u.prototype.close=function(){this.isOpen()&&this.trigger("close")},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');(null==n||0===n.length)&&(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var i=t[0];n.isArray(i)&&(i=n.map(i,function(n){return n.toString()}));this.$element.val(i).trigger("change")},u.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync);null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1);this._sync=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},u}),t.define("select2/compat/utils",["jquery"],function(n){function t(t,i,r){var u,f,e=[];u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&e.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(f=r(this),null!=f&&e.push(f))}));t.attr("class",e.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("containerCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptContainerCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("containerCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("dropdownCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptDropdownCssClass"),(f=f||r,-1!==u.indexOf(":all:"))&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return null!=t?t+" "+n:n}),e=this.options.get("dropdownCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/initSelection",["jquery"],function(n){function t(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2");this.initSelection=i.get("initSelection");this._isInitialized=!1;n.call(this,t,i)}return t.prototype.current=function(t,i){var r=this;return this._isInitialized?void t.call(this,i):void this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0;n.isArray(t)||(t=[t]);i(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(n){function t(n,t,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";"hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.");n.call(this,t,i)}return t.prototype.current=function(t,i){function f(t,i){var r=[];return t.selected||-1!==n.inArray(t.id,i)?(t.selected=!0,r.push(t)):t.selected=!1,t.children&&r.push.apply(r,f(t.children,i)),r}for(var e,r=[],u=0;u<this._currentData.length;u++)e=this._currentData[u],r.push.apply(r,f(e,this.$element.val().split(this._valueSeparator)));i(r)},t.prototype.select=function(t,i){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+i.id;this.$element.val(r);this.$element.trigger("change")}else this.current(function(t){n.map(t,function(n){n.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},t.prototype.unselect=function(n,t){var i=this;t.selected=!1;this.current(function(n){for(var f,u=[],r=0;r<n.length;r++)f=n[r],t.id!=f.id&&u.push(f.id);i.$element.val(u.join(i._valueSeparator));i.$element.trigger("change")})},t.prototype.query=function(n,t,i){for(var e,f,u=[],r=0;r<this._currentData.length;r++)e=this._currentData[r],f=this.matches(t,e),null!==f&&u.push(f);i({results:u})},t.prototype.addOptions=function(t,i){var r=n.map(i,function(t){return n.data(t[0],"data")});this._currentData.push.apply(this._currentData,r)},t}),t.define("select2/compat/matcher",["jquery"],function(n){function t(t){function i(i,r){var u=n.extend(!0,{},r),f,e,o;if(null==i.term||""===n.trim(i.term))return u;if(r.children){for(f=r.children.length-1;f>=0;f--)e=r.children[f],o=t(i.term,e.text,e),o||u.children.splice(f,1);if(u.children.length>0)return u}return t(i.term,r.text,r)?u:null}return i}return t}),t.define("select2/compat/query",[],function(){function n(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.callback=i;var r=this.options.get("query");r.call(null,t)},n}),t.define("select2/dropdown/attachContainer",[],function(){function n(n,t,i){n.call(this,t,i)}return n.prototype.position=function(n,t,i){var r=i.find(".dropdown-wrapper");r.append(t);t.addClass("select2-dropdown--below");i.addClass("select2-container--below")},n}),t.define("select2/dropdown/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$dropdown.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("select2/selection/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$selection.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(n,t,i,r){if(t("jquery.mousewheel"),null==n.fn.select2){var u=["open","close","destroy"];n.fn.select2=function(t){var r,f,e;if(t=t||{},"object"==typeof t)return this.each(function(){var r=n.extend({},t,!0);new i(n(this),r)}),this;if("string"==typeof t)return r=this.data("select2"),null==r&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),f=Array.prototype.slice.call(arguments,1),e=r[t](f),n.inArray(t,u)>-1?this:e;throw new Error("Invalid arguments for Select2: "+t);}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=r),i}),function(i){"function"==typeof t.define&&t.define.amd?t.define("jquery.mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(n)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=-1*u.detail),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=-1*e,e=0),l=0===e?s:e,"deltaY"in u&&(e=-1*u.deltaY,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=-1*s)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||t>a)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i});